/* Sphere.c generated by valac 0.20.1, the Vala compiler
 * generated from Sphere.gs, do not modify */

/*
 *  libsoy - soy.bodies.Sphere
 *  Copyright (C) 2006,2007,2008,2009,2010,2011,2012,2013 Copyleft Games Group
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published
 *  by the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program; if not, see http://www.gnu.org/licenses
 *
 */

#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <soy-1/ode.h>
#include <GLES/gl.h>
#include <GLES/glext.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>


#define SOY_BODIES_TYPE_BODY (soy_bodies_body_get_type ())
#define SOY_BODIES_BODY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_BODY, soybodiesBody))
#define SOY_BODIES_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))
#define SOY_BODIES_IS_BODY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_IS_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_BODY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))

typedef struct _soybodiesBody soybodiesBody;
typedef struct _soybodiesBodyClass soybodiesBodyClass;
typedef struct _soybodiesBodyPrivate soybodiesBodyPrivate;

#define SOY_BODIES_TYPE_CAMERA (soy_bodies_camera_get_type ())
#define SOY_BODIES_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_CAMERA, soybodiesCamera))
#define SOY_BODIES_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_CAMERA, soybodiesCameraClass))
#define SOY_BODIES_IS_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_CAMERA))
#define SOY_BODIES_IS_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_CAMERA))
#define SOY_BODIES_CAMERA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_CAMERA, soybodiesCameraClass))

typedef struct _soybodiesCamera soybodiesCamera;
typedef struct _soybodiesCameraClass soybodiesCameraClass;

#define SOY_SCENES_TYPE_SCENE (soy_scenes_scene_get_type ())
#define SOY_SCENES_SCENE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE_SCENE, soyscenesScene))
#define SOY_SCENES_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))
#define SOY_SCENES_IS_SCENE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_IS_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_SCENE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))

typedef struct _soyscenesScene soyscenesScene;
typedef struct _soyscenesSceneClass soyscenesSceneClass;

#define SOY_BODIES_TYPE_SPHERE (soy_bodies_sphere_get_type ())
#define SOY_BODIES_SPHERE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_SPHERE, soybodiesSphere))
#define SOY_BODIES_SPHERE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_SPHERE, soybodiesSphereClass))
#define SOY_BODIES_IS_SPHERE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_SPHERE))
#define SOY_BODIES_IS_SPHERE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_SPHERE))
#define SOY_BODIES_SPHERE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_SPHERE, soybodiesSphereClass))

typedef struct _soybodiesSphere soybodiesSphere;
typedef struct _soybodiesSphereClass soybodiesSphereClass;
typedef struct _soybodiesSpherePrivate soybodiesSpherePrivate;

#define SOY_MATERIALS_TYPE_MATERIAL (soy_materials_material_get_type ())
#define SOY_MATERIALS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterial))
#define SOY_MATERIALS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))
#define SOY_MATERIALS_IS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_IS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_MATERIAL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))

typedef struct _soymaterialsMaterial soymaterialsMaterial;
typedef struct _soymaterialsMaterialClass soymaterialsMaterialClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define SOY_ATOMS_TYPE_POSITION (soy_atoms_position_get_type ())
#define SOY_ATOMS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPosition))
#define SOY_ATOMS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))
#define SOY_ATOMS_IS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_IS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_POSITION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))

typedef struct _soyatomsPosition soyatomsPosition;
typedef struct _soyatomsPositionClass soyatomsPositionClass;
#define _dGeomDestroy0(var) ((var == NULL) ? NULL : (var = (dGeomDestroy (var), NULL)))
#define _dMassfree0(var) ((var == NULL) ? NULL : (var = (dMassfree (var), NULL)))
typedef struct _soymaterialsMaterialPrivate soymaterialsMaterialPrivate;

struct _soybodiesBody {
	GObject parent_instance;
	soybodiesBodyPrivate * priv;
	struct dxBody* body;
	GLfloat* fogcoords;
	gint fogcoords_length1;
	struct dxGeom* geom;
	gchar* key;
	GMutex mutex;
	GLfloat* tslvs;
	gint tslvs_length1;
	soyscenesScene* scene;
	GeeHashMap* tags_;
};

struct _soybodiesBodyClass {
	GObjectClass parent_class;
	void (*create_geom) (soybodiesBody* self, GObject* geom_param, gfloat geom_scalar);
	void (*set_mass) (soybodiesBody* self, gfloat density);
	void (*add_extra) (soybodiesBody* self);
	void (*remove_extra) (soybodiesBody* self);
	gfloat (*pointDepth) (soybodiesBody* self, gfloat x, gfloat y, gfloat z);
	gfloat (*volume) (soybodiesBody* self);
	gint (*finite) (soybodiesBody* self);
	void (*mult_model_matrix) (soybodiesBody* self);
	void (*render) (soybodiesBody* self, gboolean alpha_stage, soybodiesCamera* camera, gint level);
	gfloat (*get_col_radius) (soybodiesBody* self);
};

struct _soybodiesSphere {
	soybodiesBody parent_instance;
	soybodiesSpherePrivate * priv;
};

struct _soybodiesSphereClass {
	soybodiesBodyClass parent_class;
};

struct _soybodiesSpherePrivate {
	GLuint _ebo;
	GLuint _vbo;
	gboolean _updated;
	GLfloat* _vercache;
	gint _vercache_length1;
	gint __vercache_size_;
	soymaterialsMaterial* _material;
	GLfloat _radius;
};

struct _soymaterialsMaterial {
	GObject parent_instance;
	soymaterialsMaterialPrivate * priv;
	gboolean needsTSLVs;
	gboolean translucent;
};

struct _soymaterialsMaterialClass {
	GObjectClass parent_class;
	gboolean (*render) (soymaterialsMaterial* self, gint step, GLvoid* tslvs, dxMatrix3* texmatrix);
	GLenum* (*get_draw_mode) (soymaterialsMaterial* self);
};


static gpointer soy_bodies_sphere_parent_class = NULL;
extern soymaterialsMaterial* soy_default_material;
extern gulong GeomBody;
extern GRWLock soy_scenes__stepLock;

GType soy_bodies_body_get_type (void) G_GNUC_CONST;
GType soy_bodies_camera_get_type (void) G_GNUC_CONST;
GType soy_scenes_scene_get_type (void) G_GNUC_CONST;
GType soy_bodies_sphere_get_type (void) G_GNUC_CONST;
GType soy_materials_material_get_type (void) G_GNUC_CONST;
#define SOY_BODIES_SPHERE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SOY_BODIES_TYPE_SPHERE, soybodiesSpherePrivate))
enum  {
	SOY_BODIES_SPHERE_DUMMY_PROPERTY,
	SOY_BODIES_SPHERE_MATERIAL,
	SOY_BODIES_SPHERE_RADIUS,
	SOY_BODIES_SPHERE_COL_RADIUS
};
GType soy_atoms_position_get_type (void) G_GNUC_CONST;
soybodiesSphere* soy_bodies_sphere_new (soyatomsPosition* position, gfloat radius, soymaterialsMaterial* material);
soybodiesSphere* soy_bodies_sphere_construct (GType object_type, soyatomsPosition* position, gfloat radius, soymaterialsMaterial* material);
soybodiesBody* soy_bodies_body_new (soyatomsPosition* position, GObject* geom_param, gfloat geom_scalar);
soybodiesBody* soy_bodies_body_construct (GType object_type, soyatomsPosition* position, GObject* geom_param, gfloat geom_scalar);
soymaterialsMaterial* soy_materials_material_new (void);
soymaterialsMaterial* soy_materials_material_construct (GType object_type);
void soy_bodies_sphere_set_material (soybodiesSphere* self, soymaterialsMaterial* value);
static void soy_bodies_sphere_real_create_geom (soybodiesBody* base, GObject* geom_param, gfloat geom_scalar);
void soy_bodies_body_set_mass (soybodiesBody* self, gfloat density);
gfloat soy_bodies_body_get_density (soybodiesBody* self);
static void soy_bodies_sphere_real_set_mass (soybodiesBody* base, gfloat density);
gfloat soy_bodies_body_volume (soybodiesBody* self);
static gfloat soy_bodies_sphere_real_volume (soybodiesBody* base);
static void soy_bodies_sphere_real_render (soybodiesBody* base, gboolean alpha_stage, soybodiesCamera* camera, gint level);
void soy_bodies_body_mult_model_matrix (soybodiesBody* self);
static void _soy_bodies_sphere_update_sphere (soybodiesSphere* self);
void soy_bodies_body_calculateTSLV (soybodiesBody* self, GLfloat* vertices, int vertices_length1);
gboolean soy_materials_material_render (soymaterialsMaterial* self, gint step, GLvoid* tslvs, dxMatrix3* texmatrix);
void soy_bodies_body_renderAxis (soybodiesBody* self);
gfloat soy_bodies_sphere_get_radius (soybodiesSphere* self);
static void _soy_bodies_sphere_gen_face (soybodiesSphere* self, gfloat px, gfloat py, gfloat pz, gfloat tx, gfloat ty, gint eoffset, gint voffset, gint axis1, gint axis2, GLushort* elements, int elements_length1, GLfloat* position, int position_length1, GLfloat* normal, int normal_length1, GLfloat* texcoord, int texcoord_length1, GLfloat* tangent, int tangent_length1);
GLfloat* soy_bodies_body_packArrays (soybodiesBody* self, GLfloat* position, int position_length1, GLfloat* normal, int normal_length1, GLfloat* texcoord, int texcoord_length1, GLfloat* tangent, int tangent_length1, int* result_length1);
static GLfloat* _vala_array_dup4 (GLfloat* self, int length);
soymaterialsMaterial* soy_bodies_sphere_get_material (soybodiesSphere* self);
void soy_bodies_sphere_set_radius (soybodiesSphere* self, gfloat value);
static void soy_bodies_sphere_finalize (GObject* obj);
gfloat soy_bodies_body_get_col_radius (soybodiesBody* self);
static void _vala_soy_bodies_sphere_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_soy_bodies_sphere_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);


soybodiesSphere* soy_bodies_sphere_construct (GType object_type, soyatomsPosition* position, gfloat radius, soymaterialsMaterial* material) {
	soybodiesSphere * self = NULL;
	soyatomsPosition* _tmp0_;
	gfloat _tmp1_;
	soymaterialsMaterial* _tmp2_;
	_tmp0_ = position;
	_tmp1_ = radius;
	self = (soybodiesSphere*) soy_bodies_body_construct (object_type, _tmp0_, NULL, _tmp1_);
	_tmp2_ = material;
	if (_tmp2_ == NULL) {
		soymaterialsMaterial* _tmp3_;
		soymaterialsMaterial* _tmp5_;
		_tmp3_ = soy_default_material;
		if (_tmp3_ == NULL) {
			soymaterialsMaterial* _tmp4_;
			_tmp4_ = soy_materials_material_new ();
			_g_object_unref0 (soy_default_material);
			soy_default_material = _tmp4_;
		}
		_tmp5_ = soy_default_material;
		soy_bodies_sphere_set_material (self, _tmp5_);
	} else {
		soymaterialsMaterial* _tmp6_;
		_tmp6_ = material;
		soy_bodies_sphere_set_material (self, _tmp6_);
	}
	self->priv->_updated = TRUE;
	return self;
}


soybodiesSphere* soy_bodies_sphere_new (soyatomsPosition* position, gfloat radius, soymaterialsMaterial* material) {
	return soy_bodies_sphere_construct (SOY_BODIES_TYPE_SPHERE, position, radius, material);
}


static void soy_bodies_sphere_real_create_geom (soybodiesBody* base, GObject* geom_param, gfloat geom_scalar) {
	soybodiesSphere * self;
	gfloat _tmp0_;
	GLfloat _tmp1_;
	struct dxGeom* _tmp2_;
	struct dxGeom* _tmp3_;
	gulong _tmp4_;
	struct dxGeom* _tmp5_;
	struct dxBody* _tmp6_;
	struct dxGeom* _tmp7_;
	dxVector3* _tmp8_ = NULL;
	dxVector3* pos;
	struct dxBody* _tmp9_;
	dReal _tmp10_;
	dReal _tmp11_;
	dReal _tmp12_;
	struct dxBody* _tmp13_;
	struct dxGeom* _tmp14_;
	dxMatrix3* _tmp15_ = NULL;
	struct dxGeom* _tmp16_;
	struct dxBody* _tmp17_;
	gfloat _tmp18_;
	gfloat _tmp19_;
	self = (soybodiesSphere*) base;
	_tmp0_ = geom_scalar;
	self->priv->_radius = (GLfloat) _tmp0_;
	_tmp1_ = self->priv->_radius;
	_tmp2_ = dCreateSphere (NULL, (dReal) _tmp1_);
	_dGeomDestroy0 (((soybodiesBody*) self)->geom);
	((soybodiesBody*) self)->geom = _tmp2_;
	_tmp3_ = ((soybodiesBody*) self)->geom;
	_tmp4_ = GeomBody;
	dGeomSetCategoryBits (_tmp3_, _tmp4_);
	_tmp5_ = ((soybodiesBody*) self)->geom;
	dGeomSetData (_tmp5_, (void*) self);
	_tmp6_ = ((soybodiesBody*) self)->body;
	dBodySetData (_tmp6_, (void*) self);
	_tmp7_ = ((soybodiesBody*) self)->geom;
	_tmp8_ = dGeomGetPosition (_tmp7_);
	pos = _tmp8_;
	_tmp9_ = ((soybodiesBody*) self)->body;
	_tmp10_ = pos->x;
	_tmp11_ = pos->y;
	_tmp12_ = pos->z;
	dBodySetPosition (_tmp9_, _tmp10_, _tmp11_, _tmp12_);
	_tmp13_ = ((soybodiesBody*) self)->body;
	_tmp14_ = ((soybodiesBody*) self)->geom;
	_tmp15_ = dGeomGetRotation (_tmp14_);
	dBodySetRotation (_tmp13_, _tmp15_);
	_tmp16_ = ((soybodiesBody*) self)->geom;
	_tmp17_ = ((soybodiesBody*) self)->body;
	dGeomSetBody (_tmp16_, _tmp17_);
	_tmp18_ = soy_bodies_body_get_density ((soybodiesBody*) self);
	_tmp19_ = _tmp18_;
	soy_bodies_body_set_mass ((soybodiesBody*) self, _tmp19_);
}


static void soy_bodies_sphere_real_set_mass (soybodiesBody* base, gfloat density) {
	soybodiesSphere * self;
	gboolean _tmp0_ = FALSE;
	gfloat _tmp1_;
	gboolean _tmp3_;
	self = (soybodiesSphere*) base;
	_tmp1_ = density;
	if (_tmp1_ != ((gfloat) 0)) {
		gfloat _tmp2_ = 0.0F;
		_tmp2_ = soy_bodies_body_volume ((soybodiesBody*) self);
		_tmp0_ = _tmp2_ != 0.0f;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp3_ = _tmp0_;
	if (_tmp3_) {
		dMass* _tmp4_;
		dMass* mass;
		dMass* _tmp5_;
		gfloat _tmp6_;
		GLfloat _tmp7_;
		struct dxBody* _tmp8_;
		dMass* _tmp9_;
		struct dxBody* _tmp10_;
		_tmp4_ = dMassnew ();
		mass = _tmp4_;
		_tmp5_ = mass;
		_tmp6_ = density;
		_tmp7_ = self->priv->_radius;
		dMassSetSphere (_tmp5_, (dReal) _tmp6_, (dReal) _tmp7_);
		_tmp8_ = ((soybodiesBody*) self)->body;
		_tmp9_ = mass;
		dBodySetMass (_tmp8_, _tmp9_);
		_tmp10_ = ((soybodiesBody*) self)->body;
		dBodySetGravityMode (_tmp10_, 1);
		_dMassfree0 (mass);
	} else {
		struct dxBody* _tmp11_;
		_tmp11_ = ((soybodiesBody*) self)->body;
		dBodySetGravityMode (_tmp11_, 0);
	}
}


static gfloat soy_bodies_sphere_real_volume (soybodiesBody* base) {
	soybodiesSphere * self;
	gfloat result = 0.0F;
	GLfloat _tmp0_;
	gdouble _tmp1_ = 0.0;
	self = (soybodiesSphere*) base;
	_tmp0_ = self->priv->_radius;
	_tmp1_ = pow ((gdouble) _tmp0_, (gdouble) 3);
	result = (gfloat) (((4 / 3) * _tmp1_) * 3.1416);
	return result;
}


static void soy_bodies_sphere_real_render (soybodiesBody* base, gboolean alpha_stage, soybodiesCamera* camera, gint level) {
	soybodiesSphere * self;
	gboolean _tmp0_;
	soymaterialsMaterial* _tmp1_;
	gboolean _tmp2_;
	gint i;
	gint offset;
	gboolean _tmp3_;
	soymaterialsMaterial* _tmp6_;
	gboolean _tmp7_;
	self = (soybodiesSphere*) base;
	g_return_if_fail (camera != NULL);
	_tmp0_ = alpha_stage;
	_tmp1_ = self->priv->_material;
	_tmp2_ = _tmp1_->translucent;
	if (_tmp0_ != _tmp2_) {
		return;
	}
	i = 0;
	offset = 0;
	glMatrixMode (GL_MODELVIEW);
	glPushMatrix ();
	g_mutex_lock (&((soybodiesBody*) self)->mutex);
	soy_bodies_body_mult_model_matrix ((soybodiesBody*) self);
	_tmp3_ = self->priv->_updated;
	if (_tmp3_) {
		_soy_bodies_sphere_update_sphere (self);
	} else {
		GLuint _tmp4_;
		GLuint _tmp5_;
		_tmp4_ = self->priv->_ebo;
		glBindBuffer (GL_ELEMENT_ARRAY_BUFFER, _tmp4_);
		_tmp5_ = self->priv->_vbo;
		glBindBuffer (GL_ARRAY_BUFFER, _tmp5_);
	}
	glVertexPointer ((GLint) 3, GL_FLOAT, (GLsizei) (sizeof (GLfloat) * 11), NULL);
	glNormalPointer (GL_FLOAT, (GLsizei) (sizeof (GLfloat) * 11), (GLvoid*) (sizeof (GLfloat) * 3));
	_tmp6_ = self->priv->_material;
	_tmp7_ = _tmp6_->needsTSLVs;
	if (_tmp7_) {
		GLfloat* _tmp8_;
		gint _tmp8__length1;
		GLfloat* _tmp9_;
		gint _tmp9__length1;
		gint _tmp10_;
		GLfloat* _tmp11_;
		gint _tmp11__length1;
		GLfloat* _tmp12_;
		gint _tmp12__length1;
		_tmp8_ = self->priv->_vercache;
		_tmp8__length1 = self->priv->_vercache_length1;
		soy_bodies_body_calculateTSLV ((soybodiesBody*) self, _tmp8_, _tmp8__length1);
		_tmp9_ = ((soybodiesBody*) self)->tslvs;
		_tmp9__length1 = ((soybodiesBody*) self)->tslvs_length1;
		offset = (gint) (((_tmp9__length1 * sizeof (GLfloat)) * 11) / 3);
		_tmp10_ = offset;
		_tmp11_ = ((soybodiesBody*) self)->tslvs;
		_tmp11__length1 = ((soybodiesBody*) self)->tslvs_length1;
		_tmp12_ = ((soybodiesBody*) self)->tslvs;
		_tmp12__length1 = ((soybodiesBody*) self)->tslvs_length1;
		glBufferSubData (GL_ARRAY_BUFFER, (GLint) ((GLsizei) _tmp10_), (GLsizei) (_tmp11__length1 * sizeof (GLfloat)), _tmp12_);
	}
	while (TRUE) {
		soymaterialsMaterial* _tmp13_;
		gint _tmp14_;
		gint _tmp15_;
		gboolean _tmp16_ = FALSE;
		GLfloat _tmp17_;
		gdouble _tmp18_ = 0.0;
		GLfloat _tmp19_;
		gdouble _tmp20_ = 0.0;
		gint _tmp21_;
		_tmp13_ = self->priv->_material;
		_tmp14_ = i;
		_tmp15_ = offset;
		_tmp16_ = soy_materials_material_render (_tmp13_, _tmp14_, (GLvoid*) _tmp15_, NULL);
		if (!_tmp16_) {
			break;
		}
		_tmp17_ = self->priv->_radius;
		_tmp18_ = ceil ((gdouble) (_tmp17_ * 8));
		_tmp19_ = self->priv->_radius;
		_tmp20_ = ceil ((gdouble) (_tmp19_ * 8));
		glDrawElements (GL_TRIANGLES, (GLsizei) (((3 * 24) * _tmp18_) * _tmp20_), GL_UNSIGNED_SHORT, (GLvoid*) 0);
		_tmp21_ = i;
		i = _tmp21_ + 1;
	}
	soy_bodies_body_renderAxis ((soybodiesBody*) self);
	g_mutex_unlock (&((soybodiesBody*) self)->mutex);
	glMatrixMode (GL_MODELVIEW);
	glPopMatrix ();
}


static GLfloat* _vala_array_dup4 (GLfloat* self, int length) {
	return g_memdup (self, length * sizeof (GLfloat));
}


static void _soy_bodies_sphere_update_sphere (soybodiesSphere* self) {
	GLuint _tmp0_;
	gfloat _tmp3_;
	gfloat _tmp4_;
	gdouble _tmp5_ = 0.0;
	gint sub;
	gint elenum;
	gint vernum;
	GLushort* _tmp6_ = NULL;
	GLushort* elements;
	gint elements_length1;
	gint _elements_size_;
	GLfloat* _tmp7_ = NULL;
	GLfloat* position;
	gint position_length1;
	gint _position_size_;
	GLfloat* _tmp8_ = NULL;
	GLfloat* normal;
	gint normal_length1;
	gint _normal_size_;
	GLfloat* _tmp9_ = NULL;
	GLfloat* texcoord;
	gint texcoord_length1;
	gint _texcoord_size_;
	GLfloat* _tmp10_ = NULL;
	GLfloat* tangent;
	gint tangent_length1;
	gint _tangent_size_;
	GLfloat _tmp11_;
	GLfloat radius;
	gint voffset;
	gint eoffset;
	gint _tmp12_;
	gint _tmp13_;
	gint _tmp14_;
	gint _tmp15_;
	gint _tmp16_;
	gint _tmp17_;
	gint _tmp18_;
	gint _tmp19_;
	gint _tmp20_;
	gint _tmp21_;
	gint _tmp22_;
	gint _tmp23_;
	gint _tmp24_;
	gint _tmp25_;
	gint _tmp26_;
	gint _tmp27_;
	gint _tmp28_;
	gint _tmp29_;
	gint _tmp30_;
	gint _tmp31_;
	gint _tmp32_;
	gint _tmp33_;
	gint _tmp34_ = 0;
	GLfloat* _tmp35_ = NULL;
	GLfloat* vertices;
	gint vertices_length1;
	gint _vertices_size_;
	GLfloat* _tmp36_;
	gint _tmp36__length1;
	GLuint _tmp37_;
	GLuint _tmp38_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_ebo;
	if (_tmp0_ == ((GLuint) 0)) {
		GLuint _tmp1_ = 0U;
		GLuint _tmp2_ = 0U;
		glGenBuffers ((GLsizei) 1, &_tmp1_);
		self->priv->_ebo = _tmp1_;
		glGenBuffers ((GLsizei) 1, &_tmp2_);
		self->priv->_vbo = _tmp2_;
	}
	_tmp3_ = soy_bodies_sphere_get_radius (self);
	_tmp4_ = _tmp3_;
	_tmp5_ = ceil ((gdouble) (_tmp4_ * 8));
	sub = (gint) _tmp5_;
	elenum = (gint) ((24 * sub) * sub);
	vernum = (gint) (((6 * (sub + 1)) * (sub + 1)) + (elenum / 4));
	_tmp6_ = g_new0 (GLushort, elenum * 3);
	elements = _tmp6_;
	elements_length1 = elenum * 3;
	_elements_size_ = elements_length1;
	_tmp7_ = g_new0 (GLfloat, vernum * 3);
	position = _tmp7_;
	position_length1 = vernum * 3;
	_position_size_ = position_length1;
	_tmp8_ = g_new0 (GLfloat, vernum * 3);
	normal = _tmp8_;
	normal_length1 = vernum * 3;
	_normal_size_ = normal_length1;
	_tmp9_ = g_new0 (GLfloat, vernum * 2);
	texcoord = _tmp9_;
	texcoord_length1 = vernum * 2;
	_texcoord_size_ = texcoord_length1;
	_tmp10_ = g_new0 (GLfloat, vernum * 3);
	tangent = _tmp10_;
	tangent_length1 = vernum * 3;
	_tangent_size_ = tangent_length1;
	_tmp11_ = self->priv->_radius;
	radius = _tmp11_;
	voffset = 0;
	eoffset = 0;
	_tmp12_ = eoffset;
	_tmp13_ = voffset;
	_soy_bodies_sphere_gen_face (self, (gfloat) radius, (gfloat) radius, (gfloat) radius, 0.625f, 0.25f, _tmp12_, _tmp13_, 0, 2, elements, elements_length1, position, position_length1, normal, normal_length1, texcoord, texcoord_length1, tangent, tangent_length1);
	_tmp14_ = voffset;
	voffset = _tmp14_ + ((gint) (((sub + 1) * (sub + 1)) + (sub * sub)));
	_tmp15_ = eoffset;
	eoffset = _tmp15_ + ((gint) ((4 * sub) * sub));
	_tmp16_ = eoffset;
	_tmp17_ = voffset;
	_soy_bodies_sphere_gen_face (self, (gfloat) radius, (gfloat) (-radius), (gfloat) (-radius), 0.625f, 0.75f, _tmp16_, _tmp17_, 0, 2, elements, elements_length1, position, position_length1, normal, normal_length1, texcoord, texcoord_length1, tangent, tangent_length1);
	_tmp18_ = voffset;
	voffset = _tmp18_ + ((gint) (((sub + 1) * (sub + 1)) + (sub * sub)));
	_tmp19_ = eoffset;
	eoffset = _tmp19_ + ((gint) ((4 * sub) * sub));
	_tmp20_ = eoffset;
	_tmp21_ = voffset;
	_soy_bodies_sphere_gen_face (self, (gfloat) (-radius), (gfloat) radius, (gfloat) radius, 0.125f, 0.5f, _tmp20_, _tmp21_, 0, 1, elements, elements_length1, position, position_length1, normal, normal_length1, texcoord, texcoord_length1, tangent, tangent_length1);
	_tmp22_ = voffset;
	voffset = _tmp22_ + ((gint) (((sub + 1) * (sub + 1)) + (sub * sub)));
	_tmp23_ = eoffset;
	eoffset = _tmp23_ + ((gint) ((4 * sub) * sub));
	_tmp24_ = eoffset;
	_tmp25_ = voffset;
	_soy_bodies_sphere_gen_face (self, (gfloat) radius, (gfloat) radius, (gfloat) (-radius), 0.625f, 0.5f, _tmp24_, _tmp25_, 0, 1, elements, elements_length1, position, position_length1, normal, normal_length1, texcoord, texcoord_length1, tangent, tangent_length1);
	_tmp26_ = voffset;
	voffset = _tmp26_ + ((gint) (((sub + 1) * (sub + 1)) + (sub * sub)));
	_tmp27_ = eoffset;
	eoffset = _tmp27_ + ((gint) ((4 * sub) * sub));
	_tmp28_ = eoffset;
	_tmp29_ = voffset;
	_soy_bodies_sphere_gen_face (self, (gfloat) radius, (gfloat) radius, (gfloat) radius, 0.375f, 0.5f, _tmp28_, _tmp29_, 2, 1, elements, elements_length1, position, position_length1, normal, normal_length1, texcoord, texcoord_length1, tangent, tangent_length1);
	_tmp30_ = voffset;
	voffset = _tmp30_ + ((gint) (((sub + 1) * (sub + 1)) + (sub * sub)));
	_tmp31_ = eoffset;
	eoffset = _tmp31_ + ((gint) ((4 * sub) * sub));
	_tmp32_ = eoffset;
	_tmp33_ = voffset;
	_soy_bodies_sphere_gen_face (self, (gfloat) (-radius), (gfloat) radius, (gfloat) (-radius), 0.875f, 0.5f, _tmp32_, _tmp33_, 2, 1, elements, elements_length1, position, position_length1, normal, normal_length1, texcoord, texcoord_length1, tangent, tangent_length1);
	_tmp35_ = soy_bodies_body_packArrays ((soybodiesBody*) self, position, position_length1, normal, normal_length1, texcoord, texcoord_length1, tangent, tangent_length1, &_tmp34_);
	vertices = _tmp35_;
	vertices_length1 = _tmp34_;
	_vertices_size_ = vertices_length1;
	_tmp36_ = (vertices != NULL) ? _vala_array_dup4 (vertices, vertices_length1) : ((gpointer) vertices);
	_tmp36__length1 = vertices_length1;
	self->priv->_vercache = (g_free (self->priv->_vercache), NULL);
	self->priv->_vercache = _tmp36_;
	self->priv->_vercache_length1 = _tmp36__length1;
	self->priv->__vercache_size_ = self->priv->_vercache_length1;
	_tmp37_ = self->priv->_ebo;
	glBindBuffer (GL_ELEMENT_ARRAY_BUFFER, _tmp37_);
	glBufferData (GL_ELEMENT_ARRAY_BUFFER, (GLsizei) ((3 * elenum) * sizeof (GLushort)), elements, GL_STATIC_DRAW);
	_tmp38_ = self->priv->_vbo;
	glBindBuffer (GL_ARRAY_BUFFER, _tmp38_);
	glBufferData (GL_ARRAY_BUFFER, (GLsizei) ((14 * vernum) * sizeof (GLfloat)), vertices, GL_STATIC_DRAW);
	self->priv->_updated = FALSE;
	vertices = (g_free (vertices), NULL);
	tangent = (g_free (tangent), NULL);
	texcoord = (g_free (texcoord), NULL);
	normal = (g_free (normal), NULL);
	position = (g_free (position), NULL);
	elements = (g_free (elements), NULL);
}


static void _soy_bodies_sphere_gen_face (soybodiesSphere* self, gfloat px, gfloat py, gfloat pz, gfloat tx, gfloat ty, gint eoffset, gint voffset, gint axis1, gint axis2, GLushort* elements, int elements_length1, GLfloat* position, int position_length1, GLfloat* normal, int normal_length1, GLfloat* texcoord, int texcoord_length1, GLfloat* tangent, int tangent_length1) {
	gfloat _tmp0_;
	gfloat _tmp1_;
	gfloat _tmp2_;
	GLfloat* _tmp3_ = NULL;
	GLfloat* pfarray;
	gint pfarray_length1;
	gint _pfarray_size_;
	gint _tmp4_;
	gint _tmp5_;
	gint axis3;
	GLfloat* _tmp6_;
	gint _tmp6__length1;
	gint _tmp7_;
	GLfloat _tmp8_;
	gfloat _tmp9_ = 0.0F;
	gdouble _tmp10_ = 0.0;
	gint sub;
	GLfloat* _tmp147_;
	gint _tmp147__length1;
	gint _tmp148_;
	GLfloat _tmp149_;
	GLfloat* _tmp150_;
	gint _tmp150__length1;
	gint _tmp151_;
	GLfloat _tmp152_;
	g_return_if_fail (self != NULL);
	_tmp0_ = px;
	_tmp1_ = py;
	_tmp2_ = pz;
	_tmp3_ = g_new0 (GLfloat, 3);
	_tmp3_[0] = (GLfloat) _tmp0_;
	_tmp3_[1] = (GLfloat) _tmp1_;
	_tmp3_[2] = (GLfloat) _tmp2_;
	pfarray = _tmp3_;
	pfarray_length1 = 3;
	_pfarray_size_ = pfarray_length1;
	_tmp4_ = axis1;
	_tmp5_ = axis2;
	axis3 = (3 - _tmp4_) - _tmp5_;
	_tmp6_ = pfarray;
	_tmp6__length1 = pfarray_length1;
	_tmp7_ = axis1;
	_tmp8_ = _tmp6_[_tmp7_];
	_tmp9_ = fabsf ((gfloat) _tmp8_);
	_tmp10_ = ceil ((gdouble) (8 * _tmp9_));
	sub = (gint) _tmp10_;
	{
		gint i;
		i = 0;
		{
			gboolean _tmp11_;
			_tmp11_ = TRUE;
			while (TRUE) {
				gboolean _tmp12_;
				gint _tmp14_;
				_tmp12_ = _tmp11_;
				if (!_tmp12_) {
					gint _tmp13_;
					_tmp13_ = i;
					i = _tmp13_ + 1;
				}
				_tmp11_ = FALSE;
				_tmp14_ = sub;
				if (!(i <= (_tmp14_ - 1))) {
					break;
				}
				{
					gint j;
					j = 0;
					{
						gboolean _tmp15_;
						_tmp15_ = TRUE;
						while (TRUE) {
							gboolean _tmp16_;
							gint _tmp18_;
							GLushort* _tmp19_;
							gint _tmp19__length1;
							gint _tmp20_;
							gint _tmp21_;
							gint _tmp22_;
							gint _tmp23_;
							gint _tmp24_;
							gint _tmp25_;
							gint _tmp26_;
							gint _tmp27_;
							GLushort _tmp28_;
							GLushort* _tmp29_;
							gint _tmp29__length1;
							gint _tmp30_;
							gint _tmp31_;
							gint _tmp32_;
							gint _tmp33_;
							gint _tmp34_;
							gint _tmp35_;
							gint _tmp36_;
							gint _tmp37_;
							gint _tmp38_;
							gint _tmp39_;
							GLushort _tmp40_;
							GLushort* _tmp41_;
							gint _tmp41__length1;
							gint _tmp42_;
							gint _tmp43_;
							gint _tmp44_;
							gint _tmp45_;
							gint _tmp46_;
							gint _tmp47_;
							gint _tmp48_;
							gint _tmp49_;
							GLushort _tmp50_;
							GLushort* _tmp51_;
							gint _tmp51__length1;
							gint _tmp52_;
							gint _tmp53_;
							gint _tmp54_;
							gint _tmp55_;
							gint _tmp56_;
							gint _tmp57_;
							gint _tmp58_;
							gint _tmp59_;
							GLushort _tmp60_;
							GLushort* _tmp61_;
							gint _tmp61__length1;
							gint _tmp62_;
							gint _tmp63_;
							gint _tmp64_;
							gint _tmp65_;
							gint _tmp66_;
							gint _tmp67_;
							gint _tmp68_;
							gint _tmp69_;
							gint _tmp70_;
							gint _tmp71_;
							GLushort _tmp72_;
							GLushort* _tmp73_;
							gint _tmp73__length1;
							gint _tmp74_;
							gint _tmp75_;
							gint _tmp76_;
							gint _tmp77_;
							gint _tmp78_;
							gint _tmp79_;
							gint _tmp80_;
							gint _tmp81_;
							GLushort _tmp82_;
							GLushort* _tmp83_;
							gint _tmp83__length1;
							gint _tmp84_;
							gint _tmp85_;
							gint _tmp86_;
							gint _tmp87_;
							gint _tmp88_;
							gint _tmp89_;
							gint _tmp90_;
							gint _tmp91_;
							GLushort _tmp92_;
							GLushort* _tmp93_;
							gint _tmp93__length1;
							gint _tmp94_;
							gint _tmp95_;
							gint _tmp96_;
							gint _tmp97_;
							gint _tmp98_;
							gint _tmp99_;
							gint _tmp100_;
							gint _tmp101_;
							gint _tmp102_;
							gint _tmp103_;
							GLushort _tmp104_;
							GLushort* _tmp105_;
							gint _tmp105__length1;
							gint _tmp106_;
							gint _tmp107_;
							gint _tmp108_;
							gint _tmp109_;
							gint _tmp110_;
							gint _tmp111_;
							gint _tmp112_;
							gint _tmp113_;
							GLushort _tmp114_;
							GLushort* _tmp115_;
							gint _tmp115__length1;
							gint _tmp116_;
							gint _tmp117_;
							gint _tmp118_;
							gint _tmp119_;
							gint _tmp120_;
							gint _tmp121_;
							gint _tmp122_;
							gint _tmp123_;
							GLushort _tmp124_;
							GLushort* _tmp125_;
							gint _tmp125__length1;
							gint _tmp126_;
							gint _tmp127_;
							gint _tmp128_;
							gint _tmp129_;
							gint _tmp130_;
							gint _tmp131_;
							gint _tmp132_;
							gint _tmp133_;
							gint _tmp134_;
							gint _tmp135_;
							GLushort _tmp136_;
							GLushort* _tmp137_;
							gint _tmp137__length1;
							gint _tmp138_;
							gint _tmp139_;
							gint _tmp140_;
							gint _tmp141_;
							gint _tmp142_;
							gint _tmp143_;
							gint _tmp144_;
							gint _tmp145_;
							GLushort _tmp146_;
							_tmp16_ = _tmp15_;
							if (!_tmp16_) {
								gint _tmp17_;
								_tmp17_ = j;
								j = _tmp17_ + 1;
							}
							_tmp15_ = FALSE;
							_tmp18_ = sub;
							if (!(j <= (_tmp18_ - 1))) {
								break;
							}
							_tmp19_ = elements;
							_tmp19__length1 = elements_length1;
							_tmp20_ = eoffset;
							_tmp21_ = i;
							_tmp22_ = sub;
							_tmp23_ = j;
							_tmp24_ = voffset;
							_tmp25_ = j;
							_tmp26_ = i;
							_tmp27_ = sub;
							_tmp19_[(_tmp20_ * 3) + (((_tmp21_ * _tmp22_) + _tmp23_) * 12)] = (GLushort) ((_tmp24_ + _tmp25_) + (_tmp26_ * (_tmp27_ + 1)));
							_tmp28_ = _tmp19_[(_tmp20_ * 3) + (((_tmp21_ * _tmp22_) + _tmp23_) * 12)];
							_tmp29_ = elements;
							_tmp29__length1 = elements_length1;
							_tmp30_ = eoffset;
							_tmp31_ = i;
							_tmp32_ = sub;
							_tmp33_ = j;
							_tmp34_ = voffset;
							_tmp35_ = sub;
							_tmp36_ = sub;
							_tmp37_ = j;
							_tmp38_ = i;
							_tmp39_ = sub;
							_tmp29_[((_tmp30_ * 3) + (((_tmp31_ * _tmp32_) + _tmp33_) * 12)) + 1] = (GLushort) (((_tmp34_ + ((_tmp35_ + 1) * (_tmp36_ + 1))) + _tmp37_) + (_tmp38_ * _tmp39_));
							_tmp40_ = _tmp29_[((_tmp30_ * 3) + (((_tmp31_ * _tmp32_) + _tmp33_) * 12)) + 1];
							_tmp41_ = elements;
							_tmp41__length1 = elements_length1;
							_tmp42_ = eoffset;
							_tmp43_ = i;
							_tmp44_ = sub;
							_tmp45_ = j;
							_tmp46_ = voffset;
							_tmp47_ = j;
							_tmp48_ = i;
							_tmp49_ = sub;
							_tmp41_[((_tmp42_ * 3) + (((_tmp43_ * _tmp44_) + _tmp45_) * 12)) + 2] = (GLushort) (((_tmp46_ + _tmp47_) + (_tmp48_ * (_tmp49_ + 1))) + 1);
							_tmp50_ = _tmp41_[((_tmp42_ * 3) + (((_tmp43_ * _tmp44_) + _tmp45_) * 12)) + 2];
							_tmp51_ = elements;
							_tmp51__length1 = elements_length1;
							_tmp52_ = eoffset;
							_tmp53_ = i;
							_tmp54_ = sub;
							_tmp55_ = j;
							_tmp56_ = voffset;
							_tmp57_ = j;
							_tmp58_ = i;
							_tmp59_ = sub;
							_tmp51_[((_tmp52_ * 3) + (((_tmp53_ * _tmp54_) + _tmp55_) * 12)) + 3] = (GLushort) (((_tmp56_ + _tmp57_) + (_tmp58_ * (_tmp59_ + 1))) + 1);
							_tmp60_ = _tmp51_[((_tmp52_ * 3) + (((_tmp53_ * _tmp54_) + _tmp55_) * 12)) + 3];
							_tmp61_ = elements;
							_tmp61__length1 = elements_length1;
							_tmp62_ = eoffset;
							_tmp63_ = i;
							_tmp64_ = sub;
							_tmp65_ = j;
							_tmp66_ = voffset;
							_tmp67_ = sub;
							_tmp68_ = sub;
							_tmp69_ = j;
							_tmp70_ = i;
							_tmp71_ = sub;
							_tmp61_[((_tmp62_ * 3) + (((_tmp63_ * _tmp64_) + _tmp65_) * 12)) + 4] = (GLushort) (((_tmp66_ + ((_tmp67_ + 1) * (_tmp68_ + 1))) + _tmp69_) + (_tmp70_ * _tmp71_));
							_tmp72_ = _tmp61_[((_tmp62_ * 3) + (((_tmp63_ * _tmp64_) + _tmp65_) * 12)) + 4];
							_tmp73_ = elements;
							_tmp73__length1 = elements_length1;
							_tmp74_ = eoffset;
							_tmp75_ = i;
							_tmp76_ = sub;
							_tmp77_ = j;
							_tmp78_ = voffset;
							_tmp79_ = j;
							_tmp80_ = i;
							_tmp81_ = sub;
							_tmp73_[((_tmp74_ * 3) + (((_tmp75_ * _tmp76_) + _tmp77_) * 12)) + 5] = (GLushort) (((_tmp78_ + _tmp79_) + ((_tmp80_ + 1) * (_tmp81_ + 1))) + 1);
							_tmp82_ = _tmp73_[((_tmp74_ * 3) + (((_tmp75_ * _tmp76_) + _tmp77_) * 12)) + 5];
							_tmp83_ = elements;
							_tmp83__length1 = elements_length1;
							_tmp84_ = eoffset;
							_tmp85_ = i;
							_tmp86_ = sub;
							_tmp87_ = j;
							_tmp88_ = voffset;
							_tmp89_ = j;
							_tmp90_ = i;
							_tmp91_ = sub;
							_tmp83_[((_tmp84_ * 3) + (((_tmp85_ * _tmp86_) + _tmp87_) * 12)) + 6] = (GLushort) (((_tmp88_ + _tmp89_) + ((_tmp90_ + 1) * (_tmp91_ + 1))) + 1);
							_tmp92_ = _tmp83_[((_tmp84_ * 3) + (((_tmp85_ * _tmp86_) + _tmp87_) * 12)) + 6];
							_tmp93_ = elements;
							_tmp93__length1 = elements_length1;
							_tmp94_ = eoffset;
							_tmp95_ = i;
							_tmp96_ = sub;
							_tmp97_ = j;
							_tmp98_ = voffset;
							_tmp99_ = sub;
							_tmp100_ = sub;
							_tmp101_ = j;
							_tmp102_ = i;
							_tmp103_ = sub;
							_tmp93_[((_tmp94_ * 3) + (((_tmp95_ * _tmp96_) + _tmp97_) * 12)) + 7] = (GLushort) (((_tmp98_ + ((_tmp99_ + 1) * (_tmp100_ + 1))) + _tmp101_) + (_tmp102_ * _tmp103_));
							_tmp104_ = _tmp93_[((_tmp94_ * 3) + (((_tmp95_ * _tmp96_) + _tmp97_) * 12)) + 7];
							_tmp105_ = elements;
							_tmp105__length1 = elements_length1;
							_tmp106_ = eoffset;
							_tmp107_ = i;
							_tmp108_ = sub;
							_tmp109_ = j;
							_tmp110_ = voffset;
							_tmp111_ = j;
							_tmp112_ = i;
							_tmp113_ = sub;
							_tmp105_[((_tmp106_ * 3) + (((_tmp107_ * _tmp108_) + _tmp109_) * 12)) + 8] = (GLushort) ((_tmp110_ + _tmp111_) + ((_tmp112_ + 1) * (_tmp113_ + 1)));
							_tmp114_ = _tmp105_[((_tmp106_ * 3) + (((_tmp107_ * _tmp108_) + _tmp109_) * 12)) + 8];
							_tmp115_ = elements;
							_tmp115__length1 = elements_length1;
							_tmp116_ = eoffset;
							_tmp117_ = i;
							_tmp118_ = sub;
							_tmp119_ = j;
							_tmp120_ = voffset;
							_tmp121_ = j;
							_tmp122_ = i;
							_tmp123_ = sub;
							_tmp115_[((_tmp116_ * 3) + (((_tmp117_ * _tmp118_) + _tmp119_) * 12)) + 9] = (GLushort) ((_tmp120_ + _tmp121_) + ((_tmp122_ + 1) * (_tmp123_ + 1)));
							_tmp124_ = _tmp115_[((_tmp116_ * 3) + (((_tmp117_ * _tmp118_) + _tmp119_) * 12)) + 9];
							_tmp125_ = elements;
							_tmp125__length1 = elements_length1;
							_tmp126_ = eoffset;
							_tmp127_ = i;
							_tmp128_ = sub;
							_tmp129_ = j;
							_tmp130_ = voffset;
							_tmp131_ = sub;
							_tmp132_ = sub;
							_tmp133_ = j;
							_tmp134_ = i;
							_tmp135_ = sub;
							_tmp125_[((_tmp126_ * 3) + (((_tmp127_ * _tmp128_) + _tmp129_) * 12)) + 10] = (GLushort) (((_tmp130_ + ((_tmp131_ + 1) * (_tmp132_ + 1))) + _tmp133_) + (_tmp134_ * _tmp135_));
							_tmp136_ = _tmp125_[((_tmp126_ * 3) + (((_tmp127_ * _tmp128_) + _tmp129_) * 12)) + 10];
							_tmp137_ = elements;
							_tmp137__length1 = elements_length1;
							_tmp138_ = eoffset;
							_tmp139_ = i;
							_tmp140_ = sub;
							_tmp141_ = j;
							_tmp142_ = voffset;
							_tmp143_ = j;
							_tmp144_ = i;
							_tmp145_ = sub;
							_tmp137_[((_tmp138_ * 3) + (((_tmp139_ * _tmp140_) + _tmp141_) * 12)) + 11] = (GLushort) ((_tmp142_ + _tmp143_) + (_tmp144_ * (_tmp145_ + 1)));
							_tmp146_ = _tmp137_[((_tmp138_ * 3) + (((_tmp139_ * _tmp140_) + _tmp141_) * 12)) + 11];
						}
					}
				}
			}
		}
	}
	_tmp147_ = pfarray;
	_tmp147__length1 = pfarray_length1;
	_tmp148_ = axis1;
	_tmp147_[_tmp148_] *= (GLfloat) (-1);
	_tmp149_ = _tmp147_[_tmp148_];
	_tmp150_ = pfarray;
	_tmp150__length1 = pfarray_length1;
	_tmp151_ = axis2;
	_tmp150_[_tmp151_] *= (GLfloat) (-1);
	_tmp152_ = _tmp150_[_tmp151_];
	{
		gint i;
		i = 0;
		{
			gboolean _tmp153_;
			_tmp153_ = TRUE;
			while (TRUE) {
				gboolean _tmp154_;
				gint _tmp156_;
				_tmp154_ = _tmp153_;
				if (!_tmp154_) {
					gint _tmp155_;
					_tmp155_ = i;
					i = _tmp155_ + 1;
				}
				_tmp153_ = FALSE;
				_tmp156_ = sub;
				if (!(i <= _tmp156_)) {
					break;
				}
				{
					gint j;
					j = 0;
					{
						gboolean _tmp157_;
						_tmp157_ = TRUE;
						while (TRUE) {
							gboolean _tmp158_;
							gint _tmp160_;
							gboolean _tmp161_ = FALSE;
							gfloat _tmp162_;
							GLfloat* _tmp163_;
							gint _tmp163__length1;
							GLfloat _tmp164_;
							gboolean _tmp166_;
							gboolean _tmp198_ = FALSE;
							gfloat _tmp199_;
							GLfloat* _tmp200_;
							gint _tmp200__length1;
							GLfloat _tmp201_;
							gboolean _tmp203_;
							gboolean _tmp235_ = FALSE;
							gfloat _tmp236_;
							GLfloat* _tmp237_;
							gint _tmp237__length1;
							GLfloat _tmp238_;
							gboolean _tmp240_;
							GLfloat* _tmp272_;
							gint _tmp272__length1;
							gint _tmp273_;
							gint _tmp274_;
							gint _tmp275_;
							gint _tmp276_;
							gfloat _tmp277_;
							gint _tmp278_;
							gint _tmp279_;
							GLfloat _tmp280_;
							GLfloat* _tmp281_;
							gint _tmp281__length1;
							gint _tmp282_;
							gint _tmp283_;
							gint _tmp284_;
							gint _tmp285_;
							gfloat _tmp286_;
							gint _tmp287_;
							gint _tmp288_;
							GLfloat _tmp289_;
							_tmp158_ = _tmp157_;
							if (!_tmp158_) {
								gint _tmp159_;
								_tmp159_ = j;
								j = _tmp159_ + 1;
							}
							_tmp157_ = FALSE;
							_tmp160_ = sub;
							if (!(j <= _tmp160_)) {
								break;
							}
							_tmp162_ = px;
							_tmp163_ = pfarray;
							_tmp163__length1 = pfarray_length1;
							_tmp164_ = _tmp163_[0];
							if (_tmp162_ != ((gfloat) _tmp164_)) {
								gint _tmp165_;
								_tmp165_ = axis1;
								_tmp161_ = _tmp165_ == 0;
							} else {
								_tmp161_ = FALSE;
							}
							_tmp166_ = _tmp161_;
							if (_tmp166_) {
								GLfloat* _tmp167_;
								gint _tmp167__length1;
								gint _tmp168_;
								gint _tmp169_;
								gint _tmp170_;
								gint _tmp171_;
								gfloat _tmp172_;
								gint _tmp173_;
								gint _tmp174_;
								GLfloat _tmp175_;
								_tmp167_ = position;
								_tmp167__length1 = position_length1;
								_tmp168_ = voffset;
								_tmp169_ = i;
								_tmp170_ = sub;
								_tmp171_ = j;
								_tmp172_ = px;
								_tmp173_ = j;
								_tmp174_ = sub;
								_tmp167_[((_tmp168_ + (_tmp169_ * (_tmp170_ + 1))) + _tmp171_) * 3] = (GLfloat) ((_tmp172_ * (-((((gfloat) _tmp173_) / _tmp174_) - 0.5f))) * 2);
								_tmp175_ = _tmp167_[((_tmp168_ + (_tmp169_ * (_tmp170_ + 1))) + _tmp171_) * 3];
							} else {
								gboolean _tmp176_ = FALSE;
								gfloat _tmp177_;
								GLfloat* _tmp178_;
								gint _tmp178__length1;
								GLfloat _tmp179_;
								gboolean _tmp181_;
								_tmp177_ = px;
								_tmp178_ = pfarray;
								_tmp178__length1 = pfarray_length1;
								_tmp179_ = _tmp178_[0];
								if (_tmp177_ != ((gfloat) _tmp179_)) {
									gint _tmp180_;
									_tmp180_ = axis2;
									_tmp176_ = _tmp180_ == 0;
								} else {
									_tmp176_ = FALSE;
								}
								_tmp181_ = _tmp176_;
								if (_tmp181_) {
									GLfloat* _tmp182_;
									gint _tmp182__length1;
									gint _tmp183_;
									gint _tmp184_;
									gint _tmp185_;
									gint _tmp186_;
									gfloat _tmp187_;
									gint _tmp188_;
									gint _tmp189_;
									GLfloat _tmp190_;
									_tmp182_ = position;
									_tmp182__length1 = position_length1;
									_tmp183_ = voffset;
									_tmp184_ = i;
									_tmp185_ = sub;
									_tmp186_ = j;
									_tmp187_ = px;
									_tmp188_ = i;
									_tmp189_ = sub;
									_tmp182_[((_tmp183_ + (_tmp184_ * (_tmp185_ + 1))) + _tmp186_) * 3] = (GLfloat) ((_tmp187_ * (-((((gfloat) _tmp188_) / _tmp189_) - 0.5f))) * 2);
									_tmp190_ = _tmp182_[((_tmp183_ + (_tmp184_ * (_tmp185_ + 1))) + _tmp186_) * 3];
								} else {
									GLfloat* _tmp191_;
									gint _tmp191__length1;
									gint _tmp192_;
									gint _tmp193_;
									gint _tmp194_;
									gint _tmp195_;
									gfloat _tmp196_;
									GLfloat _tmp197_;
									_tmp191_ = position;
									_tmp191__length1 = position_length1;
									_tmp192_ = voffset;
									_tmp193_ = i;
									_tmp194_ = sub;
									_tmp195_ = j;
									_tmp196_ = px;
									_tmp191_[((_tmp192_ + (_tmp193_ * (_tmp194_ + 1))) + _tmp195_) * 3] = (GLfloat) _tmp196_;
									_tmp197_ = _tmp191_[((_tmp192_ + (_tmp193_ * (_tmp194_ + 1))) + _tmp195_) * 3];
								}
							}
							_tmp199_ = py;
							_tmp200_ = pfarray;
							_tmp200__length1 = pfarray_length1;
							_tmp201_ = _tmp200_[1];
							if (_tmp199_ != ((gfloat) _tmp201_)) {
								gint _tmp202_;
								_tmp202_ = axis1;
								_tmp198_ = _tmp202_ == 1;
							} else {
								_tmp198_ = FALSE;
							}
							_tmp203_ = _tmp198_;
							if (_tmp203_) {
								GLfloat* _tmp204_;
								gint _tmp204__length1;
								gint _tmp205_;
								gint _tmp206_;
								gint _tmp207_;
								gint _tmp208_;
								gfloat _tmp209_;
								gint _tmp210_;
								gint _tmp211_;
								GLfloat _tmp212_;
								_tmp204_ = position;
								_tmp204__length1 = position_length1;
								_tmp205_ = voffset;
								_tmp206_ = i;
								_tmp207_ = sub;
								_tmp208_ = j;
								_tmp209_ = py;
								_tmp210_ = j;
								_tmp211_ = sub;
								_tmp204_[(((_tmp205_ + (_tmp206_ * (_tmp207_ + 1))) + _tmp208_) * 3) + 1] = (GLfloat) ((_tmp209_ * (-((((gfloat) _tmp210_) / _tmp211_) - 0.5f))) * 2);
								_tmp212_ = _tmp204_[(((_tmp205_ + (_tmp206_ * (_tmp207_ + 1))) + _tmp208_) * 3) + 1];
							} else {
								gboolean _tmp213_ = FALSE;
								gfloat _tmp214_;
								GLfloat* _tmp215_;
								gint _tmp215__length1;
								GLfloat _tmp216_;
								gboolean _tmp218_;
								_tmp214_ = py;
								_tmp215_ = pfarray;
								_tmp215__length1 = pfarray_length1;
								_tmp216_ = _tmp215_[1];
								if (_tmp214_ != ((gfloat) _tmp216_)) {
									gint _tmp217_;
									_tmp217_ = axis2;
									_tmp213_ = _tmp217_ == 1;
								} else {
									_tmp213_ = FALSE;
								}
								_tmp218_ = _tmp213_;
								if (_tmp218_) {
									GLfloat* _tmp219_;
									gint _tmp219__length1;
									gint _tmp220_;
									gint _tmp221_;
									gint _tmp222_;
									gint _tmp223_;
									gfloat _tmp224_;
									gint _tmp225_;
									gint _tmp226_;
									GLfloat _tmp227_;
									_tmp219_ = position;
									_tmp219__length1 = position_length1;
									_tmp220_ = voffset;
									_tmp221_ = i;
									_tmp222_ = sub;
									_tmp223_ = j;
									_tmp224_ = py;
									_tmp225_ = i;
									_tmp226_ = sub;
									_tmp219_[(((_tmp220_ + (_tmp221_ * (_tmp222_ + 1))) + _tmp223_) * 3) + 1] = (GLfloat) ((_tmp224_ * (-((((gfloat) _tmp225_) / _tmp226_) - 0.5f))) * 2);
									_tmp227_ = _tmp219_[(((_tmp220_ + (_tmp221_ * (_tmp222_ + 1))) + _tmp223_) * 3) + 1];
								} else {
									GLfloat* _tmp228_;
									gint _tmp228__length1;
									gint _tmp229_;
									gint _tmp230_;
									gint _tmp231_;
									gint _tmp232_;
									gfloat _tmp233_;
									GLfloat _tmp234_;
									_tmp228_ = position;
									_tmp228__length1 = position_length1;
									_tmp229_ = voffset;
									_tmp230_ = i;
									_tmp231_ = sub;
									_tmp232_ = j;
									_tmp233_ = py;
									_tmp228_[(((_tmp229_ + (_tmp230_ * (_tmp231_ + 1))) + _tmp232_) * 3) + 1] = (GLfloat) _tmp233_;
									_tmp234_ = _tmp228_[(((_tmp229_ + (_tmp230_ * (_tmp231_ + 1))) + _tmp232_) * 3) + 1];
								}
							}
							_tmp236_ = pz;
							_tmp237_ = pfarray;
							_tmp237__length1 = pfarray_length1;
							_tmp238_ = _tmp237_[2];
							if (_tmp236_ != ((gfloat) _tmp238_)) {
								gint _tmp239_;
								_tmp239_ = axis1;
								_tmp235_ = _tmp239_ == 2;
							} else {
								_tmp235_ = FALSE;
							}
							_tmp240_ = _tmp235_;
							if (_tmp240_) {
								GLfloat* _tmp241_;
								gint _tmp241__length1;
								gint _tmp242_;
								gint _tmp243_;
								gint _tmp244_;
								gint _tmp245_;
								gfloat _tmp246_;
								gint _tmp247_;
								gint _tmp248_;
								GLfloat _tmp249_;
								_tmp241_ = position;
								_tmp241__length1 = position_length1;
								_tmp242_ = voffset;
								_tmp243_ = i;
								_tmp244_ = sub;
								_tmp245_ = j;
								_tmp246_ = pz;
								_tmp247_ = j;
								_tmp248_ = sub;
								_tmp241_[(((_tmp242_ + (_tmp243_ * (_tmp244_ + 1))) + _tmp245_) * 3) + 2] = (GLfloat) ((_tmp246_ * (-((((gfloat) _tmp247_) / _tmp248_) - 0.5f))) * 2);
								_tmp249_ = _tmp241_[(((_tmp242_ + (_tmp243_ * (_tmp244_ + 1))) + _tmp245_) * 3) + 2];
							} else {
								gboolean _tmp250_ = FALSE;
								gfloat _tmp251_;
								GLfloat* _tmp252_;
								gint _tmp252__length1;
								GLfloat _tmp253_;
								gboolean _tmp255_;
								_tmp251_ = pz;
								_tmp252_ = pfarray;
								_tmp252__length1 = pfarray_length1;
								_tmp253_ = _tmp252_[2];
								if (_tmp251_ != ((gfloat) _tmp253_)) {
									gint _tmp254_;
									_tmp254_ = axis2;
									_tmp250_ = _tmp254_ == 2;
								} else {
									_tmp250_ = FALSE;
								}
								_tmp255_ = _tmp250_;
								if (_tmp255_) {
									GLfloat* _tmp256_;
									gint _tmp256__length1;
									gint _tmp257_;
									gint _tmp258_;
									gint _tmp259_;
									gint _tmp260_;
									gfloat _tmp261_;
									gint _tmp262_;
									gint _tmp263_;
									GLfloat _tmp264_;
									_tmp256_ = position;
									_tmp256__length1 = position_length1;
									_tmp257_ = voffset;
									_tmp258_ = i;
									_tmp259_ = sub;
									_tmp260_ = j;
									_tmp261_ = pz;
									_tmp262_ = i;
									_tmp263_ = sub;
									_tmp256_[(((_tmp257_ + (_tmp258_ * (_tmp259_ + 1))) + _tmp260_) * 3) + 2] = (GLfloat) ((_tmp261_ * (-((((gfloat) _tmp262_) / _tmp263_) - 0.5f))) * 2);
									_tmp264_ = _tmp256_[(((_tmp257_ + (_tmp258_ * (_tmp259_ + 1))) + _tmp260_) * 3) + 2];
								} else {
									GLfloat* _tmp265_;
									gint _tmp265__length1;
									gint _tmp266_;
									gint _tmp267_;
									gint _tmp268_;
									gint _tmp269_;
									gfloat _tmp270_;
									GLfloat _tmp271_;
									_tmp265_ = position;
									_tmp265__length1 = position_length1;
									_tmp266_ = voffset;
									_tmp267_ = i;
									_tmp268_ = sub;
									_tmp269_ = j;
									_tmp270_ = pz;
									_tmp265_[(((_tmp266_ + (_tmp267_ * (_tmp268_ + 1))) + _tmp269_) * 3) + 2] = (GLfloat) _tmp270_;
									_tmp271_ = _tmp265_[(((_tmp266_ + (_tmp267_ * (_tmp268_ + 1))) + _tmp269_) * 3) + 2];
								}
							}
							_tmp272_ = texcoord;
							_tmp272__length1 = texcoord_length1;
							_tmp273_ = voffset;
							_tmp274_ = i;
							_tmp275_ = sub;
							_tmp276_ = j;
							_tmp277_ = tx;
							_tmp278_ = j;
							_tmp279_ = sub;
							_tmp272_[((_tmp273_ + (_tmp274_ * (_tmp275_ + 1))) + _tmp276_) * 2] = (GLfloat) (_tmp277_ + (((0.25f * _tmp278_) / _tmp279_) - 0.125f));
							_tmp280_ = _tmp272_[((_tmp273_ + (_tmp274_ * (_tmp275_ + 1))) + _tmp276_) * 2];
							_tmp281_ = texcoord;
							_tmp281__length1 = texcoord_length1;
							_tmp282_ = voffset;
							_tmp283_ = i;
							_tmp284_ = sub;
							_tmp285_ = j;
							_tmp286_ = ty;
							_tmp287_ = i;
							_tmp288_ = sub;
							_tmp281_[(((_tmp282_ + (_tmp283_ * (_tmp284_ + 1))) + _tmp285_) * 2) + 1] = (GLfloat) (_tmp286_ + (((0.25f * _tmp287_) / _tmp288_) - 0.125f));
							_tmp289_ = _tmp281_[(((_tmp282_ + (_tmp283_ * (_tmp284_ + 1))) + _tmp285_) * 2) + 1];
						}
					}
				}
			}
		}
	}
	{
		gint i;
		i = 0;
		{
			gboolean _tmp290_;
			_tmp290_ = TRUE;
			while (TRUE) {
				gboolean _tmp291_;
				gint _tmp293_;
				_tmp291_ = _tmp290_;
				if (!_tmp291_) {
					gint _tmp292_;
					_tmp292_ = i;
					i = _tmp292_ + 1;
				}
				_tmp290_ = FALSE;
				_tmp293_ = sub;
				if (!(i <= (_tmp293_ - 1))) {
					break;
				}
				{
					gint j;
					j = 0;
					{
						gboolean _tmp294_;
						_tmp294_ = TRUE;
						while (TRUE) {
							gboolean _tmp295_;
							gint _tmp297_;
							gboolean _tmp298_ = FALSE;
							gfloat _tmp299_;
							GLfloat* _tmp300_;
							gint _tmp300__length1;
							GLfloat _tmp301_;
							gboolean _tmp303_;
							gboolean _tmp341_ = FALSE;
							gfloat _tmp342_;
							GLfloat* _tmp343_;
							gint _tmp343__length1;
							GLfloat _tmp344_;
							gboolean _tmp346_;
							gboolean _tmp384_ = FALSE;
							gfloat _tmp385_;
							GLfloat* _tmp386_;
							gint _tmp386__length1;
							GLfloat _tmp387_;
							gboolean _tmp389_;
							GLfloat* _tmp427_;
							gint _tmp427__length1;
							gint _tmp428_;
							gint _tmp429_;
							gint _tmp430_;
							gint _tmp431_;
							gint _tmp432_;
							gint _tmp433_;
							gfloat _tmp434_;
							gint _tmp435_;
							gint _tmp436_;
							GLfloat _tmp437_;
							GLfloat* _tmp438_;
							gint _tmp438__length1;
							gint _tmp439_;
							gint _tmp440_;
							gint _tmp441_;
							gint _tmp442_;
							gint _tmp443_;
							gint _tmp444_;
							gfloat _tmp445_;
							gint _tmp446_;
							gint _tmp447_;
							GLfloat _tmp448_;
							_tmp295_ = _tmp294_;
							if (!_tmp295_) {
								gint _tmp296_;
								_tmp296_ = j;
								j = _tmp296_ + 1;
							}
							_tmp294_ = FALSE;
							_tmp297_ = sub;
							if (!(j <= (_tmp297_ - 1))) {
								break;
							}
							_tmp299_ = px;
							_tmp300_ = pfarray;
							_tmp300__length1 = pfarray_length1;
							_tmp301_ = _tmp300_[0];
							if (_tmp299_ != ((gfloat) _tmp301_)) {
								gint _tmp302_;
								_tmp302_ = axis1;
								_tmp298_ = _tmp302_ == 0;
							} else {
								_tmp298_ = FALSE;
							}
							_tmp303_ = _tmp298_;
							if (_tmp303_) {
								GLfloat* _tmp304_;
								gint _tmp304__length1;
								gint _tmp305_;
								gint _tmp306_;
								gint _tmp307_;
								gint _tmp308_;
								gint _tmp309_;
								gint _tmp310_;
								gfloat _tmp311_;
								gint _tmp312_;
								gint _tmp313_;
								GLfloat _tmp314_;
								_tmp304_ = position;
								_tmp304__length1 = position_length1;
								_tmp305_ = voffset;
								_tmp306_ = sub;
								_tmp307_ = sub;
								_tmp308_ = i;
								_tmp309_ = sub;
								_tmp310_ = j;
								_tmp311_ = px;
								_tmp312_ = j;
								_tmp313_ = sub;
								_tmp304_[(((_tmp305_ + ((_tmp306_ + 1) * (_tmp307_ + 1))) + (_tmp308_ * _tmp309_)) + _tmp310_) * 3] = (GLfloat) ((_tmp311_ * (-(((_tmp312_ + 0.5f) / _tmp313_) - 0.5f))) * 2);
								_tmp314_ = _tmp304_[(((_tmp305_ + ((_tmp306_ + 1) * (_tmp307_ + 1))) + (_tmp308_ * _tmp309_)) + _tmp310_) * 3];
							} else {
								gboolean _tmp315_ = FALSE;
								gfloat _tmp316_;
								GLfloat* _tmp317_;
								gint _tmp317__length1;
								GLfloat _tmp318_;
								gboolean _tmp320_;
								_tmp316_ = px;
								_tmp317_ = pfarray;
								_tmp317__length1 = pfarray_length1;
								_tmp318_ = _tmp317_[0];
								if (_tmp316_ != ((gfloat) _tmp318_)) {
									gint _tmp319_;
									_tmp319_ = axis2;
									_tmp315_ = _tmp319_ == 0;
								} else {
									_tmp315_ = FALSE;
								}
								_tmp320_ = _tmp315_;
								if (_tmp320_) {
									GLfloat* _tmp321_;
									gint _tmp321__length1;
									gint _tmp322_;
									gint _tmp323_;
									gint _tmp324_;
									gint _tmp325_;
									gint _tmp326_;
									gint _tmp327_;
									gfloat _tmp328_;
									gint _tmp329_;
									gint _tmp330_;
									GLfloat _tmp331_;
									_tmp321_ = position;
									_tmp321__length1 = position_length1;
									_tmp322_ = voffset;
									_tmp323_ = sub;
									_tmp324_ = sub;
									_tmp325_ = i;
									_tmp326_ = sub;
									_tmp327_ = j;
									_tmp328_ = px;
									_tmp329_ = i;
									_tmp330_ = sub;
									_tmp321_[(((_tmp322_ + ((_tmp323_ + 1) * (_tmp324_ + 1))) + (_tmp325_ * _tmp326_)) + _tmp327_) * 3] = (GLfloat) ((_tmp328_ * (-(((_tmp329_ + 0.5f) / _tmp330_) - 0.5f))) * 2);
									_tmp331_ = _tmp321_[(((_tmp322_ + ((_tmp323_ + 1) * (_tmp324_ + 1))) + (_tmp325_ * _tmp326_)) + _tmp327_) * 3];
								} else {
									GLfloat* _tmp332_;
									gint _tmp332__length1;
									gint _tmp333_;
									gint _tmp334_;
									gint _tmp335_;
									gint _tmp336_;
									gint _tmp337_;
									gint _tmp338_;
									gfloat _tmp339_;
									GLfloat _tmp340_;
									_tmp332_ = position;
									_tmp332__length1 = position_length1;
									_tmp333_ = voffset;
									_tmp334_ = sub;
									_tmp335_ = sub;
									_tmp336_ = i;
									_tmp337_ = sub;
									_tmp338_ = j;
									_tmp339_ = px;
									_tmp332_[(((_tmp333_ + ((_tmp334_ + 1) * (_tmp335_ + 1))) + (_tmp336_ * _tmp337_)) + _tmp338_) * 3] = (GLfloat) _tmp339_;
									_tmp340_ = _tmp332_[(((_tmp333_ + ((_tmp334_ + 1) * (_tmp335_ + 1))) + (_tmp336_ * _tmp337_)) + _tmp338_) * 3];
								}
							}
							_tmp342_ = py;
							_tmp343_ = pfarray;
							_tmp343__length1 = pfarray_length1;
							_tmp344_ = _tmp343_[1];
							if (_tmp342_ != ((gfloat) _tmp344_)) {
								gint _tmp345_;
								_tmp345_ = axis1;
								_tmp341_ = _tmp345_ == 1;
							} else {
								_tmp341_ = FALSE;
							}
							_tmp346_ = _tmp341_;
							if (_tmp346_) {
								GLfloat* _tmp347_;
								gint _tmp347__length1;
								gint _tmp348_;
								gint _tmp349_;
								gint _tmp350_;
								gint _tmp351_;
								gint _tmp352_;
								gint _tmp353_;
								gfloat _tmp354_;
								gint _tmp355_;
								gint _tmp356_;
								GLfloat _tmp357_;
								_tmp347_ = position;
								_tmp347__length1 = position_length1;
								_tmp348_ = voffset;
								_tmp349_ = sub;
								_tmp350_ = sub;
								_tmp351_ = i;
								_tmp352_ = sub;
								_tmp353_ = j;
								_tmp354_ = py;
								_tmp355_ = j;
								_tmp356_ = sub;
								_tmp347_[((((_tmp348_ + ((_tmp349_ + 1) * (_tmp350_ + 1))) + (_tmp351_ * _tmp352_)) + _tmp353_) * 3) + 1] = (GLfloat) ((_tmp354_ * (-(((_tmp355_ + 0.5f) / _tmp356_) - 0.5f))) * 2);
								_tmp357_ = _tmp347_[((((_tmp348_ + ((_tmp349_ + 1) * (_tmp350_ + 1))) + (_tmp351_ * _tmp352_)) + _tmp353_) * 3) + 1];
							} else {
								gboolean _tmp358_ = FALSE;
								gfloat _tmp359_;
								GLfloat* _tmp360_;
								gint _tmp360__length1;
								GLfloat _tmp361_;
								gboolean _tmp363_;
								_tmp359_ = py;
								_tmp360_ = pfarray;
								_tmp360__length1 = pfarray_length1;
								_tmp361_ = _tmp360_[1];
								if (_tmp359_ != ((gfloat) _tmp361_)) {
									gint _tmp362_;
									_tmp362_ = axis2;
									_tmp358_ = _tmp362_ == 1;
								} else {
									_tmp358_ = FALSE;
								}
								_tmp363_ = _tmp358_;
								if (_tmp363_) {
									GLfloat* _tmp364_;
									gint _tmp364__length1;
									gint _tmp365_;
									gint _tmp366_;
									gint _tmp367_;
									gint _tmp368_;
									gint _tmp369_;
									gint _tmp370_;
									gfloat _tmp371_;
									gint _tmp372_;
									gint _tmp373_;
									GLfloat _tmp374_;
									_tmp364_ = position;
									_tmp364__length1 = position_length1;
									_tmp365_ = voffset;
									_tmp366_ = sub;
									_tmp367_ = sub;
									_tmp368_ = i;
									_tmp369_ = sub;
									_tmp370_ = j;
									_tmp371_ = py;
									_tmp372_ = i;
									_tmp373_ = sub;
									_tmp364_[((((_tmp365_ + ((_tmp366_ + 1) * (_tmp367_ + 1))) + (_tmp368_ * _tmp369_)) + _tmp370_) * 3) + 1] = (GLfloat) ((_tmp371_ * (-(((_tmp372_ + 0.5f) / _tmp373_) - 0.5f))) * 2);
									_tmp374_ = _tmp364_[((((_tmp365_ + ((_tmp366_ + 1) * (_tmp367_ + 1))) + (_tmp368_ * _tmp369_)) + _tmp370_) * 3) + 1];
								} else {
									GLfloat* _tmp375_;
									gint _tmp375__length1;
									gint _tmp376_;
									gint _tmp377_;
									gint _tmp378_;
									gint _tmp379_;
									gint _tmp380_;
									gint _tmp381_;
									gfloat _tmp382_;
									GLfloat _tmp383_;
									_tmp375_ = position;
									_tmp375__length1 = position_length1;
									_tmp376_ = voffset;
									_tmp377_ = sub;
									_tmp378_ = sub;
									_tmp379_ = i;
									_tmp380_ = sub;
									_tmp381_ = j;
									_tmp382_ = py;
									_tmp375_[((((_tmp376_ + ((_tmp377_ + 1) * (_tmp378_ + 1))) + (_tmp379_ * _tmp380_)) + _tmp381_) * 3) + 1] = (GLfloat) _tmp382_;
									_tmp383_ = _tmp375_[((((_tmp376_ + ((_tmp377_ + 1) * (_tmp378_ + 1))) + (_tmp379_ * _tmp380_)) + _tmp381_) * 3) + 1];
								}
							}
							_tmp385_ = pz;
							_tmp386_ = pfarray;
							_tmp386__length1 = pfarray_length1;
							_tmp387_ = _tmp386_[2];
							if (_tmp385_ != ((gfloat) _tmp387_)) {
								gint _tmp388_;
								_tmp388_ = axis1;
								_tmp384_ = _tmp388_ == 2;
							} else {
								_tmp384_ = FALSE;
							}
							_tmp389_ = _tmp384_;
							if (_tmp389_) {
								GLfloat* _tmp390_;
								gint _tmp390__length1;
								gint _tmp391_;
								gint _tmp392_;
								gint _tmp393_;
								gint _tmp394_;
								gint _tmp395_;
								gint _tmp396_;
								gfloat _tmp397_;
								gint _tmp398_;
								gint _tmp399_;
								GLfloat _tmp400_;
								_tmp390_ = position;
								_tmp390__length1 = position_length1;
								_tmp391_ = voffset;
								_tmp392_ = sub;
								_tmp393_ = sub;
								_tmp394_ = i;
								_tmp395_ = sub;
								_tmp396_ = j;
								_tmp397_ = pz;
								_tmp398_ = j;
								_tmp399_ = sub;
								_tmp390_[((((_tmp391_ + ((_tmp392_ + 1) * (_tmp393_ + 1))) + (_tmp394_ * _tmp395_)) + _tmp396_) * 3) + 2] = (GLfloat) ((_tmp397_ * (-(((_tmp398_ + 0.5f) / _tmp399_) - 0.5f))) * 2);
								_tmp400_ = _tmp390_[((((_tmp391_ + ((_tmp392_ + 1) * (_tmp393_ + 1))) + (_tmp394_ * _tmp395_)) + _tmp396_) * 3) + 2];
							} else {
								gboolean _tmp401_ = FALSE;
								gfloat _tmp402_;
								GLfloat* _tmp403_;
								gint _tmp403__length1;
								GLfloat _tmp404_;
								gboolean _tmp406_;
								_tmp402_ = pz;
								_tmp403_ = pfarray;
								_tmp403__length1 = pfarray_length1;
								_tmp404_ = _tmp403_[2];
								if (_tmp402_ != ((gfloat) _tmp404_)) {
									gint _tmp405_;
									_tmp405_ = axis2;
									_tmp401_ = _tmp405_ == 2;
								} else {
									_tmp401_ = FALSE;
								}
								_tmp406_ = _tmp401_;
								if (_tmp406_) {
									GLfloat* _tmp407_;
									gint _tmp407__length1;
									gint _tmp408_;
									gint _tmp409_;
									gint _tmp410_;
									gint _tmp411_;
									gint _tmp412_;
									gint _tmp413_;
									gfloat _tmp414_;
									gint _tmp415_;
									gint _tmp416_;
									GLfloat _tmp417_;
									_tmp407_ = position;
									_tmp407__length1 = position_length1;
									_tmp408_ = voffset;
									_tmp409_ = sub;
									_tmp410_ = sub;
									_tmp411_ = i;
									_tmp412_ = sub;
									_tmp413_ = j;
									_tmp414_ = pz;
									_tmp415_ = i;
									_tmp416_ = sub;
									_tmp407_[((((_tmp408_ + ((_tmp409_ + 1) * (_tmp410_ + 1))) + (_tmp411_ * _tmp412_)) + _tmp413_) * 3) + 2] = (GLfloat) ((_tmp414_ * (-(((_tmp415_ + 0.5f) / _tmp416_) - 0.5f))) * 2);
									_tmp417_ = _tmp407_[((((_tmp408_ + ((_tmp409_ + 1) * (_tmp410_ + 1))) + (_tmp411_ * _tmp412_)) + _tmp413_) * 3) + 2];
								} else {
									GLfloat* _tmp418_;
									gint _tmp418__length1;
									gint _tmp419_;
									gint _tmp420_;
									gint _tmp421_;
									gint _tmp422_;
									gint _tmp423_;
									gint _tmp424_;
									gfloat _tmp425_;
									GLfloat _tmp426_;
									_tmp418_ = position;
									_tmp418__length1 = position_length1;
									_tmp419_ = voffset;
									_tmp420_ = sub;
									_tmp421_ = sub;
									_tmp422_ = i;
									_tmp423_ = sub;
									_tmp424_ = j;
									_tmp425_ = pz;
									_tmp418_[((((_tmp419_ + ((_tmp420_ + 1) * (_tmp421_ + 1))) + (_tmp422_ * _tmp423_)) + _tmp424_) * 3) + 2] = (GLfloat) _tmp425_;
									_tmp426_ = _tmp418_[((((_tmp419_ + ((_tmp420_ + 1) * (_tmp421_ + 1))) + (_tmp422_ * _tmp423_)) + _tmp424_) * 3) + 2];
								}
							}
							_tmp427_ = texcoord;
							_tmp427__length1 = texcoord_length1;
							_tmp428_ = voffset;
							_tmp429_ = sub;
							_tmp430_ = sub;
							_tmp431_ = i;
							_tmp432_ = sub;
							_tmp433_ = j;
							_tmp434_ = tx;
							_tmp435_ = j;
							_tmp436_ = sub;
							_tmp427_[(((_tmp428_ + ((_tmp429_ + 1) * (_tmp430_ + 1))) + (_tmp431_ * _tmp432_)) + _tmp433_) * 2] = (GLfloat) (_tmp434_ + (((0.25f * (_tmp435_ + 0.5f)) / _tmp436_) - 0.125f));
							_tmp437_ = _tmp427_[(((_tmp428_ + ((_tmp429_ + 1) * (_tmp430_ + 1))) + (_tmp431_ * _tmp432_)) + _tmp433_) * 2];
							_tmp438_ = texcoord;
							_tmp438__length1 = texcoord_length1;
							_tmp439_ = voffset;
							_tmp440_ = sub;
							_tmp441_ = sub;
							_tmp442_ = i;
							_tmp443_ = sub;
							_tmp444_ = j;
							_tmp445_ = ty;
							_tmp446_ = i;
							_tmp447_ = sub;
							_tmp438_[((((_tmp439_ + ((_tmp440_ + 1) * (_tmp441_ + 1))) + (_tmp442_ * _tmp443_)) + _tmp444_) * 2) + 1] = (GLfloat) (_tmp445_ + (((0.25f * (_tmp446_ + 0.5f)) / _tmp447_) - 0.125f));
							_tmp448_ = _tmp438_[((((_tmp439_ + ((_tmp440_ + 1) * (_tmp441_ + 1))) + (_tmp442_ * _tmp443_)) + _tmp444_) * 2) + 1];
						}
					}
				}
			}
		}
	}
	{
		gint _tmp449_;
		gint i;
		_tmp449_ = voffset;
		i = _tmp449_;
		{
			gboolean _tmp450_;
			_tmp450_ = TRUE;
			while (TRUE) {
				gboolean _tmp451_;
				gint _tmp453_;
				gint _tmp454_;
				gint _tmp455_;
				gint _tmp456_;
				gint _tmp457_;
				GLfloat* _tmp458_;
				gint _tmp458__length1;
				gint _tmp459_;
				gfloat _tmp460_;
				gfloat _tmp461_;
				GLfloat _tmp462_;
				GLfloat* _tmp463_;
				gint _tmp463__length1;
				gint _tmp464_;
				gfloat _tmp465_;
				gfloat _tmp466_;
				GLfloat _tmp467_;
				GLfloat* _tmp468_;
				gint _tmp468__length1;
				gint _tmp469_;
				gfloat _tmp470_;
				gfloat _tmp471_;
				GLfloat _tmp472_;
				GLfloat* _tmp473_;
				gint _tmp473__length1;
				gint _tmp474_;
				GLfloat _tmp475_;
				GLfloat* _tmp476_;
				gint _tmp476__length1;
				gint _tmp477_;
				GLfloat _tmp478_;
				GLfloat* _tmp479_;
				gint _tmp479__length1;
				gint _tmp480_;
				GLfloat _tmp481_;
				GLfloat* _tmp482_;
				gint _tmp482__length1;
				gint _tmp483_;
				GLfloat _tmp484_;
				GLfloat* _tmp485_;
				gint _tmp485__length1;
				gint _tmp486_;
				GLfloat _tmp487_;
				GLfloat* _tmp488_;
				gint _tmp488__length1;
				gint _tmp489_;
				GLfloat _tmp490_;
				GLfloat* _tmp491_;
				gint _tmp491__length1;
				gint _tmp492_;
				GLfloat _tmp493_;
				GLfloat* _tmp494_;
				gint _tmp494__length1;
				gint _tmp495_;
				GLfloat _tmp496_;
				GLfloat* _tmp497_;
				gint _tmp497__length1;
				gint _tmp498_;
				GLfloat _tmp499_;
				gfloat _tmp500_ = 0.0F;
				GLfloat tempx;
				GLfloat* _tmp501_;
				gint _tmp501__length1;
				gint _tmp502_;
				GLfloat _tmp503_;
				GLfloat* _tmp504_;
				gint _tmp504__length1;
				gint _tmp505_;
				GLfloat _tmp506_;
				GLfloat* _tmp507_;
				gint _tmp507__length1;
				gint _tmp508_;
				GLfloat _tmp509_;
				GLfloat* _tmp510_;
				gint _tmp510__length1;
				gint _tmp511_;
				GLfloat _tmp512_;
				GLfloat* _tmp513_;
				gint _tmp513__length1;
				gint _tmp514_;
				GLfloat _tmp515_;
				GLfloat* _tmp516_;
				gint _tmp516__length1;
				gint _tmp517_;
				GLfloat _tmp518_;
				GLfloat* _tmp519_;
				gint _tmp519__length1;
				gint _tmp520_;
				GLfloat _tmp521_;
				GLfloat* _tmp522_;
				gint _tmp522__length1;
				gint _tmp523_;
				GLfloat _tmp524_;
				GLfloat* _tmp525_;
				gint _tmp525__length1;
				gint _tmp526_;
				GLfloat _tmp527_;
				gfloat _tmp528_ = 0.0F;
				GLfloat tempy;
				GLfloat* _tmp529_;
				gint _tmp529__length1;
				gint _tmp530_;
				GLfloat _tmp531_;
				GLfloat* _tmp532_;
				gint _tmp532__length1;
				gint _tmp533_;
				GLfloat _tmp534_;
				GLfloat* _tmp535_;
				gint _tmp535__length1;
				gint _tmp536_;
				GLfloat _tmp537_;
				GLfloat* _tmp538_;
				gint _tmp538__length1;
				gint _tmp539_;
				GLfloat _tmp540_;
				GLfloat* _tmp541_;
				gint _tmp541__length1;
				gint _tmp542_;
				GLfloat _tmp543_;
				GLfloat* _tmp544_;
				gint _tmp544__length1;
				gint _tmp545_;
				GLfloat _tmp546_;
				GLfloat* _tmp547_;
				gint _tmp547__length1;
				gint _tmp548_;
				GLfloat _tmp549_;
				GLfloat* _tmp550_;
				gint _tmp550__length1;
				gint _tmp551_;
				GLfloat _tmp552_;
				GLfloat* _tmp553_;
				gint _tmp553__length1;
				gint _tmp554_;
				GLfloat _tmp555_;
				gfloat _tmp556_ = 0.0F;
				GLfloat tempz;
				GLfloat* _tmp557_;
				gint _tmp557__length1;
				gint _tmp558_;
				GLfloat _tmp559_;
				gfloat _tmp560_;
				gfloat _tmp561_;
				GLfloat _tmp562_;
				GLfloat* _tmp563_;
				gint _tmp563__length1;
				gint _tmp564_;
				GLfloat _tmp565_;
				gfloat _tmp566_;
				gfloat _tmp567_;
				GLfloat _tmp568_;
				GLfloat* _tmp569_;
				gint _tmp569__length1;
				gint _tmp570_;
				GLfloat _tmp571_;
				gfloat _tmp572_;
				gfloat _tmp573_;
				GLfloat _tmp574_;
				GLfloat* _tmp575_;
				gint _tmp575__length1;
				gint _tmp576_;
				GLfloat _tmp577_;
				GLfloat _tmp578_;
				GLfloat* _tmp579_;
				gint _tmp579__length1;
				gint _tmp580_;
				GLfloat _tmp581_;
				GLfloat _tmp582_;
				GLfloat* _tmp583_;
				gint _tmp583__length1;
				gint _tmp584_;
				GLfloat _tmp585_;
				GLfloat _tmp586_;
				gint _tmp587_;
				GLfloat* _tmp658_;
				gint _tmp658__length1;
				gint _tmp659_;
				GLfloat _tmp660_;
				GLfloat* _tmp661_;
				gint _tmp661__length1;
				gint _tmp662_;
				GLfloat _tmp663_;
				GLfloat* _tmp664_;
				gint _tmp664__length1;
				gint _tmp665_;
				GLfloat _tmp666_;
				GLfloat* _tmp667_;
				gint _tmp667__length1;
				gint _tmp668_;
				GLfloat _tmp669_;
				GLfloat* _tmp670_;
				gint _tmp670__length1;
				gint _tmp671_;
				GLfloat _tmp672_;
				GLfloat* _tmp673_;
				gint _tmp673__length1;
				gint _tmp674_;
				GLfloat _tmp675_;
				gfloat _tmp676_ = 0.0F;
				gfloat magnitude;
				GLfloat* _tmp677_;
				gint _tmp677__length1;
				gint _tmp678_;
				GLfloat* _tmp679_;
				gint _tmp679__length1;
				gint _tmp680_;
				GLfloat _tmp681_;
				gfloat _tmp682_;
				GLfloat _tmp683_;
				GLfloat* _tmp684_;
				gint _tmp684__length1;
				gint _tmp685_;
				GLfloat* _tmp686_;
				gint _tmp686__length1;
				gint _tmp687_;
				GLfloat _tmp688_;
				gfloat _tmp689_;
				GLfloat _tmp690_;
				GLfloat* _tmp691_;
				gint _tmp691__length1;
				gint _tmp692_;
				GLfloat* _tmp693_;
				gint _tmp693__length1;
				gint _tmp694_;
				GLfloat _tmp695_;
				gfloat _tmp696_;
				GLfloat _tmp697_;
				_tmp451_ = _tmp450_;
				if (!_tmp451_) {
					gint _tmp452_;
					_tmp452_ = i;
					i = _tmp452_ + 1;
				}
				_tmp450_ = FALSE;
				_tmp453_ = voffset;
				_tmp454_ = sub;
				_tmp455_ = sub;
				_tmp456_ = sub;
				_tmp457_ = sub;
				if (!(i <= ((_tmp453_ + (((_tmp454_ + 1) * (_tmp455_ + 1)) + (_tmp456_ * _tmp457_))) - 1))) {
					break;
				}
				_tmp458_ = position;
				_tmp458__length1 = position_length1;
				_tmp459_ = i;
				_tmp460_ = soy_bodies_sphere_get_radius (self);
				_tmp461_ = _tmp460_;
				_tmp458_[_tmp459_ * 3] /= (GLfloat) _tmp461_;
				_tmp462_ = _tmp458_[_tmp459_ * 3];
				_tmp463_ = position;
				_tmp463__length1 = position_length1;
				_tmp464_ = i;
				_tmp465_ = soy_bodies_sphere_get_radius (self);
				_tmp466_ = _tmp465_;
				_tmp463_[(_tmp464_ * 3) + 1] /= (GLfloat) _tmp466_;
				_tmp467_ = _tmp463_[(_tmp464_ * 3) + 1];
				_tmp468_ = position;
				_tmp468__length1 = position_length1;
				_tmp469_ = i;
				_tmp470_ = soy_bodies_sphere_get_radius (self);
				_tmp471_ = _tmp470_;
				_tmp468_[(_tmp469_ * 3) + 2] /= (GLfloat) _tmp471_;
				_tmp472_ = _tmp468_[(_tmp469_ * 3) + 2];
				_tmp473_ = position;
				_tmp473__length1 = position_length1;
				_tmp474_ = i;
				_tmp475_ = _tmp473_[_tmp474_ * 3];
				_tmp476_ = position;
				_tmp476__length1 = position_length1;
				_tmp477_ = i;
				_tmp478_ = _tmp476_[(_tmp477_ * 3) + 1];
				_tmp479_ = position;
				_tmp479__length1 = position_length1;
				_tmp480_ = i;
				_tmp481_ = _tmp479_[(_tmp480_ * 3) + 1];
				_tmp482_ = position;
				_tmp482__length1 = position_length1;
				_tmp483_ = i;
				_tmp484_ = _tmp482_[(_tmp483_ * 3) + 2];
				_tmp485_ = position;
				_tmp485__length1 = position_length1;
				_tmp486_ = i;
				_tmp487_ = _tmp485_[(_tmp486_ * 3) + 2];
				_tmp488_ = position;
				_tmp488__length1 = position_length1;
				_tmp489_ = i;
				_tmp490_ = _tmp488_[(_tmp489_ * 3) + 1];
				_tmp491_ = position;
				_tmp491__length1 = position_length1;
				_tmp492_ = i;
				_tmp493_ = _tmp491_[(_tmp492_ * 3) + 1];
				_tmp494_ = position;
				_tmp494__length1 = position_length1;
				_tmp495_ = i;
				_tmp496_ = _tmp494_[(_tmp495_ * 3) + 2];
				_tmp497_ = position;
				_tmp497__length1 = position_length1;
				_tmp498_ = i;
				_tmp499_ = _tmp497_[(_tmp498_ * 3) + 2];
				_tmp500_ = sqrtf ((gfloat) (((1 - ((_tmp478_ * _tmp481_) / 2.0f)) - ((_tmp484_ * _tmp487_) / 2.0f)) + ((((_tmp490_ * _tmp493_) * _tmp496_) * _tmp499_) / 3.0f)));
				tempx = _tmp475_ * _tmp500_;
				_tmp501_ = position;
				_tmp501__length1 = position_length1;
				_tmp502_ = i;
				_tmp503_ = _tmp501_[(_tmp502_ * 3) + 1];
				_tmp504_ = position;
				_tmp504__length1 = position_length1;
				_tmp505_ = i;
				_tmp506_ = _tmp504_[_tmp505_ * 3];
				_tmp507_ = position;
				_tmp507__length1 = position_length1;
				_tmp508_ = i;
				_tmp509_ = _tmp507_[_tmp508_ * 3];
				_tmp510_ = position;
				_tmp510__length1 = position_length1;
				_tmp511_ = i;
				_tmp512_ = _tmp510_[(_tmp511_ * 3) + 2];
				_tmp513_ = position;
				_tmp513__length1 = position_length1;
				_tmp514_ = i;
				_tmp515_ = _tmp513_[(_tmp514_ * 3) + 2];
				_tmp516_ = position;
				_tmp516__length1 = position_length1;
				_tmp517_ = i;
				_tmp518_ = _tmp516_[_tmp517_ * 3];
				_tmp519_ = position;
				_tmp519__length1 = position_length1;
				_tmp520_ = i;
				_tmp521_ = _tmp519_[_tmp520_ * 3];
				_tmp522_ = position;
				_tmp522__length1 = position_length1;
				_tmp523_ = i;
				_tmp524_ = _tmp522_[(_tmp523_ * 3) + 2];
				_tmp525_ = position;
				_tmp525__length1 = position_length1;
				_tmp526_ = i;
				_tmp527_ = _tmp525_[(_tmp526_ * 3) + 2];
				_tmp528_ = sqrtf ((gfloat) (((1 - ((_tmp506_ * _tmp509_) / 2.0f)) - ((_tmp512_ * _tmp515_) / 2.0f)) + ((((_tmp518_ * _tmp521_) * _tmp524_) * _tmp527_) / 3.0f)));
				tempy = _tmp503_ * _tmp528_;
				_tmp529_ = position;
				_tmp529__length1 = position_length1;
				_tmp530_ = i;
				_tmp531_ = _tmp529_[(_tmp530_ * 3) + 2];
				_tmp532_ = position;
				_tmp532__length1 = position_length1;
				_tmp533_ = i;
				_tmp534_ = _tmp532_[_tmp533_ * 3];
				_tmp535_ = position;
				_tmp535__length1 = position_length1;
				_tmp536_ = i;
				_tmp537_ = _tmp535_[_tmp536_ * 3];
				_tmp538_ = position;
				_tmp538__length1 = position_length1;
				_tmp539_ = i;
				_tmp540_ = _tmp538_[(_tmp539_ * 3) + 1];
				_tmp541_ = position;
				_tmp541__length1 = position_length1;
				_tmp542_ = i;
				_tmp543_ = _tmp541_[(_tmp542_ * 3) + 1];
				_tmp544_ = position;
				_tmp544__length1 = position_length1;
				_tmp545_ = i;
				_tmp546_ = _tmp544_[_tmp545_ * 3];
				_tmp547_ = position;
				_tmp547__length1 = position_length1;
				_tmp548_ = i;
				_tmp549_ = _tmp547_[_tmp548_ * 3];
				_tmp550_ = position;
				_tmp550__length1 = position_length1;
				_tmp551_ = i;
				_tmp552_ = _tmp550_[(_tmp551_ * 3) + 1];
				_tmp553_ = position;
				_tmp553__length1 = position_length1;
				_tmp554_ = i;
				_tmp555_ = _tmp553_[(_tmp554_ * 3) + 1];
				_tmp556_ = sqrtf ((gfloat) (((1 - ((_tmp534_ * _tmp537_) / 2.0f)) - ((_tmp540_ * _tmp543_) / 2.0f)) + ((((_tmp546_ * _tmp549_) * _tmp552_) * _tmp555_) / 3.0f)));
				tempz = _tmp531_ * _tmp556_;
				_tmp557_ = position;
				_tmp557__length1 = position_length1;
				_tmp558_ = i;
				_tmp559_ = tempx;
				_tmp560_ = soy_bodies_sphere_get_radius (self);
				_tmp561_ = _tmp560_;
				_tmp557_[_tmp558_ * 3] = _tmp559_ * _tmp561_;
				_tmp562_ = _tmp557_[_tmp558_ * 3];
				_tmp563_ = position;
				_tmp563__length1 = position_length1;
				_tmp564_ = i;
				_tmp565_ = tempy;
				_tmp566_ = soy_bodies_sphere_get_radius (self);
				_tmp567_ = _tmp566_;
				_tmp563_[(_tmp564_ * 3) + 1] = _tmp565_ * _tmp567_;
				_tmp568_ = _tmp563_[(_tmp564_ * 3) + 1];
				_tmp569_ = position;
				_tmp569__length1 = position_length1;
				_tmp570_ = i;
				_tmp571_ = tempz;
				_tmp572_ = soy_bodies_sphere_get_radius (self);
				_tmp573_ = _tmp572_;
				_tmp569_[(_tmp570_ * 3) + 2] = _tmp571_ * _tmp573_;
				_tmp574_ = _tmp569_[(_tmp570_ * 3) + 2];
				_tmp575_ = normal;
				_tmp575__length1 = normal_length1;
				_tmp576_ = i;
				_tmp577_ = tempx;
				_tmp575_[_tmp576_ * 3] = _tmp577_;
				_tmp578_ = _tmp575_[_tmp576_ * 3];
				_tmp579_ = normal;
				_tmp579__length1 = normal_length1;
				_tmp580_ = i;
				_tmp581_ = tempy;
				_tmp579_[(_tmp580_ * 3) + 1] = _tmp581_;
				_tmp582_ = _tmp579_[(_tmp580_ * 3) + 1];
				_tmp583_ = normal;
				_tmp583__length1 = normal_length1;
				_tmp584_ = i;
				_tmp585_ = tempz;
				_tmp583_[(_tmp584_ * 3) + 2] = _tmp585_;
				_tmp586_ = _tmp583_[(_tmp584_ * 3) + 2];
				_tmp587_ = axis3;
				if (_tmp587_ == 1) {
					GLfloat _tmp588_;
					_tmp588_ = tempz;
					if (_tmp588_ != ((GLfloat) 0)) {
						GLfloat _tmp589_;
						GLfloat _tmp590_;
						GLfloat _tmp591_;
						gfloat _tmp592_ = 0.0F;
						GLfloat _tmp593_;
						gfloat _tmp594_ = 0.0F;
						GLfloat sign;
						GLfloat* _tmp595_;
						gint _tmp595__length1;
						gint _tmp596_;
						GLfloat _tmp597_;
						GLfloat _tmp598_;
						GLfloat _tmp599_;
						GLfloat* _tmp600_;
						gint _tmp600__length1;
						gint _tmp601_;
						GLfloat _tmp602_;
						GLfloat _tmp603_;
						GLfloat _tmp604_;
						GLfloat* _tmp605_;
						gint _tmp605__length1;
						gint _tmp606_;
						GLfloat _tmp607_;
						GLfloat _tmp608_;
						GLfloat _tmp609_;
						GLfloat _tmp610_;
						GLfloat _tmp611_;
						GLfloat _tmp612_;
						GLfloat _tmp613_;
						_tmp589_ = tempy;
						_tmp590_ = tempz;
						_tmp591_ = tempy;
						_tmp592_ = fabsf ((gfloat) _tmp591_);
						_tmp593_ = tempz;
						_tmp594_ = fabsf ((gfloat) _tmp593_);
						sign = (_tmp589_ * _tmp590_) / (_tmp592_ * _tmp594_);
						_tmp595_ = tangent;
						_tmp595__length1 = tangent_length1;
						_tmp596_ = i;
						_tmp597_ = sign;
						_tmp598_ = tempx;
						_tmp595_[_tmp596_ * 3] = (-_tmp597_) * _tmp598_;
						_tmp599_ = _tmp595_[_tmp596_ * 3];
						_tmp600_ = tangent;
						_tmp600__length1 = tangent_length1;
						_tmp601_ = i;
						_tmp602_ = sign;
						_tmp603_ = tempy;
						_tmp600_[(_tmp601_ * 3) + 1] = (-_tmp602_) * _tmp603_;
						_tmp604_ = _tmp600_[(_tmp601_ * 3) + 1];
						_tmp605_ = tangent;
						_tmp605__length1 = tangent_length1;
						_tmp606_ = i;
						_tmp607_ = sign;
						_tmp608_ = tempx;
						_tmp609_ = tempx;
						_tmp610_ = tempy;
						_tmp611_ = tempy;
						_tmp612_ = tempz;
						_tmp605_[(_tmp606_ * 3) + 2] = (_tmp607_ * ((_tmp608_ * _tmp609_) + (_tmp610_ * _tmp611_))) / _tmp612_;
						_tmp613_ = _tmp605_[(_tmp606_ * 3) + 2];
					} else {
						GLfloat* _tmp614_;
						gint _tmp614__length1;
						gint _tmp615_;
						GLfloat _tmp616_;
						GLfloat* _tmp617_;
						gint _tmp617__length1;
						gint _tmp618_;
						GLfloat _tmp619_;
						GLfloat* _tmp620_;
						gint _tmp620__length1;
						gint _tmp621_;
						GLfloat _tmp622_;
						GLfloat _tmp623_;
						gfloat _tmp624_ = 0.0F;
						GLfloat _tmp625_;
						_tmp614_ = tangent;
						_tmp614__length1 = tangent_length1;
						_tmp615_ = i;
						_tmp614_[_tmp615_ * 3] = (GLfloat) 0;
						_tmp616_ = _tmp614_[_tmp615_ * 3];
						_tmp617_ = tangent;
						_tmp617__length1 = tangent_length1;
						_tmp618_ = i;
						_tmp617_[(_tmp618_ * 3) + 1] = (GLfloat) 0;
						_tmp619_ = _tmp617_[(_tmp618_ * 3) + 1];
						_tmp620_ = tangent;
						_tmp620__length1 = tangent_length1;
						_tmp621_ = i;
						_tmp622_ = tempy;
						_tmp623_ = tempy;
						_tmp624_ = fabsf ((gfloat) _tmp623_);
						_tmp620_[(_tmp621_ * 3) + 2] = _tmp622_ / _tmp624_;
						_tmp625_ = _tmp620_[(_tmp621_ * 3) + 2];
					}
				} else {
					GLfloat _tmp626_;
					_tmp626_ = tempy;
					if (_tmp626_ != ((GLfloat) 0)) {
						GLfloat _tmp627_;
						GLfloat _tmp628_;
						gfloat _tmp629_ = 0.0F;
						GLfloat sign;
						GLfloat* _tmp630_;
						gint _tmp630__length1;
						gint _tmp631_;
						GLfloat _tmp632_;
						GLfloat _tmp633_;
						GLfloat _tmp634_;
						GLfloat* _tmp635_;
						gint _tmp635__length1;
						gint _tmp636_;
						GLfloat _tmp637_;
						GLfloat _tmp638_;
						GLfloat _tmp639_;
						GLfloat _tmp640_;
						GLfloat _tmp641_;
						GLfloat _tmp642_;
						GLfloat _tmp643_;
						GLfloat* _tmp644_;
						gint _tmp644__length1;
						gint _tmp645_;
						GLfloat _tmp646_;
						GLfloat _tmp647_;
						GLfloat _tmp648_;
						_tmp627_ = tempy;
						_tmp628_ = tempy;
						_tmp629_ = fabsf ((gfloat) _tmp628_);
						sign = _tmp627_ / _tmp629_;
						_tmp630_ = tangent;
						_tmp630__length1 = tangent_length1;
						_tmp631_ = i;
						_tmp632_ = sign;
						_tmp633_ = tempx;
						_tmp630_[_tmp631_ * 3] = (-_tmp632_) * _tmp633_;
						_tmp634_ = _tmp630_[_tmp631_ * 3];
						_tmp635_ = tangent;
						_tmp635__length1 = tangent_length1;
						_tmp636_ = i;
						_tmp637_ = sign;
						_tmp638_ = tempx;
						_tmp639_ = tempx;
						_tmp640_ = tempz;
						_tmp641_ = tempz;
						_tmp642_ = tempy;
						_tmp635_[(_tmp636_ * 3) + 1] = _tmp637_ * (((_tmp638_ * _tmp639_) + (_tmp640_ * _tmp641_)) / _tmp642_);
						_tmp643_ = _tmp635_[(_tmp636_ * 3) + 1];
						_tmp644_ = tangent;
						_tmp644__length1 = tangent_length1;
						_tmp645_ = i;
						_tmp646_ = sign;
						_tmp647_ = tempz;
						_tmp644_[(_tmp645_ * 3) + 2] = (-_tmp646_) * _tmp647_;
						_tmp648_ = _tmp644_[(_tmp645_ * 3) + 2];
					} else {
						GLfloat* _tmp649_;
						gint _tmp649__length1;
						gint _tmp650_;
						GLfloat _tmp651_;
						GLfloat* _tmp652_;
						gint _tmp652__length1;
						gint _tmp653_;
						GLfloat _tmp654_;
						GLfloat* _tmp655_;
						gint _tmp655__length1;
						gint _tmp656_;
						GLfloat _tmp657_;
						_tmp649_ = tangent;
						_tmp649__length1 = tangent_length1;
						_tmp650_ = i;
						_tmp649_[_tmp650_ * 3] = (GLfloat) 0;
						_tmp651_ = _tmp649_[_tmp650_ * 3];
						_tmp652_ = tangent;
						_tmp652__length1 = tangent_length1;
						_tmp653_ = i;
						_tmp652_[(_tmp653_ * 3) + 1] = (GLfloat) 1;
						_tmp654_ = _tmp652_[(_tmp653_ * 3) + 1];
						_tmp655_ = tangent;
						_tmp655__length1 = tangent_length1;
						_tmp656_ = i;
						_tmp655_[(_tmp656_ * 3) + 2] = (GLfloat) 0;
						_tmp657_ = _tmp655_[(_tmp656_ * 3) + 2];
					}
				}
				_tmp658_ = tangent;
				_tmp658__length1 = tangent_length1;
				_tmp659_ = i;
				_tmp660_ = _tmp658_[_tmp659_ * 3];
				_tmp661_ = tangent;
				_tmp661__length1 = tangent_length1;
				_tmp662_ = i;
				_tmp663_ = _tmp661_[_tmp662_ * 3];
				_tmp664_ = tangent;
				_tmp664__length1 = tangent_length1;
				_tmp665_ = i;
				_tmp666_ = _tmp664_[(_tmp665_ * 3) + 1];
				_tmp667_ = tangent;
				_tmp667__length1 = tangent_length1;
				_tmp668_ = i;
				_tmp669_ = _tmp667_[(_tmp668_ * 3) + 1];
				_tmp670_ = tangent;
				_tmp670__length1 = tangent_length1;
				_tmp671_ = i;
				_tmp672_ = _tmp670_[(_tmp671_ * 3) + 2];
				_tmp673_ = tangent;
				_tmp673__length1 = tangent_length1;
				_tmp674_ = i;
				_tmp675_ = _tmp673_[(_tmp674_ * 3) + 2];
				_tmp676_ = sqrtf ((gfloat) (((_tmp660_ * _tmp663_) + (_tmp666_ * _tmp669_)) + (_tmp672_ * _tmp675_)));
				magnitude = _tmp676_;
				_tmp677_ = tangent;
				_tmp677__length1 = tangent_length1;
				_tmp678_ = i;
				_tmp679_ = tangent;
				_tmp679__length1 = tangent_length1;
				_tmp680_ = i;
				_tmp681_ = _tmp679_[_tmp680_ * 3];
				_tmp682_ = magnitude;
				_tmp677_[_tmp678_ * 3] = _tmp681_ / _tmp682_;
				_tmp683_ = _tmp677_[_tmp678_ * 3];
				_tmp684_ = tangent;
				_tmp684__length1 = tangent_length1;
				_tmp685_ = i;
				_tmp686_ = tangent;
				_tmp686__length1 = tangent_length1;
				_tmp687_ = i;
				_tmp688_ = _tmp686_[(_tmp687_ * 3) + 1];
				_tmp689_ = magnitude;
				_tmp684_[(_tmp685_ * 3) + 1] = _tmp688_ / _tmp689_;
				_tmp690_ = _tmp684_[(_tmp685_ * 3) + 1];
				_tmp691_ = tangent;
				_tmp691__length1 = tangent_length1;
				_tmp692_ = i;
				_tmp693_ = tangent;
				_tmp693__length1 = tangent_length1;
				_tmp694_ = i;
				_tmp695_ = _tmp693_[(_tmp694_ * 3) + 2];
				_tmp696_ = magnitude;
				_tmp691_[(_tmp692_ * 3) + 2] = _tmp695_ / _tmp696_;
				_tmp697_ = _tmp691_[(_tmp692_ * 3) + 2];
			}
		}
	}
	pfarray = (g_free (pfarray), NULL);
}


soymaterialsMaterial* soy_bodies_sphere_get_material (soybodiesSphere* self) {
	soymaterialsMaterial* result;
	soymaterialsMaterial* _tmp0_;
	soymaterialsMaterial* _tmp1_;
	soymaterialsMaterial* _tmp2_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_material;
	_tmp1_ = soy_default_material;
	if (_tmp0_ == _tmp1_) {
		result = NULL;
		return result;
	}
	_tmp2_ = self->priv->_material;
	result = _tmp2_;
	return result;
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


void soy_bodies_sphere_set_material (soybodiesSphere* self, soymaterialsMaterial* value) {
	soymaterialsMaterial* _tmp0_;
	g_return_if_fail (self != NULL);
	g_mutex_lock (&((soybodiesBody*) self)->mutex);
	_tmp0_ = value;
	if (_tmp0_ == NULL) {
		soymaterialsMaterial* _tmp1_;
		soymaterialsMaterial* _tmp3_;
		soymaterialsMaterial* _tmp4_;
		_tmp1_ = soy_default_material;
		if (_tmp1_ == NULL) {
			soymaterialsMaterial* _tmp2_;
			_tmp2_ = soy_materials_material_new ();
			_g_object_unref0 (soy_default_material);
			soy_default_material = _tmp2_;
		}
		_tmp3_ = soy_default_material;
		_tmp4_ = _g_object_ref0 (_tmp3_);
		_g_object_unref0 (self->priv->_material);
		self->priv->_material = _tmp4_;
	} else {
		soymaterialsMaterial* _tmp5_;
		soymaterialsMaterial* _tmp6_;
		_tmp5_ = value;
		_tmp6_ = _g_object_ref0 (_tmp5_);
		_g_object_unref0 (self->priv->_material);
		self->priv->_material = _tmp6_;
	}
	g_mutex_unlock (&((soybodiesBody*) self)->mutex);
	g_object_notify ((GObject *) self, "material");
}


gfloat soy_bodies_sphere_get_radius (soybodiesSphere* self) {
	gfloat result;
	GLfloat _tmp0_;
	g_return_val_if_fail (self != NULL, 0.0F);
	_tmp0_ = self->priv->_radius;
	result = (gfloat) _tmp0_;
	return result;
}


void soy_bodies_sphere_set_radius (soybodiesSphere* self, gfloat value) {
	soyscenesScene* _tmp0_;
	gfloat _tmp1_;
	struct dxGeom* _tmp2_;
	gfloat _tmp3_;
	soyscenesScene* _tmp4_;
	gfloat _tmp5_;
	gfloat _tmp6_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((soybodiesBody*) self)->scene;
	if (_tmp0_ != NULL) {
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
	}
	_tmp1_ = value;
	self->priv->_radius = (GLfloat) _tmp1_;
	_tmp2_ = ((soybodiesBody*) self)->geom;
	_tmp3_ = value;
	dGeomSphereSetRadius ((struct dxGeom*) _tmp2_, (dReal) _tmp3_);
	_tmp4_ = ((soybodiesBody*) self)->scene;
	if (_tmp4_ != NULL) {
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
	_tmp5_ = soy_bodies_body_get_density ((soybodiesBody*) self);
	_tmp6_ = _tmp5_;
	soy_bodies_body_set_mass ((soybodiesBody*) self, _tmp6_);
	self->priv->_updated = TRUE;
	g_object_notify ((GObject *) self, "radius");
}


static gfloat soy_bodies_sphere_real_get_col_radius (soybodiesBody* base) {
	gfloat result;
	soybodiesSphere* self;
	GLfloat _tmp0_;
	self = (soybodiesSphere*) base;
	_tmp0_ = self->priv->_radius;
	result = (gfloat) _tmp0_;
	return result;
}


static void soy_bodies_sphere_class_init (soybodiesSphereClass * klass) {
	soy_bodies_sphere_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (soybodiesSpherePrivate));
	SOY_BODIES_BODY_CLASS (klass)->create_geom = soy_bodies_sphere_real_create_geom;
	SOY_BODIES_BODY_CLASS (klass)->set_mass = soy_bodies_sphere_real_set_mass;
	SOY_BODIES_BODY_CLASS (klass)->volume = soy_bodies_sphere_real_volume;
	SOY_BODIES_BODY_CLASS (klass)->render = soy_bodies_sphere_real_render;
	SOY_BODIES_BODY_CLASS (klass)->get_col_radius = soy_bodies_sphere_real_get_col_radius;
	G_OBJECT_CLASS (klass)->get_property = _vala_soy_bodies_sphere_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_soy_bodies_sphere_set_property;
	G_OBJECT_CLASS (klass)->finalize = soy_bodies_sphere_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_SPHERE_MATERIAL, g_param_spec_object ("material", "material", "material", SOY_MATERIALS_TYPE_MATERIAL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_SPHERE_RADIUS, g_param_spec_float ("radius", "radius", "radius", -G_MAXFLOAT, G_MAXFLOAT, 0.0F, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_SPHERE_COL_RADIUS, g_param_spec_float ("col-radius", "col-radius", "col-radius", -G_MAXFLOAT, G_MAXFLOAT, 0.0F, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
}


static void soy_bodies_sphere_instance_init (soybodiesSphere * self) {
	self->priv = SOY_BODIES_SPHERE_GET_PRIVATE (self);
}


static void soy_bodies_sphere_finalize (GObject* obj) {
	soybodiesSphere * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_BODIES_TYPE_SPHERE, soybodiesSphere);
	self->priv->_vercache = (g_free (self->priv->_vercache), NULL);
	_g_object_unref0 (self->priv->_material);
	G_OBJECT_CLASS (soy_bodies_sphere_parent_class)->finalize (obj);
}


GType soy_bodies_sphere_get_type (void) {
	static volatile gsize soy_bodies_sphere_type_id__volatile = 0;
	if (g_once_init_enter (&soy_bodies_sphere_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soybodiesSphereClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_bodies_sphere_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soybodiesSphere), 0, (GInstanceInitFunc) soy_bodies_sphere_instance_init, NULL };
		GType soy_bodies_sphere_type_id;
		soy_bodies_sphere_type_id = g_type_register_static (SOY_BODIES_TYPE_BODY, "soybodiesSphere", &g_define_type_info, 0);
		g_once_init_leave (&soy_bodies_sphere_type_id__volatile, soy_bodies_sphere_type_id);
	}
	return soy_bodies_sphere_type_id__volatile;
}


static void _vala_soy_bodies_sphere_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	soybodiesSphere * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_BODIES_TYPE_SPHERE, soybodiesSphere);
	switch (property_id) {
		case SOY_BODIES_SPHERE_MATERIAL:
		g_value_set_object (value, soy_bodies_sphere_get_material (self));
		break;
		case SOY_BODIES_SPHERE_RADIUS:
		g_value_set_float (value, soy_bodies_sphere_get_radius (self));
		break;
		case SOY_BODIES_SPHERE_COL_RADIUS:
		g_value_set_float (value, soy_bodies_body_get_col_radius ((soybodiesBody*) self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_soy_bodies_sphere_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	soybodiesSphere * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_BODIES_TYPE_SPHERE, soybodiesSphere);
	switch (property_id) {
		case SOY_BODIES_SPHERE_MATERIAL:
		soy_bodies_sphere_set_material (self, g_value_get_object (value));
		break;
		case SOY_BODIES_SPHERE_RADIUS:
		soy_bodies_sphere_set_radius (self, g_value_get_float (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}




/* Body.c generated by valac 0.20.1, the Vala compiler
 * generated from Body.gs, do not modify */

/*
 *  libsoy - soy.bodies.Body
 *  Copyright (C) 2006,2007,2008,2009,2010,2011,2012,2013 Copyleft Games Group
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published
 *  by the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program; if not, see http://www.gnu.org/licenses
 *
 */

#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <soy-1/ode.h>
#include <GLES/gl.h>
#include <GLES/glext.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>


#define SOY_BODIES_TYPE_BODY (soy_bodies_body_get_type ())
#define SOY_BODIES_BODY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_BODY, soybodiesBody))
#define SOY_BODIES_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))
#define SOY_BODIES_IS_BODY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_IS_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_BODY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))

typedef struct _soybodiesBody soybodiesBody;
typedef struct _soybodiesBodyClass soybodiesBodyClass;
typedef struct _soybodiesBodyPrivate soybodiesBodyPrivate;

#define SOY_BODIES_TYPE_CAMERA (soy_bodies_camera_get_type ())
#define SOY_BODIES_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_CAMERA, soybodiesCamera))
#define SOY_BODIES_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_CAMERA, soybodiesCameraClass))
#define SOY_BODIES_IS_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_CAMERA))
#define SOY_BODIES_IS_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_CAMERA))
#define SOY_BODIES_CAMERA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_CAMERA, soybodiesCameraClass))

typedef struct _soybodiesCamera soybodiesCamera;
typedef struct _soybodiesCameraClass soybodiesCameraClass;

#define SOY_SCENES_TYPE_SCENE (soy_scenes_scene_get_type ())
#define SOY_SCENES_SCENE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE_SCENE, soyscenesScene))
#define SOY_SCENES_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))
#define SOY_SCENES_IS_SCENE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_IS_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_SCENE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))

typedef struct _soyscenesScene soyscenesScene;
typedef struct _soyscenesSceneClass soyscenesSceneClass;

#define SOY_ATOMS_TYPE_POSITION (soy_atoms_position_get_type ())
#define SOY_ATOMS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPosition))
#define SOY_ATOMS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))
#define SOY_ATOMS_IS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_IS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_POSITION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))

typedef struct _soyatomsPosition soyatomsPosition;
typedef struct _soyatomsPositionClass soyatomsPositionClass;

#define SOY_ATOMS_TYPE_ROTATION (soy_atoms_rotation_get_type ())
#define SOY_ATOMS_ROTATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_ROTATION, soyatomsRotation))
#define SOY_ATOMS_ROTATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_ROTATION, soyatomsRotationClass))
#define SOY_ATOMS_IS_ROTATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_ROTATION))
#define SOY_ATOMS_IS_ROTATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_ROTATION))
#define SOY_ATOMS_ROTATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_ROTATION, soyatomsRotationClass))

typedef struct _soyatomsRotation soyatomsRotation;
typedef struct _soyatomsRotationClass soyatomsRotationClass;

#define SOY_ATOMS_TYPE_SIZE (soy_atoms_size_get_type ())
#define SOY_ATOMS_SIZE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_SIZE, soyatomsSize))
#define SOY_ATOMS_SIZE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_SIZE, soyatomsSizeClass))
#define SOY_ATOMS_IS_SIZE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_SIZE))
#define SOY_ATOMS_IS_SIZE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_SIZE))
#define SOY_ATOMS_SIZE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_SIZE, soyatomsSizeClass))

typedef struct _soyatomsSize soyatomsSize;
typedef struct _soyatomsSizeClass soyatomsSizeClass;
typedef struct _soyscenesScenePrivate soyscenesScenePrivate;

#define SOY_BODIES_TYPE_LIGHT (soy_bodies_light_get_type ())
#define SOY_BODIES_LIGHT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_LIGHT, soybodiesLight))
#define SOY_BODIES_LIGHT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_LIGHT, soybodiesLightClass))
#define SOY_BODIES_IS_LIGHT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_LIGHT))
#define SOY_BODIES_IS_LIGHT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_LIGHT))
#define SOY_BODIES_LIGHT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_LIGHT, soybodiesLightClass))

typedef struct _soybodiesLight soybodiesLight;
typedef struct _soybodiesLightClass soybodiesLightClass;

#define SOY_JOINTS_TYPE_JOINT (soy_joints_joint_get_type ())
#define SOY_JOINTS_JOINT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_JOINTS_TYPE_JOINT, soyjointsJoint))
#define SOY_JOINTS_JOINT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_JOINTS_TYPE_JOINT, soyjointsJointClass))
#define SOY_JOINTS_IS_JOINT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_JOINTS_TYPE_JOINT))
#define SOY_JOINTS_IS_JOINT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_JOINTS_TYPE_JOINT))
#define SOY_JOINTS_JOINT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_JOINTS_TYPE_JOINT, soyjointsJointClass))

typedef struct _soyjointsJoint soyjointsJoint;
typedef struct _soyjointsJointClass soyjointsJointClass;

#define SOY_CONTROLLERS_TYPE_CONTROLLER (soy_controllers_controller_get_type ())
#define SOY_CONTROLLERS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersController))
#define SOY_CONTROLLERS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersControllerClass))
#define SOY_CONTROLLERS_IS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER))
#define SOY_CONTROLLERS_IS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_TYPE_CONTROLLER))
#define SOY_CONTROLLERS_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersControllerClass))

typedef struct _soycontrollersController soycontrollersController;
typedef struct _soycontrollersControllerClass soycontrollersControllerClass;

#define SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER (soy_controllers_virtual_controller_get_type ())
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualController))
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualControllerClass))
#define SOY_CONTROLLERS_IS_VIRTUAL_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER))
#define SOY_CONTROLLERS_IS_VIRTUAL_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER))
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualControllerClass))

typedef struct _soycontrollersVirtualController soycontrollersVirtualController;
typedef struct _soycontrollersVirtualControllerClass soycontrollersVirtualControllerClass;

#define SOY_FIELDS_TYPE_FIELD (soy_fields_field_get_type ())
#define SOY_FIELDS_FIELD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_FIELDS_TYPE_FIELD, soyfieldsField))
#define SOY_FIELDS_FIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_FIELDS_TYPE_FIELD, soyfieldsFieldClass))
#define SOY_FIELDS_IS_FIELD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_FIELDS_TYPE_FIELD))
#define SOY_FIELDS_IS_FIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_FIELDS_TYPE_FIELD))
#define SOY_FIELDS_FIELD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_FIELDS_TYPE_FIELD, soyfieldsFieldClass))

typedef struct _soyfieldsField soyfieldsField;
typedef struct _soyfieldsFieldClass soyfieldsFieldClass;
#define _dBodyDestroy0(var) ((var == NULL) ? NULL : (var = (dBodyDestroy (var), NULL)))
#define _dGeomDestroy0(var) ((var == NULL) ? NULL : (var = (dGeomDestroy (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _dmatrix3_free0(var) ((var == NULL) ? NULL : (var = (dmatrix3_free (var), NULL)))

#define SOY_ATOMS_TYPE_VECTOR (soy_atoms_vector_get_type ())
#define SOY_ATOMS_VECTOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_VECTOR, soyatomsVector))
#define SOY_ATOMS_VECTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_VECTOR, soyatomsVectorClass))
#define SOY_ATOMS_IS_VECTOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_VECTOR))
#define SOY_ATOMS_IS_VECTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_VECTOR))
#define SOY_ATOMS_VECTOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_VECTOR, soyatomsVectorClass))

typedef struct _soyatomsVector soyatomsVector;
typedef struct _soyatomsVectorClass soyatomsVectorClass;

#define SOY_SCENES_TYPE__PHYSICSTHREAD (soy_scenes__physicsthread_get_type ())
#define SOY_SCENES__PHYSICSTHREAD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE__PHYSICSTHREAD, soyscenes_PhysicsThread))
#define SOY_SCENES__PHYSICSTHREAD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE__PHYSICSTHREAD, soyscenes_PhysicsThreadClass))
#define SOY_SCENES_IS__PHYSICSTHREAD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE__PHYSICSTHREAD))
#define SOY_SCENES_IS__PHYSICSTHREAD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE__PHYSICSTHREAD))
#define SOY_SCENES__PHYSICSTHREAD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE__PHYSICSTHREAD, soyscenes_PhysicsThreadClass))

typedef struct _soyscenes_PhysicsThread soyscenes_PhysicsThread;
typedef struct _soyscenes_PhysicsThreadClass soyscenes_PhysicsThreadClass;

struct _soybodiesBody {
	GObject parent_instance;
	soybodiesBodyPrivate * priv;
	struct dxBody* body;
	GLfloat* fogcoords;
	gint fogcoords_length1;
	struct dxGeom* geom;
	gchar* key;
	GMutex mutex;
	GLfloat* tslvs;
	gint tslvs_length1;
	soyscenesScene* scene;
	GeeHashMap* tags_;
};

struct _soybodiesBodyClass {
	GObjectClass parent_class;
	void (*create_geom) (soybodiesBody* self, GObject* geom_param, gfloat geom_scalar);
	void (*set_mass) (soybodiesBody* self, gfloat density);
	void (*add_extra) (soybodiesBody* self);
	void (*remove_extra) (soybodiesBody* self);
	gfloat (*pointDepth) (soybodiesBody* self, gfloat x, gfloat y, gfloat z);
	gfloat (*volume) (soybodiesBody* self);
	gint (*finite) (soybodiesBody* self);
	void (*mult_model_matrix) (soybodiesBody* self);
	void (*render) (soybodiesBody* self, gboolean alpha_stage, soybodiesCamera* camera, gint level);
	gfloat (*get_col_radius) (soybodiesBody* self);
};

struct _soybodiesBodyPrivate {
	GLuint _axis_ebo;
	gboolean _axis_updated;
	GLuint _axis_vbo;
	gfloat _density;
	soyatomsPosition* _position_obj;
	soyatomsRotation* _rotation_obj;
	GLfloat _col_radius;
	gboolean _axis;
	GLfloat _axis_x;
	GLfloat _axis_y;
	GLfloat _axis_z;
	soyatomsSize* _axis_size_obj;
};

struct _soyscenesScene {
	GObject parent_instance;
	soyscenesScenePrivate * priv;
	struct dxSpace* space;
	GeeHashSet* lights;
	GeeHashMap* bodies;
	GeeArrayList* joints;
	GeeHashSet* Controllers;
	GeeHashMap* fields;
	GLfloat* tslvs;
	gint tslvs_length1;
	GLfloat* colTexels;
};

struct _soyscenesSceneClass {
	GObjectClass parent_class;
	void (*do_in_step) (soyscenesScene* self);
	void (*render) (soyscenesScene* self, GLfloat fov, GLfloat aspect, GLfloat znear, GLfloat zfar, soybodiesCamera* camera, gint level);
	void (*render_extra) (soyscenesScene* self);
};


static gpointer soy_bodies_body_parent_class = NULL;
extern gulong GeomGhost;
extern GRWLock soy_scenes__stepLock;
extern struct dxWorld* soy_scenes__world;
extern soyscenes_PhysicsThread* soy_scenes__thread;

GType soy_bodies_body_get_type (void) G_GNUC_CONST;
GType soy_bodies_camera_get_type (void) G_GNUC_CONST;
GType soy_scenes_scene_get_type (void) G_GNUC_CONST;
GType soy_atoms_position_get_type (void) G_GNUC_CONST;
GType soy_atoms_rotation_get_type (void) G_GNUC_CONST;
GType soy_atoms_size_get_type (void) G_GNUC_CONST;
#define SOY_BODIES_BODY_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SOY_BODIES_TYPE_BODY, soybodiesBodyPrivate))
enum  {
	SOY_BODIES_BODY_DUMMY_PROPERTY,
	SOY_BODIES_BODY_TAGS,
	SOY_BODIES_BODY_DENSITY,
	SOY_BODIES_BODY_POSITION,
	SOY_BODIES_BODY_ROTATION,
	SOY_BODIES_BODY_VELOCITY,
	SOY_BODIES_BODY_COL_RADIUS,
	SOY_BODIES_BODY_AXIS,
	SOY_BODIES_BODY_AXIS_SIZE
};
GType soy_bodies_light_get_type (void) G_GNUC_CONST;
GType soy_joints_joint_get_type (void) G_GNUC_CONST;
GType soy_controllers_controller_get_type (void) G_GNUC_CONST;
GType soy_controllers_virtual_controller_get_type (void) G_GNUC_CONST;
GType soy_fields_field_get_type (void) G_GNUC_CONST;
void soy_bodies_body_remove (soybodiesBody* self);
soybodiesBody* soy_bodies_body_new (soyatomsPosition* position, GObject* geom_param, gfloat geom_scalar);
soybodiesBody* soy_bodies_body_construct (GType object_type, soyatomsPosition* position, GObject* geom_param, gfloat geom_scalar);
void soy_bodies_body_create_geom (soybodiesBody* self, GObject* geom_param, gfloat geom_scalar);
void soy_bodies_body_set_position (soybodiesBody* self, soyatomsPosition* value);
static void soy_bodies_body_real_create_geom (soybodiesBody* self, GObject* geom_param, gfloat geom_scalar);
void soy_bodies_body_set_mass (soybodiesBody* self, gfloat density);
static void soy_bodies_body_real_set_mass (soybodiesBody* self, gfloat density);
void soy_bodies_body_addForce (soybodiesBody* self, dReal fx, dReal fy, dReal fz);
void soy_bodies_body_addTorque (soybodiesBody* self, dReal fx, dReal fy, dReal fz);
void soy_bodies_body_addRelForce (soybodiesBody* self, dReal fx, dReal fy, dReal fz);
void soy_bodies_body_addRelTorque (soybodiesBody* self, dReal fx, dReal fy, dReal fz);
void soy_bodies_body_addForceAtPos (soybodiesBody* self, dReal fx, dReal fy, dReal fz, dReal px, dReal py, dReal pz);
void soy_bodies_body_addForceAtRelPos (soybodiesBody* self, dReal fx, dReal fy, dReal fz, dReal px, dReal py, dReal pz);
void soy_bodies_body_addRelForceAtPos (soybodiesBody* self, dReal fx, dReal fy, dReal fz, dReal px, dReal py, dReal pz);
void soy_bodies_body_addRelForceRelAtPos (soybodiesBody* self, dReal fx, dReal fy, dReal fz, dReal px, dReal py, dReal pz);
void soy_bodies_body_toggle_immovable (soybodiesBody* self);
gfloat* soy_bodies_body_getPositionf (soybodiesBody* self, int* result_length1);
static void _soy_bodies_body_position_set (soybodiesBody* self, soyatomsPosition* value);
gfloat soy_atoms_position_get_x (soyatomsPosition* self);
gfloat soy_atoms_position_get_y (soyatomsPosition* self);
gfloat soy_atoms_position_get_z (soyatomsPosition* self);
static void _soy_bodies_body_position_weak (soybodiesBody* self, GObject* position);
static void _soy_bodies_body_rotation_set (soybodiesBody* self, soyatomsRotation* rot);
gfloat soy_atoms_rotation_get_gamma (soyatomsRotation* self);
gfloat soy_atoms_rotation_get_alpha (soyatomsRotation* self);
gfloat soy_atoms_rotation_get_beta (soyatomsRotation* self);
static void _soy_bodies_body_rotation_weak (soybodiesBody* self, GObject* rotation);
static void _soy_bodies_body_axis_size_set (soybodiesBody* self, soyatomsSize* size);
gfloat soy_atoms_size_get_width (soyatomsSize* self);
gfloat soy_atoms_size_get_height (soyatomsSize* self);
gfloat soy_atoms_size_get_depth (soyatomsSize* self);
static void _soy_bodies_body_axis_size_weak (soybodiesBody* self, GObject* size);
void soy_bodies_body_add (soybodiesBody* self, const gchar* k, soyscenesScene* v);
void soy_bodies_body_add_extra (soybodiesBody* self);
void soy_bodies_body_remove_extra (soybodiesBody* self);
static void soy_bodies_body_real_add_extra (soybodiesBody* self);
static void soy_bodies_body_real_remove_extra (soybodiesBody* self);
gfloat soy_bodies_body_pointDepth (soybodiesBody* self, gfloat x, gfloat y, gfloat z);
static gfloat soy_bodies_body_real_pointDepth (soybodiesBody* self, gfloat x, gfloat y, gfloat z);
gfloat soy_bodies_body_volume (soybodiesBody* self);
static gfloat soy_bodies_body_real_volume (soybodiesBody* self);
gint soy_bodies_body_finite (soybodiesBody* self);
static gint soy_bodies_body_real_finite (soybodiesBody* self);
void soy_bodies_body_mult_model_matrix (soybodiesBody* self);
static void soy_bodies_body_real_mult_model_matrix (soybodiesBody* self);
void soy_bodies_body_render (soybodiesBody* self, gboolean alpha_stage, soybodiesCamera* camera, gint level);
static void soy_bodies_body_real_render (soybodiesBody* self, gboolean alpha_stage, soybodiesCamera* camera, gint level);
void soy_bodies_body_calcFogCoords (soybodiesBody* self, GLfloat* vertices, int vertices_length1, gfloat _depth);
GLfloat* soy_bodies_body_packArrays (soybodiesBody* self, GLfloat* position, int position_length1, GLfloat* normal, int normal_length1, GLfloat* texcoord, int texcoord_length1, GLfloat* tangent, int tangent_length1, int* result_length1);
GType soy_atoms_vector_get_type (void) G_GNUC_CONST;
soyatomsVector* soy_bodies_body_getRelPointPos (soybodiesBody* self, soybodiesBody* bodyB);
soyatomsVector* soy_atoms_vector_new (gfloat x, gfloat y, gfloat z);
soyatomsVector* soy_atoms_vector_construct (GType object_type, gfloat x, gfloat y, gfloat z);
void soy_bodies_body_renderAxis (soybodiesBody* self);
static void _soy_bodies_body_update_axis (soybodiesBody* self);
void soy_bodies_body_calculateTSLV (soybodiesBody* self, GLfloat* vertices, int vertices_length1);
GeeHashMap* soy_bodies_body_get_tags (soybodiesBody* self);
static gfloat* _float_dup (gfloat* self);
gfloat soy_bodies_body_get_density (soybodiesBody* self);
void soy_bodies_body_set_density (soybodiesBody* self, gfloat value);
soyatomsPosition* soy_bodies_body_get_position (soybodiesBody* self);
static void __soy_bodies_body_position_set_soy_atoms_position_on_set (soyatomsPosition* _sender, soyatomsPosition* position, gpointer self);
static void __soy_bodies_body_position_weak_gweak_notify (gpointer self, GObject* object);
soyatomsPosition* soy_atoms_position_new (gfloat x, gfloat y, gfloat z);
soyatomsPosition* soy_atoms_position_construct (GType object_type, gfloat x, gfloat y, gfloat z);
soyatomsRotation* soy_bodies_body_get_rotation (soybodiesBody* self);
soyatomsRotation* soy_atoms_rotation_new (gfloat alpha, gfloat beta, gfloat gamma);
soyatomsRotation* soy_atoms_rotation_construct (GType object_type, gfloat alpha, gfloat beta, gfloat gamma);
static void __soy_bodies_body_rotation_set_soy_atoms_rotation_on_set (soyatomsRotation* _sender, soyatomsRotation* Rotation, gpointer self);
static void __soy_bodies_body_rotation_weak_gweak_notify (gpointer self, GObject* object);
void soy_bodies_body_set_rotation (soybodiesBody* self, soyatomsRotation* value);
soyatomsVector* soy_bodies_body_get_velocity (soybodiesBody* self);
void soy_atoms_vector_set_x (soyatomsVector* self, gfloat value);
void soy_atoms_vector_set_y (soyatomsVector* self, gfloat value);
void soy_atoms_vector_set_z (soyatomsVector* self, gfloat value);
void soy_bodies_body_set_velocity (soybodiesBody* self, soyatomsVector* value);
gfloat soy_atoms_vector_get_x (soyatomsVector* self);
gfloat soy_atoms_vector_get_y (soyatomsVector* self);
gfloat soy_atoms_vector_get_z (soyatomsVector* self);
gfloat soy_bodies_body_get_col_radius (soybodiesBody* self);
gboolean soy_bodies_body_get_axis (soybodiesBody* self);
void soy_bodies_body_set_axis (soybodiesBody* self, gboolean value);
soyatomsSize* soy_bodies_body_get_axis_size (soybodiesBody* self);
soyatomsSize* soy_atoms_size_new (gfloat width, gfloat height, gfloat depth);
soyatomsSize* soy_atoms_size_construct (GType object_type, gfloat width, gfloat height, gfloat depth);
static void __soy_bodies_body_axis_size_set_soy_atoms_size_on_set (soyatomsSize* _sender, soyatomsSize* size, gpointer self);
static void __soy_bodies_body_axis_size_weak_gweak_notify (gpointer self, GObject* object);
void soy_bodies_body_set_axis_size (soybodiesBody* self, soyatomsSize* value);
static GObject * soy_bodies_body_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
GType soy_scenes__physicsthread_get_type (void) G_GNUC_CONST;
soyscenes_PhysicsThread* soy_scenes__physicsthread_new (void);
soyscenes_PhysicsThread* soy_scenes__physicsthread_construct (GType object_type);
static void soy_bodies_body_finalize (GObject* obj);
static void _vala_soy_bodies_body_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_soy_bodies_body_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
static void _vala_clear_GMutex (GMutex * mutex);
static void _vala_clear_GRecMutex (GRecMutex * mutex);
static void _vala_clear_GRWLock (GRWLock * mutex);
static void _vala_clear_GCond (GCond * mutex);


soybodiesBody* soy_bodies_body_construct (GType object_type, soyatomsPosition* position, GObject* geom_param, gfloat geom_scalar) {
	soybodiesBody * self = NULL;
	GObject* _tmp0_;
	gfloat _tmp1_;
	soyatomsPosition* _tmp2_;
	self = (soybodiesBody*) g_object_new (object_type, NULL);
	_tmp0_ = geom_param;
	_tmp1_ = geom_scalar;
	soy_bodies_body_create_geom (self, _tmp0_, _tmp1_);
	_tmp2_ = position;
	if (_tmp2_ != NULL) {
		soyatomsPosition* _tmp3_;
		_tmp3_ = position;
		soy_bodies_body_set_position (self, _tmp3_);
	}
	return self;
}


soybodiesBody* soy_bodies_body_new (soyatomsPosition* position, GObject* geom_param, gfloat geom_scalar) {
	return soy_bodies_body_construct (SOY_BODIES_TYPE_BODY, position, geom_param, geom_scalar);
}


static void soy_bodies_body_real_create_geom (soybodiesBody* self, GObject* geom_param, gfloat geom_scalar) {
	struct dxGeom* _tmp0_;
	struct dxGeom* _tmp1_;
	struct dxGeom* _tmp2_;
	gulong _tmp3_;
	struct dxGeom* _tmp4_;
	struct dxBody* _tmp5_;
	struct dxGeom* _tmp6_;
	dxVector3* _tmp7_ = NULL;
	dxVector3* pos;
	struct dxBody* _tmp8_;
	dReal _tmp9_;
	dReal _tmp10_;
	dReal _tmp11_;
	struct dxBody* _tmp12_;
	struct dxGeom* _tmp13_;
	dxMatrix3* _tmp14_ = NULL;
	struct dxGeom* _tmp15_;
	struct dxBody* _tmp16_;
	gfloat _tmp17_;
	_tmp0_ = dCreateSphere (NULL, (dReal) 1.0);
	_dGeomDestroy0 (self->geom);
	self->geom = _tmp0_;
	_tmp1_ = self->geom;
	dGeomDisable (_tmp1_);
	_tmp2_ = self->geom;
	_tmp3_ = GeomGhost;
	dGeomSetCategoryBits (_tmp2_, _tmp3_);
	_tmp4_ = self->geom;
	dGeomSetData (_tmp4_, (void*) self);
	_tmp5_ = self->body;
	dBodySetData (_tmp5_, (void*) self);
	_tmp6_ = self->geom;
	_tmp7_ = dGeomGetPosition (_tmp6_);
	pos = _tmp7_;
	_tmp8_ = self->body;
	_tmp9_ = pos->x;
	_tmp10_ = pos->y;
	_tmp11_ = pos->z;
	dBodySetPosition (_tmp8_, _tmp9_, _tmp10_, _tmp11_);
	_tmp12_ = self->body;
	_tmp13_ = self->geom;
	_tmp14_ = dGeomGetRotation (_tmp13_);
	dBodySetRotation (_tmp12_, _tmp14_);
	_tmp15_ = self->geom;
	_tmp16_ = self->body;
	dGeomSetBody (_tmp15_, _tmp16_);
	_tmp17_ = self->priv->_density;
	soy_bodies_body_set_mass (self, _tmp17_);
}


void soy_bodies_body_create_geom (soybodiesBody* self, GObject* geom_param, gfloat geom_scalar) {
	g_return_if_fail (self != NULL);
	SOY_BODIES_BODY_GET_CLASS (self)->create_geom (self, geom_param, geom_scalar);
}


static void soy_bodies_body_real_set_mass (soybodiesBody* self, gfloat density) {
	return;
}


void soy_bodies_body_set_mass (soybodiesBody* self, gfloat density) {
	g_return_if_fail (self != NULL);
	SOY_BODIES_BODY_GET_CLASS (self)->set_mass (self, density);
}


void soy_bodies_body_addForce (soybodiesBody* self, dReal fx, dReal fy, dReal fz) {
	soyscenesScene* _tmp0_;
	struct dxBody* _tmp1_;
	dReal _tmp2_;
	dReal _tmp3_;
	dReal _tmp4_;
	soyscenesScene* _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ != NULL) {
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
	}
	_tmp1_ = self->body;
	_tmp2_ = fx;
	_tmp3_ = fy;
	_tmp4_ = fz;
	dBodyAddForce (_tmp1_, _tmp2_, _tmp3_, _tmp4_);
	_tmp5_ = self->scene;
	if (_tmp5_ != NULL) {
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
}


void soy_bodies_body_addTorque (soybodiesBody* self, dReal fx, dReal fy, dReal fz) {
	soyscenesScene* _tmp0_;
	struct dxBody* _tmp1_;
	dReal _tmp2_;
	dReal _tmp3_;
	dReal _tmp4_;
	soyscenesScene* _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ != NULL) {
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
	}
	_tmp1_ = self->body;
	_tmp2_ = fx;
	_tmp3_ = fy;
	_tmp4_ = fz;
	dBodyAddTorque (_tmp1_, _tmp2_, _tmp3_, _tmp4_);
	_tmp5_ = self->scene;
	if (_tmp5_ != NULL) {
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
}


void soy_bodies_body_addRelForce (soybodiesBody* self, dReal fx, dReal fy, dReal fz) {
	soyscenesScene* _tmp0_;
	struct dxBody* _tmp1_;
	dReal _tmp2_;
	dReal _tmp3_;
	dReal _tmp4_;
	soyscenesScene* _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ != NULL) {
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
	}
	_tmp1_ = self->body;
	_tmp2_ = fx;
	_tmp3_ = fy;
	_tmp4_ = fz;
	dBodyAddRelForce (_tmp1_, _tmp2_, _tmp3_, _tmp4_);
	_tmp5_ = self->scene;
	if (_tmp5_ != NULL) {
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
}


void soy_bodies_body_addRelTorque (soybodiesBody* self, dReal fx, dReal fy, dReal fz) {
	soyscenesScene* _tmp0_;
	struct dxBody* _tmp1_;
	dReal _tmp2_;
	dReal _tmp3_;
	dReal _tmp4_;
	soyscenesScene* _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ != NULL) {
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
	}
	_tmp1_ = self->body;
	_tmp2_ = fx;
	_tmp3_ = fy;
	_tmp4_ = fz;
	dBodyAddRelTorque (_tmp1_, _tmp2_, _tmp3_, _tmp4_);
	_tmp5_ = self->scene;
	if (_tmp5_ != NULL) {
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
}


void soy_bodies_body_addForceAtPos (soybodiesBody* self, dReal fx, dReal fy, dReal fz, dReal px, dReal py, dReal pz) {
	soyscenesScene* _tmp0_;
	struct dxBody* _tmp1_;
	dReal _tmp2_;
	dReal _tmp3_;
	dReal _tmp4_;
	dReal _tmp5_;
	dReal _tmp6_;
	dReal _tmp7_;
	soyscenesScene* _tmp8_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ != NULL) {
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
	}
	_tmp1_ = self->body;
	_tmp2_ = fx;
	_tmp3_ = fy;
	_tmp4_ = fz;
	_tmp5_ = px;
	_tmp6_ = py;
	_tmp7_ = pz;
	dBodyAddForceAtPos (_tmp1_, _tmp2_, _tmp3_, _tmp4_, _tmp5_, _tmp6_, _tmp7_);
	_tmp8_ = self->scene;
	if (_tmp8_ != NULL) {
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
}


void soy_bodies_body_addForceAtRelPos (soybodiesBody* self, dReal fx, dReal fy, dReal fz, dReal px, dReal py, dReal pz) {
	soyscenesScene* _tmp0_;
	struct dxBody* _tmp1_;
	dReal _tmp2_;
	dReal _tmp3_;
	dReal _tmp4_;
	dReal _tmp5_;
	dReal _tmp6_;
	dReal _tmp7_;
	soyscenesScene* _tmp8_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ != NULL) {
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
	}
	_tmp1_ = self->body;
	_tmp2_ = fx;
	_tmp3_ = fy;
	_tmp4_ = fz;
	_tmp5_ = px;
	_tmp6_ = py;
	_tmp7_ = pz;
	dBodyAddForceAtRelPos (_tmp1_, _tmp2_, _tmp3_, _tmp4_, _tmp5_, _tmp6_, _tmp7_);
	_tmp8_ = self->scene;
	if (_tmp8_ != NULL) {
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
}


void soy_bodies_body_addRelForceAtPos (soybodiesBody* self, dReal fx, dReal fy, dReal fz, dReal px, dReal py, dReal pz) {
	soyscenesScene* _tmp0_;
	struct dxBody* _tmp1_;
	dReal _tmp2_;
	dReal _tmp3_;
	dReal _tmp4_;
	dReal _tmp5_;
	dReal _tmp6_;
	dReal _tmp7_;
	soyscenesScene* _tmp8_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ != NULL) {
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
	}
	_tmp1_ = self->body;
	_tmp2_ = fx;
	_tmp3_ = fy;
	_tmp4_ = fz;
	_tmp5_ = px;
	_tmp6_ = py;
	_tmp7_ = pz;
	dBodyAddRelForceAtPos (_tmp1_, _tmp2_, _tmp3_, _tmp4_, _tmp5_, _tmp6_, _tmp7_);
	_tmp8_ = self->scene;
	if (_tmp8_ != NULL) {
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
}


void soy_bodies_body_addRelForceRelAtPos (soybodiesBody* self, dReal fx, dReal fy, dReal fz, dReal px, dReal py, dReal pz) {
	soyscenesScene* _tmp0_;
	struct dxBody* _tmp1_;
	dReal _tmp2_;
	dReal _tmp3_;
	dReal _tmp4_;
	dReal _tmp5_;
	dReal _tmp6_;
	dReal _tmp7_;
	soyscenesScene* _tmp8_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ != NULL) {
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
	}
	_tmp1_ = self->body;
	_tmp2_ = fx;
	_tmp3_ = fy;
	_tmp4_ = fz;
	_tmp5_ = px;
	_tmp6_ = py;
	_tmp7_ = pz;
	dBodyAddRelForceAtRelPos (_tmp1_, _tmp2_, _tmp3_, _tmp4_, _tmp5_, _tmp6_, _tmp7_);
	_tmp8_ = self->scene;
	if (_tmp8_ != NULL) {
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
}


void soy_bodies_body_toggle_immovable (soybodiesBody* self) {
	soyscenesScene* _tmp0_;
	struct dxGeom* _tmp1_;
	struct dxBody* _tmp2_ = NULL;
	soyscenesScene* _tmp6_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ != NULL) {
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
	}
	_tmp1_ = self->geom;
	_tmp2_ = dGeomGetBody (_tmp1_);
	if (_tmp2_ != NULL) {
		struct dxGeom* _tmp3_;
		_tmp3_ = self->geom;
		dGeomSetBody (_tmp3_, NULL);
	} else {
		struct dxGeom* _tmp4_;
		struct dxBody* _tmp5_;
		_tmp4_ = self->geom;
		_tmp5_ = self->body;
		dGeomSetBody (_tmp4_, _tmp5_);
	}
	_tmp6_ = self->scene;
	if (_tmp6_ != NULL) {
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
}


gfloat* soy_bodies_body_getPositionf (soybodiesBody* self, int* result_length1) {
	gfloat* result = NULL;
	soyscenesScene* _tmp0_;
	struct dxBody* _tmp3_;
	dxVector3* _tmp4_ = NULL;
	dxVector3* v;
	dxVector3* _tmp5_;
	dReal _tmp6_;
	dxVector3* _tmp7_;
	dReal _tmp8_;
	dxVector3* _tmp9_;
	dReal _tmp10_;
	gfloat* _tmp11_ = NULL;
	gfloat* _tmp12_;
	gint _tmp12__length1;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ == NULL) {
		gfloat* _tmp1_ = NULL;
		gfloat* _tmp2_;
		gint _tmp2__length1;
		_tmp1_ = g_new0 (gfloat, 4);
		_tmp1_[0] = 0.0f;
		_tmp1_[1] = 0.0f;
		_tmp1_[2] = 0.0f;
		_tmp1_[3] = 1.0f;
		_tmp2_ = _tmp1_;
		_tmp2__length1 = 4;
		if (result_length1) {
			*result_length1 = _tmp2__length1;
		}
		result = _tmp2_;
		return result;
	}
	_tmp3_ = self->body;
	_tmp4_ = dBodyGetPosition (_tmp3_);
	v = _tmp4_;
	_tmp5_ = v;
	_tmp6_ = _tmp5_->x;
	_tmp7_ = v;
	_tmp8_ = _tmp7_->y;
	_tmp9_ = v;
	_tmp10_ = _tmp9_->z;
	_tmp11_ = g_new0 (gfloat, 4);
	_tmp11_[0] = (gfloat) _tmp6_;
	_tmp11_[1] = (gfloat) _tmp8_;
	_tmp11_[2] = (gfloat) _tmp10_;
	_tmp11_[3] = 1.0f;
	_tmp12_ = _tmp11_;
	_tmp12__length1 = 4;
	if (result_length1) {
		*result_length1 = _tmp12__length1;
	}
	result = _tmp12_;
	return result;
}


static void _soy_bodies_body_position_set (soybodiesBody* self, soyatomsPosition* value) {
	soyscenesScene* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (value != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ == NULL) {
		struct dxGeom* _tmp1_;
		soyatomsPosition* _tmp2_;
		gfloat _tmp3_;
		gfloat _tmp4_;
		soyatomsPosition* _tmp5_;
		gfloat _tmp6_;
		gfloat _tmp7_;
		soyatomsPosition* _tmp8_;
		gfloat _tmp9_;
		gfloat _tmp10_;
		_tmp1_ = self->geom;
		_tmp2_ = value;
		_tmp3_ = soy_atoms_position_get_x (_tmp2_);
		_tmp4_ = _tmp3_;
		_tmp5_ = value;
		_tmp6_ = soy_atoms_position_get_y (_tmp5_);
		_tmp7_ = _tmp6_;
		_tmp8_ = value;
		_tmp9_ = soy_atoms_position_get_z (_tmp8_);
		_tmp10_ = _tmp9_;
		dGeomSetPosition (_tmp1_, (dReal) _tmp4_, (dReal) _tmp7_, (dReal) _tmp10_);
	} else {
		struct dxBody* _tmp11_;
		soyatomsPosition* _tmp12_;
		gfloat _tmp13_;
		gfloat _tmp14_;
		soyatomsPosition* _tmp15_;
		gfloat _tmp16_;
		gfloat _tmp17_;
		soyatomsPosition* _tmp18_;
		gfloat _tmp19_;
		gfloat _tmp20_;
		g_rw_lock_writer_lock (&soy_scenes__stepLock);
		_tmp11_ = self->body;
		_tmp12_ = value;
		_tmp13_ = soy_atoms_position_get_x (_tmp12_);
		_tmp14_ = _tmp13_;
		_tmp15_ = value;
		_tmp16_ = soy_atoms_position_get_y (_tmp15_);
		_tmp17_ = _tmp16_;
		_tmp18_ = value;
		_tmp19_ = soy_atoms_position_get_z (_tmp18_);
		_tmp20_ = _tmp19_;
		dBodySetPosition (_tmp11_, (dReal) _tmp14_, (dReal) _tmp17_, (dReal) _tmp20_);
		g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	}
}


static void _soy_bodies_body_position_weak (soybodiesBody* self, GObject* position) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (position != NULL);
	self->priv->_position_obj = NULL;
}


static void _soy_bodies_body_rotation_set (soybodiesBody* self, soyatomsRotation* rot) {
	dxMatrix3* _tmp0_;
	dxMatrix3* m;
	soyatomsRotation* _tmp1_;
	gfloat _tmp2_;
	gfloat _tmp3_;
	soyatomsRotation* _tmp4_;
	gfloat _tmp5_;
	gfloat _tmp6_;
	soyatomsRotation* _tmp7_;
	gfloat _tmp8_;
	gfloat _tmp9_;
	struct dxBody* _tmp10_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (rot != NULL);
	_tmp0_ = dmatrix3_new ();
	m = _tmp0_;
	_tmp1_ = rot;
	_tmp2_ = soy_atoms_rotation_get_gamma (_tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = rot;
	_tmp5_ = soy_atoms_rotation_get_alpha (_tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = rot;
	_tmp8_ = soy_atoms_rotation_get_beta (_tmp7_);
	_tmp9_ = _tmp8_;
	dRFromEulerAngles (m, (dReal) _tmp3_, (dReal) _tmp6_, (dReal) _tmp9_);
	g_rw_lock_writer_lock (&soy_scenes__stepLock);
	_tmp10_ = self->body;
	dBodySetRotation (_tmp10_, m);
	g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	_dmatrix3_free0 (m);
	return;
}


static void _soy_bodies_body_rotation_weak (soybodiesBody* self, GObject* rotation) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (rotation != NULL);
	self->priv->_rotation_obj = NULL;
}


static void _soy_bodies_body_axis_size_set (soybodiesBody* self, soyatomsSize* size) {
	soyatomsSize* _tmp0_;
	gfloat _tmp1_;
	gfloat _tmp2_;
	soyatomsSize* _tmp3_;
	gfloat _tmp4_;
	gfloat _tmp5_;
	soyatomsSize* _tmp6_;
	gfloat _tmp7_;
	gfloat _tmp8_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (size != NULL);
	g_mutex_lock (&self->mutex);
	_tmp0_ = size;
	_tmp1_ = soy_atoms_size_get_width (_tmp0_);
	_tmp2_ = _tmp1_;
	self->priv->_axis_x = (GLfloat) _tmp2_;
	_tmp3_ = size;
	_tmp4_ = soy_atoms_size_get_height (_tmp3_);
	_tmp5_ = _tmp4_;
	self->priv->_axis_y = (GLfloat) _tmp5_;
	_tmp6_ = size;
	_tmp7_ = soy_atoms_size_get_depth (_tmp6_);
	_tmp8_ = _tmp7_;
	self->priv->_axis_z = (GLfloat) _tmp8_;
	self->priv->_axis_updated = TRUE;
	g_mutex_unlock (&self->mutex);
}


static void _soy_bodies_body_axis_size_weak (soybodiesBody* self, GObject* size) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (size != NULL);
	self->priv->_axis_size_obj = NULL;
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


void soy_bodies_body_add (soybodiesBody* self, const gchar* k, soyscenesScene* v) {
	soyscenesScene* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	soyscenesScene* _tmp3_;
	soyscenesScene* _tmp4_;
	soyscenesScene* _tmp5_;
	struct dxSpace* _tmp6_;
	struct dxGeom* _tmp7_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (k != NULL);
	g_return_if_fail (v != NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ != NULL) {
		soy_bodies_body_remove (self);
	}
	_tmp1_ = k;
	_tmp2_ = g_strdup (_tmp1_);
	_g_free0 (self->key);
	self->key = _tmp2_;
	_tmp3_ = v;
	_tmp4_ = _g_object_ref0 (_tmp3_);
	_g_object_unref0 (self->scene);
	self->scene = _tmp4_;
	_tmp5_ = self->scene;
	_tmp6_ = _tmp5_->space;
	_tmp7_ = self->geom;
	dSpaceAdd (_tmp6_, _tmp7_);
	soy_bodies_body_add_extra (self);
}


void soy_bodies_body_remove (soybodiesBody* self) {
	soyscenesScene* _tmp0_;
	GeeHashMap* _tmp1_;
	const gchar* _tmp2_;
	soyscenesScene* _tmp3_;
	struct dxSpace* _tmp4_;
	struct dxGeom* _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->scene;
	_tmp1_ = _tmp0_->bodies;
	_tmp2_ = self->key;
	gee_abstract_map_unset ((GeeAbstractMap*) _tmp1_, _tmp2_, NULL);
	_tmp3_ = self->scene;
	_tmp4_ = _tmp3_->space;
	_tmp5_ = self->geom;
	dSpaceRemove (_tmp4_, _tmp5_);
	_g_object_unref0 (self->scene);
	self->scene = NULL;
	soy_bodies_body_remove_extra (self);
}


static void soy_bodies_body_real_add_extra (soybodiesBody* self) {
	return;
}


void soy_bodies_body_add_extra (soybodiesBody* self) {
	g_return_if_fail (self != NULL);
	SOY_BODIES_BODY_GET_CLASS (self)->add_extra (self);
}


static void soy_bodies_body_real_remove_extra (soybodiesBody* self) {
	return;
}


void soy_bodies_body_remove_extra (soybodiesBody* self) {
	g_return_if_fail (self != NULL);
	SOY_BODIES_BODY_GET_CLASS (self)->remove_extra (self);
}


static gfloat soy_bodies_body_real_pointDepth (soybodiesBody* self, gfloat x, gfloat y, gfloat z) {
	gfloat result = 0.0F;
	result = 0.0f;
	return result;
}


gfloat soy_bodies_body_pointDepth (soybodiesBody* self, gfloat x, gfloat y, gfloat z) {
	g_return_val_if_fail (self != NULL, 0.0F);
	return SOY_BODIES_BODY_GET_CLASS (self)->pointDepth (self, x, y, z);
}


static gfloat soy_bodies_body_real_volume (soybodiesBody* self) {
	gfloat result = 0.0F;
	result = 0.0f;
	return result;
}


gfloat soy_bodies_body_volume (soybodiesBody* self) {
	g_return_val_if_fail (self != NULL, 0.0F);
	return SOY_BODIES_BODY_GET_CLASS (self)->volume (self);
}


static gint soy_bodies_body_real_finite (soybodiesBody* self) {
	gint result = 0;
	result = 0;
	return result;
}


gint soy_bodies_body_finite (soybodiesBody* self) {
	g_return_val_if_fail (self != NULL, 0);
	return SOY_BODIES_BODY_GET_CLASS (self)->finite (self);
}


static void soy_bodies_body_real_mult_model_matrix (soybodiesBody* self) {
	GLfloat* _tmp0_ = NULL;
	GLfloat* _mtx;
	gint _mtx_length1;
	gint __mtx_size_;
	struct dxBody* _tmp1_;
	dxMatrix3* _tmp2_ = NULL;
	dxMatrix3* rotation;
	struct dxBody* _tmp3_;
	dxVector3* _tmp4_ = NULL;
	dxVector3* position;
	dReal _tmp5_;
	GLfloat _tmp6_;
	dReal _tmp7_;
	GLfloat _tmp8_;
	dReal _tmp9_;
	GLfloat _tmp10_;
	GLfloat _tmp11_;
	dReal _tmp12_;
	GLfloat _tmp13_;
	dReal _tmp14_;
	GLfloat _tmp15_;
	dReal _tmp16_;
	GLfloat _tmp17_;
	GLfloat _tmp18_;
	dReal _tmp19_;
	GLfloat _tmp20_;
	dReal _tmp21_;
	GLfloat _tmp22_;
	dReal _tmp23_;
	GLfloat _tmp24_;
	GLfloat _tmp25_;
	dReal _tmp26_;
	GLfloat _tmp27_;
	dReal _tmp28_;
	GLfloat _tmp29_;
	dReal _tmp30_;
	GLfloat _tmp31_;
	GLfloat _tmp32_;
	_tmp0_ = g_new0 (GLfloat, 16);
	_mtx = _tmp0_;
	_mtx_length1 = 16;
	__mtx_size_ = _mtx_length1;
	_tmp1_ = self->body;
	_tmp2_ = dBodyGetRotation (_tmp1_);
	rotation = _tmp2_;
	_tmp3_ = self->body;
	_tmp4_ = dBodyGetPosition (_tmp3_);
	position = _tmp4_;
	_tmp5_ = rotation->m0;
	_mtx[0] = (GLfloat) _tmp5_;
	_tmp6_ = _mtx[0];
	_tmp7_ = rotation->m4;
	_mtx[1] = (GLfloat) _tmp7_;
	_tmp8_ = _mtx[1];
	_tmp9_ = rotation->m8;
	_mtx[2] = (GLfloat) _tmp9_;
	_tmp10_ = _mtx[2];
	_mtx[3] = (GLfloat) 0.0;
	_tmp11_ = _mtx[3];
	_tmp12_ = rotation->m1;
	_mtx[4] = (GLfloat) _tmp12_;
	_tmp13_ = _mtx[4];
	_tmp14_ = rotation->m5;
	_mtx[5] = (GLfloat) _tmp14_;
	_tmp15_ = _mtx[5];
	_tmp16_ = rotation->m9;
	_mtx[6] = (GLfloat) _tmp16_;
	_tmp17_ = _mtx[6];
	_mtx[7] = (GLfloat) 0.0;
	_tmp18_ = _mtx[7];
	_tmp19_ = rotation->m2;
	_mtx[8] = (GLfloat) _tmp19_;
	_tmp20_ = _mtx[8];
	_tmp21_ = rotation->m6;
	_mtx[9] = (GLfloat) _tmp21_;
	_tmp22_ = _mtx[9];
	_tmp23_ = rotation->ma;
	_mtx[10] = (GLfloat) _tmp23_;
	_tmp24_ = _mtx[10];
	_mtx[11] = (GLfloat) 0.0;
	_tmp25_ = _mtx[11];
	_tmp26_ = position->x;
	_mtx[12] = (GLfloat) _tmp26_;
	_tmp27_ = _mtx[12];
	_tmp28_ = position->y;
	_mtx[13] = (GLfloat) _tmp28_;
	_tmp29_ = _mtx[13];
	_tmp30_ = position->z;
	_mtx[14] = (GLfloat) _tmp30_;
	_tmp31_ = _mtx[14];
	_mtx[15] = (GLfloat) 1.0;
	_tmp32_ = _mtx[15];
	glMultMatrixf (_mtx);
	_mtx = (g_free (_mtx), NULL);
}


void soy_bodies_body_mult_model_matrix (soybodiesBody* self) {
	g_return_if_fail (self != NULL);
	SOY_BODIES_BODY_GET_CLASS (self)->mult_model_matrix (self);
}


static void soy_bodies_body_real_render (soybodiesBody* self, gboolean alpha_stage, soybodiesCamera* camera, gint level) {
	g_return_if_fail (camera != NULL);
	return;
}


void soy_bodies_body_render (soybodiesBody* self, gboolean alpha_stage, soybodiesCamera* camera, gint level) {
	g_return_if_fail (self != NULL);
	SOY_BODIES_BODY_GET_CLASS (self)->render (self, alpha_stage, camera, level);
}


void soy_bodies_body_calcFogCoords (soybodiesBody* self, GLfloat* vertices, int vertices_length1, gfloat _depth) {
	GLfloat* _tmp0_;
	gint _tmp0__length1;
	g_return_if_fail (self != NULL);
	_tmp0_ = vertices;
	_tmp0__length1 = vertices_length1;
	if (_tmp0__length1 != 0) {
		GLfloat* _tmp1_;
		gint _tmp1__length1;
		GLfloat* _tmp2_ = NULL;
		_tmp1_ = vertices;
		_tmp1__length1 = vertices_length1;
		_tmp2_ = g_new0 (GLfloat, (gint) (_tmp1__length1 / 15));
		self->fogcoords = (g_free (self->fogcoords), NULL);
		self->fogcoords = _tmp2_;
		self->fogcoords_length1 = (gint) (_tmp1__length1 / 15);
		{
			gint i;
			i = 0;
			{
				gboolean _tmp3_;
				_tmp3_ = TRUE;
				while (TRUE) {
					gboolean _tmp4_;
					GLfloat* _tmp6_;
					gint _tmp6__length1;
					GLfloat* _tmp7_;
					gint _tmp7__length1;
					gint _tmp8_;
					gfloat _tmp9_;
					GLfloat* _tmp10_;
					gint _tmp10__length1;
					gint _tmp11_;
					GLfloat _tmp12_;
					GLfloat _tmp13_;
					_tmp4_ = _tmp3_;
					if (!_tmp4_) {
						gint _tmp5_;
						_tmp5_ = i;
						i = _tmp5_ + 1;
					}
					_tmp3_ = FALSE;
					_tmp6_ = vertices;
					_tmp6__length1 = vertices_length1;
					if (!(i <= (_tmp6__length1 / 15))) {
						break;
					}
					_tmp7_ = self->fogcoords;
					_tmp7__length1 = self->fogcoords_length1;
					_tmp8_ = i;
					_tmp9_ = _depth;
					_tmp10_ = vertices;
					_tmp10__length1 = vertices_length1;
					_tmp11_ = i;
					_tmp12_ = _tmp10_[(_tmp11_ * 11) + 2];
					_tmp7_[_tmp8_] = (GLfloat) (_tmp9_ + _tmp12_);
					_tmp13_ = _tmp7_[_tmp8_];
				}
			}
		}
	}
}


GLfloat* soy_bodies_body_packArrays (soybodiesBody* self, GLfloat* position, int position_length1, GLfloat* normal, int normal_length1, GLfloat* texcoord, int texcoord_length1, GLfloat* tangent, int tangent_length1, int* result_length1) {
	GLfloat* result = NULL;
	GLfloat* _tmp0_;
	gint _tmp0__length1;
	gint number;
	gint _tmp1_;
	GLfloat* _tmp2_ = NULL;
	GLfloat* vertices;
	gint vertices_length1;
	gint _vertices_size_;
	GLfloat* _tmp73_;
	gint _tmp73__length1;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = position;
	_tmp0__length1 = position_length1;
	number = _tmp0__length1 / 3;
	_tmp1_ = number;
	_tmp2_ = g_new0 (GLfloat, _tmp1_ * 15);
	vertices = _tmp2_;
	vertices_length1 = _tmp1_ * 15;
	_vertices_size_ = vertices_length1;
	{
		gint i;
		i = 0;
		{
			gboolean _tmp3_;
			_tmp3_ = TRUE;
			while (TRUE) {
				gboolean _tmp4_;
				gint _tmp6_;
				GLfloat* _tmp7_;
				gint _tmp7__length1;
				gint _tmp8_;
				GLfloat* _tmp9_;
				gint _tmp9__length1;
				gint _tmp10_;
				GLfloat _tmp11_;
				GLfloat _tmp12_;
				GLfloat* _tmp13_;
				gint _tmp13__length1;
				gint _tmp14_;
				GLfloat* _tmp15_;
				gint _tmp15__length1;
				gint _tmp16_;
				GLfloat _tmp17_;
				GLfloat _tmp18_;
				GLfloat* _tmp19_;
				gint _tmp19__length1;
				gint _tmp20_;
				GLfloat* _tmp21_;
				gint _tmp21__length1;
				gint _tmp22_;
				GLfloat _tmp23_;
				GLfloat _tmp24_;
				GLfloat* _tmp25_;
				gint _tmp25__length1;
				gint _tmp26_;
				GLfloat* _tmp27_;
				gint _tmp27__length1;
				gint _tmp28_;
				GLfloat _tmp29_;
				GLfloat _tmp30_;
				GLfloat* _tmp31_;
				gint _tmp31__length1;
				gint _tmp32_;
				GLfloat* _tmp33_;
				gint _tmp33__length1;
				gint _tmp34_;
				GLfloat _tmp35_;
				GLfloat _tmp36_;
				GLfloat* _tmp37_;
				gint _tmp37__length1;
				gint _tmp38_;
				GLfloat* _tmp39_;
				gint _tmp39__length1;
				gint _tmp40_;
				GLfloat _tmp41_;
				GLfloat _tmp42_;
				GLfloat* _tmp43_;
				gint _tmp43__length1;
				gint _tmp44_;
				GLfloat* _tmp45_;
				gint _tmp45__length1;
				gint _tmp46_;
				GLfloat _tmp47_;
				GLfloat _tmp48_;
				GLfloat* _tmp49_;
				gint _tmp49__length1;
				gint _tmp50_;
				GLfloat* _tmp51_;
				gint _tmp51__length1;
				gint _tmp52_;
				GLfloat _tmp53_;
				GLfloat _tmp54_;
				GLfloat* _tmp55_;
				gint _tmp55__length1;
				gint _tmp56_;
				GLfloat* _tmp57_;
				gint _tmp57__length1;
				gint _tmp58_;
				GLfloat _tmp59_;
				GLfloat _tmp60_;
				GLfloat* _tmp61_;
				gint _tmp61__length1;
				gint _tmp62_;
				GLfloat* _tmp63_;
				gint _tmp63__length1;
				gint _tmp64_;
				GLfloat _tmp65_;
				GLfloat _tmp66_;
				GLfloat* _tmp67_;
				gint _tmp67__length1;
				gint _tmp68_;
				GLfloat* _tmp69_;
				gint _tmp69__length1;
				gint _tmp70_;
				GLfloat _tmp71_;
				GLfloat _tmp72_;
				_tmp4_ = _tmp3_;
				if (!_tmp4_) {
					gint _tmp5_;
					_tmp5_ = i;
					i = _tmp5_ + 1;
				}
				_tmp3_ = FALSE;
				_tmp6_ = number;
				if (!(i <= (_tmp6_ - 1))) {
					break;
				}
				_tmp7_ = vertices;
				_tmp7__length1 = vertices_length1;
				_tmp8_ = i;
				_tmp9_ = position;
				_tmp9__length1 = position_length1;
				_tmp10_ = i;
				_tmp11_ = _tmp9_[_tmp10_ * 3];
				_tmp7_[_tmp8_ * 11] = _tmp11_;
				_tmp12_ = _tmp7_[_tmp8_ * 11];
				_tmp13_ = vertices;
				_tmp13__length1 = vertices_length1;
				_tmp14_ = i;
				_tmp15_ = position;
				_tmp15__length1 = position_length1;
				_tmp16_ = i;
				_tmp17_ = _tmp15_[(_tmp16_ * 3) + 1];
				_tmp13_[(_tmp14_ * 11) + 1] = _tmp17_;
				_tmp18_ = _tmp13_[(_tmp14_ * 11) + 1];
				_tmp19_ = vertices;
				_tmp19__length1 = vertices_length1;
				_tmp20_ = i;
				_tmp21_ = position;
				_tmp21__length1 = position_length1;
				_tmp22_ = i;
				_tmp23_ = _tmp21_[(_tmp22_ * 3) + 2];
				_tmp19_[(_tmp20_ * 11) + 2] = _tmp23_;
				_tmp24_ = _tmp19_[(_tmp20_ * 11) + 2];
				_tmp25_ = vertices;
				_tmp25__length1 = vertices_length1;
				_tmp26_ = i;
				_tmp27_ = normal;
				_tmp27__length1 = normal_length1;
				_tmp28_ = i;
				_tmp29_ = _tmp27_[_tmp28_ * 3];
				_tmp25_[(_tmp26_ * 11) + 3] = _tmp29_;
				_tmp30_ = _tmp25_[(_tmp26_ * 11) + 3];
				_tmp31_ = vertices;
				_tmp31__length1 = vertices_length1;
				_tmp32_ = i;
				_tmp33_ = normal;
				_tmp33__length1 = normal_length1;
				_tmp34_ = i;
				_tmp35_ = _tmp33_[(_tmp34_ * 3) + 1];
				_tmp31_[(_tmp32_ * 11) + 4] = _tmp35_;
				_tmp36_ = _tmp31_[(_tmp32_ * 11) + 4];
				_tmp37_ = vertices;
				_tmp37__length1 = vertices_length1;
				_tmp38_ = i;
				_tmp39_ = normal;
				_tmp39__length1 = normal_length1;
				_tmp40_ = i;
				_tmp41_ = _tmp39_[(_tmp40_ * 3) + 2];
				_tmp37_[(_tmp38_ * 11) + 5] = _tmp41_;
				_tmp42_ = _tmp37_[(_tmp38_ * 11) + 5];
				_tmp43_ = vertices;
				_tmp43__length1 = vertices_length1;
				_tmp44_ = i;
				_tmp45_ = texcoord;
				_tmp45__length1 = texcoord_length1;
				_tmp46_ = i;
				_tmp47_ = _tmp45_[_tmp46_ * 2];
				_tmp43_[(_tmp44_ * 11) + 6] = _tmp47_;
				_tmp48_ = _tmp43_[(_tmp44_ * 11) + 6];
				_tmp49_ = vertices;
				_tmp49__length1 = vertices_length1;
				_tmp50_ = i;
				_tmp51_ = texcoord;
				_tmp51__length1 = texcoord_length1;
				_tmp52_ = i;
				_tmp53_ = _tmp51_[(_tmp52_ * 2) + 1];
				_tmp49_[(_tmp50_ * 11) + 7] = _tmp53_;
				_tmp54_ = _tmp49_[(_tmp50_ * 11) + 7];
				_tmp55_ = vertices;
				_tmp55__length1 = vertices_length1;
				_tmp56_ = i;
				_tmp57_ = tangent;
				_tmp57__length1 = tangent_length1;
				_tmp58_ = i;
				_tmp59_ = _tmp57_[_tmp58_ * 3];
				_tmp55_[(_tmp56_ * 11) + 8] = _tmp59_;
				_tmp60_ = _tmp55_[(_tmp56_ * 11) + 8];
				_tmp61_ = vertices;
				_tmp61__length1 = vertices_length1;
				_tmp62_ = i;
				_tmp63_ = tangent;
				_tmp63__length1 = tangent_length1;
				_tmp64_ = i;
				_tmp65_ = _tmp63_[(_tmp64_ * 3) + 1];
				_tmp61_[(_tmp62_ * 11) + 9] = _tmp65_;
				_tmp66_ = _tmp61_[(_tmp62_ * 11) + 9];
				_tmp67_ = vertices;
				_tmp67__length1 = vertices_length1;
				_tmp68_ = i;
				_tmp69_ = tangent;
				_tmp69__length1 = tangent_length1;
				_tmp70_ = i;
				_tmp71_ = _tmp69_[(_tmp70_ * 3) + 2];
				_tmp67_[(_tmp68_ * 11) + 10] = _tmp71_;
				_tmp72_ = _tmp67_[(_tmp68_ * 11) + 10];
			}
		}
	}
	_tmp73_ = vertices;
	_tmp73__length1 = vertices_length1;
	if (result_length1) {
		*result_length1 = _tmp73__length1;
	}
	result = _tmp73_;
	return result;
}


soyatomsVector* soy_bodies_body_getRelPointPos (soybodiesBody* self, soybodiesBody* bodyB) {
	soyatomsVector* result = NULL;
	struct dxBody* _tmp0_;
	dxVector3* _tmp1_ = NULL;
	dxVector3* posA;
	soybodiesBody* _tmp2_;
	struct dxBody* _tmp3_;
	dxVector3* _tmp4_ = NULL;
	dxVector3* posB;
	dReal _tmp5_;
	dReal _tmp6_;
	dReal _tmp7_;
	dReal _tmp8_;
	dReal _tmp9_;
	dReal _tmp10_;
	soyatomsVector* _tmp11_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (bodyB != NULL, NULL);
	_tmp0_ = self->body;
	_tmp1_ = dBodyGetPosition (_tmp0_);
	posA = _tmp1_;
	_tmp2_ = bodyB;
	_tmp3_ = _tmp2_->body;
	_tmp4_ = dBodyGetPosition (_tmp3_);
	posB = _tmp4_;
	_tmp5_ = posB->x;
	_tmp6_ = posA->x;
	_tmp7_ = posB->y;
	_tmp8_ = posA->y;
	_tmp9_ = posB->z;
	_tmp10_ = posA->z;
	_tmp11_ = soy_atoms_vector_new ((gfloat) (_tmp5_ - _tmp6_), (gfloat) (_tmp7_ - _tmp8_), (gfloat) (_tmp9_ - _tmp10_));
	result = _tmp11_;
	return result;
}


void soy_bodies_body_renderAxis (soybodiesBody* self) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_axis;
	if (!_tmp0_) {
		return;
	}
	_tmp1_ = self->priv->_axis_updated;
	if (_tmp1_) {
		_soy_bodies_body_update_axis (self);
	} else {
		GLuint _tmp2_;
		GLuint _tmp3_;
		_tmp2_ = self->priv->_axis_ebo;
		glBindBuffer (GL_ELEMENT_ARRAY_BUFFER, _tmp2_);
		_tmp3_ = self->priv->_axis_vbo;
		glBindBuffer (GL_ARRAY_BUFFER, _tmp3_);
	}
	glDisableClientState (GL_NORMAL_ARRAY);
	glDisableClientState (GL_TEXTURE_COORD_ARRAY);
	glEnableClientState (GL_COLOR_ARRAY);
	glDisable (GL_CULL_FACE);
	glDisable (GL_DEPTH_TEST);
	glDisable (GL_LIGHTING);
	glVertexPointer ((GLint) 3, GL_FLOAT, (GLsizei) (sizeof (GLfloat) * 7), NULL);
	glColorPointer ((GLint) 4, GL_FLOAT, (GLsizei) (sizeof (GLfloat) * 7), (GLvoid*) (sizeof (GLfloat) * 3));
	glDrawElements (GL_LINES, (GLsizei) 24, GL_UNSIGNED_BYTE, (GLvoid*) 0);
	glEnable (GL_LIGHTING);
	glEnable (GL_DEPTH_TEST);
	glEnable (GL_CULL_FACE);
	glDisableClientState (GL_COLOR_ARRAY);
	glEnableClientState (GL_NORMAL_ARRAY);
	glEnableClientState (GL_TEXTURE_COORD_ARRAY);
}


static void _soy_bodies_body_update_axis (soybodiesBody* self) {
	GLuint _tmp0_;
	GLubyte* _tmp3_ = NULL;
	GLubyte* elements;
	gint elements_length1;
	gint _elements_size_;
	GLfloat _tmp4_;
	GLfloat _tmp5_;
	GLfloat _tmp6_;
	GLfloat _tmp7_;
	GLfloat _tmp8_;
	GLfloat _tmp9_;
	GLfloat _tmp10_;
	GLfloat _tmp11_;
	GLfloat _tmp12_;
	GLfloat _tmp13_;
	GLfloat _tmp14_;
	GLfloat _tmp15_;
	GLfloat* _tmp16_ = NULL;
	GLfloat* vertices;
	gint vertices_length1;
	gint _vertices_size_;
	GLuint _tmp17_;
	GLuint _tmp18_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_axis_ebo;
	if (_tmp0_ == ((GLuint) 0)) {
		GLuint _tmp1_ = 0U;
		GLuint _tmp2_ = 0U;
		glGenBuffers ((GLsizei) 1, &_tmp1_);
		self->priv->_axis_ebo = _tmp1_;
		glGenBuffers ((GLsizei) 1, &_tmp2_);
		self->priv->_axis_vbo = _tmp2_;
	}
	_tmp3_ = g_new0 (GLubyte, 24);
	_tmp3_[0] = (GLubyte) 0;
	_tmp3_[1] = (GLubyte) 1;
	_tmp3_[2] = (GLubyte) 2;
	_tmp3_[3] = (GLubyte) 4;
	_tmp3_[4] = (GLubyte) 2;
	_tmp3_[5] = (GLubyte) 3;
	_tmp3_[6] = (GLubyte) 3;
	_tmp3_[7] = (GLubyte) 4;
	_tmp3_[8] = (GLubyte) 5;
	_tmp3_[9] = (GLubyte) 6;
	_tmp3_[10] = (GLubyte) 7;
	_tmp3_[11] = (GLubyte) 9;
	_tmp3_[12] = (GLubyte) 8;
	_tmp3_[13] = (GLubyte) 9;
	_tmp3_[14] = (GLubyte) 8;
	_tmp3_[15] = (GLubyte) 7;
	_tmp3_[16] = (GLubyte) 10;
	_tmp3_[17] = (GLubyte) 11;
	_tmp3_[18] = (GLubyte) 14;
	_tmp3_[19] = (GLubyte) 12;
	_tmp3_[20] = (GLubyte) 13;
	_tmp3_[21] = (GLubyte) 12;
	_tmp3_[22] = (GLubyte) 13;
	_tmp3_[23] = (GLubyte) 14;
	elements = _tmp3_;
	elements_length1 = 24;
	_elements_size_ = elements_length1;
	_tmp4_ = self->priv->_axis_x;
	_tmp5_ = self->priv->_axis_x;
	_tmp6_ = self->priv->_axis_x;
	_tmp7_ = self->priv->_axis_x;
	_tmp8_ = self->priv->_axis_y;
	_tmp9_ = self->priv->_axis_y;
	_tmp10_ = self->priv->_axis_y;
	_tmp11_ = self->priv->_axis_y;
	_tmp12_ = self->priv->_axis_z;
	_tmp13_ = self->priv->_axis_z;
	_tmp14_ = self->priv->_axis_z;
	_tmp15_ = self->priv->_axis_z;
	_tmp16_ = g_new0 (GLfloat, 105);
	_tmp16_[0] = (GLfloat) 0.0f;
	_tmp16_[1] = (GLfloat) 0.0f;
	_tmp16_[2] = (GLfloat) 0.0f;
	_tmp16_[3] = (GLfloat) 1.0f;
	_tmp16_[4] = (GLfloat) 0.0f;
	_tmp16_[5] = (GLfloat) 0.0f;
	_tmp16_[6] = (GLfloat) 1.0f;
	_tmp16_[7] = _tmp4_;
	_tmp16_[8] = (GLfloat) 0.0f;
	_tmp16_[9] = (GLfloat) 0.0f;
	_tmp16_[10] = (GLfloat) 1.0f;
	_tmp16_[11] = (GLfloat) 0.0f;
	_tmp16_[12] = (GLfloat) 0.0f;
	_tmp16_[13] = (GLfloat) 1.0f;
	_tmp16_[14] = _tmp5_;
	_tmp16_[15] = (GLfloat) 0.3f;
	_tmp16_[16] = (GLfloat) 0.0f;
	_tmp16_[17] = (GLfloat) 1.0f;
	_tmp16_[18] = (GLfloat) 0.0f;
	_tmp16_[19] = (GLfloat) 0.0f;
	_tmp16_[20] = (GLfloat) 1.0f;
	_tmp16_[21] = _tmp6_ + 0.3f;
	_tmp16_[22] = (GLfloat) 0.0f;
	_tmp16_[23] = (GLfloat) 0.0f;
	_tmp16_[24] = (GLfloat) 1.0f;
	_tmp16_[25] = (GLfloat) 0.0f;
	_tmp16_[26] = (GLfloat) 0.0f;
	_tmp16_[27] = (GLfloat) 1.0f;
	_tmp16_[28] = _tmp7_;
	_tmp16_[29] = (GLfloat) (-0.3f);
	_tmp16_[30] = (GLfloat) 0.0f;
	_tmp16_[31] = (GLfloat) 1.0f;
	_tmp16_[32] = (GLfloat) 0.0f;
	_tmp16_[33] = (GLfloat) 0.0f;
	_tmp16_[34] = (GLfloat) 1.0f;
	_tmp16_[35] = (GLfloat) 0.0f;
	_tmp16_[36] = (GLfloat) 0.0f;
	_tmp16_[37] = (GLfloat) 0.0f;
	_tmp16_[38] = (GLfloat) 0.0f;
	_tmp16_[39] = (GLfloat) 1.0f;
	_tmp16_[40] = (GLfloat) 0.0f;
	_tmp16_[41] = (GLfloat) 1.0f;
	_tmp16_[42] = (GLfloat) 0.0f;
	_tmp16_[43] = _tmp8_;
	_tmp16_[44] = (GLfloat) 0.0f;
	_tmp16_[45] = (GLfloat) 0.0f;
	_tmp16_[46] = (GLfloat) 1.0f;
	_tmp16_[47] = (GLfloat) 0.0f;
	_tmp16_[48] = (GLfloat) 1.0f;
	_tmp16_[49] = (GLfloat) 0.3f;
	_tmp16_[50] = _tmp9_;
	_tmp16_[51] = (GLfloat) 0.0f;
	_tmp16_[52] = (GLfloat) 0.0f;
	_tmp16_[53] = (GLfloat) 1.0f;
	_tmp16_[54] = (GLfloat) 0.0f;
	_tmp16_[55] = (GLfloat) 1.0f;
	_tmp16_[56] = (GLfloat) 0.0f;
	_tmp16_[57] = _tmp10_ + 0.3f;
	_tmp16_[58] = (GLfloat) 0.0f;
	_tmp16_[59] = (GLfloat) 0.0f;
	_tmp16_[60] = (GLfloat) 1.0f;
	_tmp16_[61] = (GLfloat) 0.0f;
	_tmp16_[62] = (GLfloat) 1.0f;
	_tmp16_[63] = (GLfloat) (-0.3f);
	_tmp16_[64] = _tmp11_;
	_tmp16_[65] = (GLfloat) 0.0f;
	_tmp16_[66] = (GLfloat) 0.0f;
	_tmp16_[67] = (GLfloat) 1.0f;
	_tmp16_[68] = (GLfloat) 0.0f;
	_tmp16_[69] = (GLfloat) 1.0f;
	_tmp16_[70] = (GLfloat) 0.0f;
	_tmp16_[71] = (GLfloat) 0.0f;
	_tmp16_[72] = (GLfloat) 0.0f;
	_tmp16_[73] = (GLfloat) 0.0f;
	_tmp16_[74] = (GLfloat) 0.0f;
	_tmp16_[75] = (GLfloat) 1.0f;
	_tmp16_[76] = (GLfloat) 1.0f;
	_tmp16_[77] = (GLfloat) 0.0f;
	_tmp16_[78] = (GLfloat) 0.0f;
	_tmp16_[79] = _tmp12_;
	_tmp16_[80] = (GLfloat) 0.0f;
	_tmp16_[81] = (GLfloat) 0.0f;
	_tmp16_[82] = (GLfloat) 1.0f;
	_tmp16_[83] = (GLfloat) 1.0f;
	_tmp16_[84] = (GLfloat) 0.3f;
	_tmp16_[85] = (GLfloat) 0.0f;
	_tmp16_[86] = _tmp13_;
	_tmp16_[87] = (GLfloat) 0.0f;
	_tmp16_[88] = (GLfloat) 0.0f;
	_tmp16_[89] = (GLfloat) 1.0f;
	_tmp16_[90] = (GLfloat) 1.0f;
	_tmp16_[91] = (GLfloat) 0.0f;
	_tmp16_[92] = (GLfloat) 0.0f;
	_tmp16_[93] = _tmp14_ + 0.3f;
	_tmp16_[94] = (GLfloat) 0.0f;
	_tmp16_[95] = (GLfloat) 0.0f;
	_tmp16_[96] = (GLfloat) 1.0f;
	_tmp16_[97] = (GLfloat) 1.0f;
	_tmp16_[98] = (GLfloat) (-0.3f);
	_tmp16_[99] = (GLfloat) 0.0f;
	_tmp16_[100] = _tmp15_;
	_tmp16_[101] = (GLfloat) 0.0f;
	_tmp16_[102] = (GLfloat) 0.0f;
	_tmp16_[103] = (GLfloat) 1.0f;
	_tmp16_[104] = (GLfloat) 1.0f;
	vertices = _tmp16_;
	vertices_length1 = 105;
	_vertices_size_ = vertices_length1;
	_tmp17_ = self->priv->_axis_ebo;
	glBindBuffer (GL_ELEMENT_ARRAY_BUFFER, _tmp17_);
	glBufferData (GL_ELEMENT_ARRAY_BUFFER, (GLsizei) ((12 * 2) * sizeof (GLubyte)), elements, GL_STATIC_DRAW);
	_tmp18_ = self->priv->_axis_vbo;
	glBindBuffer (GL_ARRAY_BUFFER, _tmp18_);
	glBufferData (GL_ARRAY_BUFFER, (GLsizei) ((15 * 7) * sizeof (GLfloat)), vertices, GL_STATIC_DRAW);
	self->priv->_axis_updated = FALSE;
	vertices = (g_free (vertices), NULL);
	elements = (g_free (elements), NULL);
}


void soy_bodies_body_calculateTSLV (soybodiesBody* self, GLfloat* vertices, int vertices_length1) {
	gboolean _tmp0_ = FALSE;
	soyscenesScene* _tmp1_;
	GeeHashSet* _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	gboolean _tmp6_;
	g_return_if_fail (self != NULL);
	_tmp1_ = self->scene;
	_tmp2_ = _tmp1_->lights;
	_tmp3_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp2_);
	_tmp4_ = _tmp3_;
	if (_tmp4_ != 0) {
		GLfloat* _tmp5_;
		gint _tmp5__length1;
		_tmp5_ = vertices;
		_tmp5__length1 = vertices_length1;
		_tmp0_ = _tmp5__length1 != 0;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp6_ = _tmp0_;
	if (_tmp6_) {
		GLfloat* _tmp7_ = NULL;
		GLfloat* _inv_mm;
		gint _inv_mm_length1;
		gint __inv_mm_size_;
		dReal* _tmp8_ = NULL;
		dReal* _model_light_pos;
		gint _model_light_pos_length1;
		gint __model_light_pos_size_;
		dReal* _tmp9_ = NULL;
		dReal* _vert_light_pos;
		gint _vert_light_pos_length1;
		gint __vert_light_pos_size_;
		dReal* _tmp10_ = NULL;
		dReal* _binormal;
		gint _binormal_length1;
		gint __binormal_size_;
		GLfloat* _tmp11_;
		gint _tmp11__length1;
		GLfloat* _tmp12_ = NULL;
		struct dxBody* _tmp13_;
		dxMatrix3* _tmp14_ = NULL;
		dxMatrix3* rotation;
		struct dxBody* _tmp15_;
		dxVector3* _tmp16_ = NULL;
		dxVector3* position;
		struct dxBody* _tmp17_;
		dxVector3* _tmp18_ = NULL;
		dxVector3* light_position;
		GLfloat* _tmp29_;
		gint _tmp29__length1;
		dxMatrix3* _tmp30_;
		dReal _tmp31_;
		GLfloat _tmp32_;
		GLfloat* _tmp33_;
		gint _tmp33__length1;
		dxMatrix3* _tmp34_;
		dReal _tmp35_;
		GLfloat _tmp36_;
		GLfloat* _tmp37_;
		gint _tmp37__length1;
		dxMatrix3* _tmp38_;
		dReal _tmp39_;
		GLfloat _tmp40_;
		GLfloat* _tmp41_;
		gint _tmp41__length1;
		GLfloat _tmp42_;
		GLfloat* _tmp43_;
		gint _tmp43__length1;
		dxMatrix3* _tmp44_;
		dReal _tmp45_;
		GLfloat _tmp46_;
		GLfloat* _tmp47_;
		gint _tmp47__length1;
		dxMatrix3* _tmp48_;
		dReal _tmp49_;
		GLfloat _tmp50_;
		GLfloat* _tmp51_;
		gint _tmp51__length1;
		dxMatrix3* _tmp52_;
		dReal _tmp53_;
		GLfloat _tmp54_;
		GLfloat* _tmp55_;
		gint _tmp55__length1;
		GLfloat _tmp56_;
		GLfloat* _tmp57_;
		gint _tmp57__length1;
		dxMatrix3* _tmp58_;
		dReal _tmp59_;
		GLfloat _tmp60_;
		GLfloat* _tmp61_;
		gint _tmp61__length1;
		dxMatrix3* _tmp62_;
		dReal _tmp63_;
		GLfloat _tmp64_;
		GLfloat* _tmp65_;
		gint _tmp65__length1;
		dxMatrix3* _tmp66_;
		dReal _tmp67_;
		GLfloat _tmp68_;
		GLfloat* _tmp69_;
		gint _tmp69__length1;
		GLfloat _tmp70_;
		GLfloat* _tmp71_;
		gint _tmp71__length1;
		dxVector3* _tmp72_;
		dReal _tmp73_;
		GLfloat _tmp74_;
		GLfloat* _tmp75_;
		gint _tmp75__length1;
		dxVector3* _tmp76_;
		dReal _tmp77_;
		GLfloat _tmp78_;
		GLfloat* _tmp79_;
		gint _tmp79__length1;
		dxVector3* _tmp80_;
		dReal _tmp81_;
		GLfloat _tmp82_;
		GLfloat* _tmp83_;
		gint _tmp83__length1;
		GLfloat _tmp84_;
		dReal* _tmp85_;
		gint _tmp85__length1;
		GLfloat* _tmp86_;
		gint _tmp86__length1;
		GLfloat _tmp87_;
		dxVector3* _tmp88_;
		dReal _tmp89_;
		GLfloat* _tmp90_;
		gint _tmp90__length1;
		GLfloat _tmp91_;
		GLfloat* _tmp92_;
		gint _tmp92__length1;
		GLfloat _tmp93_;
		dxVector3* _tmp94_;
		dReal _tmp95_;
		GLfloat* _tmp96_;
		gint _tmp96__length1;
		GLfloat _tmp97_;
		GLfloat* _tmp98_;
		gint _tmp98__length1;
		GLfloat _tmp99_;
		dxVector3* _tmp100_;
		dReal _tmp101_;
		GLfloat* _tmp102_;
		gint _tmp102__length1;
		GLfloat _tmp103_;
		dReal _tmp104_;
		dReal* _tmp105_;
		gint _tmp105__length1;
		GLfloat* _tmp106_;
		gint _tmp106__length1;
		GLfloat _tmp107_;
		dxVector3* _tmp108_;
		dReal _tmp109_;
		GLfloat* _tmp110_;
		gint _tmp110__length1;
		GLfloat _tmp111_;
		GLfloat* _tmp112_;
		gint _tmp112__length1;
		GLfloat _tmp113_;
		dxVector3* _tmp114_;
		dReal _tmp115_;
		GLfloat* _tmp116_;
		gint _tmp116__length1;
		GLfloat _tmp117_;
		GLfloat* _tmp118_;
		gint _tmp118__length1;
		GLfloat _tmp119_;
		dxVector3* _tmp120_;
		dReal _tmp121_;
		GLfloat* _tmp122_;
		gint _tmp122__length1;
		GLfloat _tmp123_;
		dReal _tmp124_;
		dReal* _tmp125_;
		gint _tmp125__length1;
		GLfloat* _tmp126_;
		gint _tmp126__length1;
		GLfloat _tmp127_;
		dxVector3* _tmp128_;
		dReal _tmp129_;
		GLfloat* _tmp130_;
		gint _tmp130__length1;
		GLfloat _tmp131_;
		GLfloat* _tmp132_;
		gint _tmp132__length1;
		GLfloat _tmp133_;
		dxVector3* _tmp134_;
		dReal _tmp135_;
		GLfloat* _tmp136_;
		gint _tmp136__length1;
		GLfloat _tmp137_;
		GLfloat* _tmp138_;
		gint _tmp138__length1;
		GLfloat _tmp139_;
		dxVector3* _tmp140_;
		dReal _tmp141_;
		GLfloat* _tmp142_;
		gint _tmp142__length1;
		GLfloat _tmp143_;
		dReal _tmp144_;
		_tmp7_ = g_new0 (GLfloat, 16);
		_inv_mm = _tmp7_;
		_inv_mm_length1 = 16;
		__inv_mm_size_ = _inv_mm_length1;
		_tmp8_ = g_new0 (dReal, 3);
		_model_light_pos = _tmp8_;
		_model_light_pos_length1 = 3;
		__model_light_pos_size_ = _model_light_pos_length1;
		_tmp9_ = g_new0 (dReal, 3);
		_vert_light_pos = _tmp9_;
		_vert_light_pos_length1 = 3;
		__vert_light_pos_size_ = _vert_light_pos_length1;
		_tmp10_ = g_new0 (dReal, 3);
		_binormal = _tmp10_;
		_binormal_length1 = 3;
		__binormal_size_ = _binormal_length1;
		_tmp11_ = vertices;
		_tmp11__length1 = vertices_length1;
		_tmp12_ = g_new0 (GLfloat, (gint) ((_tmp11__length1 * 3) / 14));
		self->tslvs = (g_free (self->tslvs), NULL);
		self->tslvs = _tmp12_;
		self->tslvs_length1 = (gint) ((_tmp11__length1 * 3) / 14);
		_tmp13_ = self->body;
		_tmp14_ = dBodyGetRotation (_tmp13_);
		rotation = _tmp14_;
		_tmp15_ = self->body;
		_tmp16_ = dBodyGetPosition (_tmp15_);
		position = _tmp16_;
		_tmp17_ = self->body;
		_tmp18_ = dBodyGetPosition (_tmp17_);
		light_position = _tmp18_;
		{
			soyscenesScene* _tmp19_;
			GeeHashSet* _tmp20_;
			GeeIterator* _tmp21_ = NULL;
			GeeIterator* _light_it;
			_tmp19_ = self->scene;
			_tmp20_ = _tmp19_->lights;
			_tmp21_ = gee_abstract_collection_iterator ((GeeAbstractCollection*) _tmp20_);
			_light_it = _tmp21_;
			while (TRUE) {
				GeeIterator* _tmp22_;
				gboolean _tmp23_ = FALSE;
				GeeIterator* _tmp24_;
				gpointer _tmp25_ = NULL;
				soybodiesLight* light;
				soybodiesLight* _tmp26_;
				struct dxBody* _tmp27_;
				dxVector3* _tmp28_ = NULL;
				_tmp22_ = _light_it;
				_tmp23_ = gee_iterator_next (_tmp22_);
				if (!_tmp23_) {
					break;
				}
				_tmp24_ = _light_it;
				_tmp25_ = gee_iterator_get (_tmp24_);
				light = (soybodiesLight*) _tmp25_;
				_tmp26_ = light;
				_tmp27_ = ((soybodiesBody*) _tmp26_)->body;
				_tmp28_ = dBodyGetPosition (_tmp27_);
				light_position = _tmp28_;
				_g_object_unref0 (light);
				break;
			}
			_g_object_unref0 (_light_it);
		}
		_tmp29_ = _inv_mm;
		_tmp29__length1 = _inv_mm_length1;
		_tmp30_ = rotation;
		_tmp31_ = _tmp30_->m0;
		_tmp29_[0] = (GLfloat) _tmp31_;
		_tmp32_ = _tmp29_[0];
		_tmp33_ = _inv_mm;
		_tmp33__length1 = _inv_mm_length1;
		_tmp34_ = rotation;
		_tmp35_ = _tmp34_->m1;
		_tmp33_[1] = (GLfloat) _tmp35_;
		_tmp36_ = _tmp33_[1];
		_tmp37_ = _inv_mm;
		_tmp37__length1 = _inv_mm_length1;
		_tmp38_ = rotation;
		_tmp39_ = _tmp38_->m2;
		_tmp37_[2] = (GLfloat) _tmp39_;
		_tmp40_ = _tmp37_[2];
		_tmp41_ = _inv_mm;
		_tmp41__length1 = _inv_mm_length1;
		_tmp41_[3] = (GLfloat) 0.0;
		_tmp42_ = _tmp41_[3];
		_tmp43_ = _inv_mm;
		_tmp43__length1 = _inv_mm_length1;
		_tmp44_ = rotation;
		_tmp45_ = _tmp44_->m4;
		_tmp43_[4] = (GLfloat) _tmp45_;
		_tmp46_ = _tmp43_[4];
		_tmp47_ = _inv_mm;
		_tmp47__length1 = _inv_mm_length1;
		_tmp48_ = rotation;
		_tmp49_ = _tmp48_->m5;
		_tmp47_[5] = (GLfloat) _tmp49_;
		_tmp50_ = _tmp47_[5];
		_tmp51_ = _inv_mm;
		_tmp51__length1 = _inv_mm_length1;
		_tmp52_ = rotation;
		_tmp53_ = _tmp52_->m6;
		_tmp51_[6] = (GLfloat) _tmp53_;
		_tmp54_ = _tmp51_[6];
		_tmp55_ = _inv_mm;
		_tmp55__length1 = _inv_mm_length1;
		_tmp55_[7] = (GLfloat) 0.0;
		_tmp56_ = _tmp55_[7];
		_tmp57_ = _inv_mm;
		_tmp57__length1 = _inv_mm_length1;
		_tmp58_ = rotation;
		_tmp59_ = _tmp58_->m8;
		_tmp57_[8] = (GLfloat) _tmp59_;
		_tmp60_ = _tmp57_[8];
		_tmp61_ = _inv_mm;
		_tmp61__length1 = _inv_mm_length1;
		_tmp62_ = rotation;
		_tmp63_ = _tmp62_->m9;
		_tmp61_[9] = (GLfloat) _tmp63_;
		_tmp64_ = _tmp61_[9];
		_tmp65_ = _inv_mm;
		_tmp65__length1 = _inv_mm_length1;
		_tmp66_ = rotation;
		_tmp67_ = _tmp66_->ma;
		_tmp65_[10] = (GLfloat) _tmp67_;
		_tmp68_ = _tmp65_[10];
		_tmp69_ = _inv_mm;
		_tmp69__length1 = _inv_mm_length1;
		_tmp69_[11] = (GLfloat) 0.0;
		_tmp70_ = _tmp69_[11];
		_tmp71_ = _inv_mm;
		_tmp71__length1 = _inv_mm_length1;
		_tmp72_ = position;
		_tmp73_ = _tmp72_->x;
		_tmp71_[12] = (GLfloat) (-_tmp73_);
		_tmp74_ = _tmp71_[12];
		_tmp75_ = _inv_mm;
		_tmp75__length1 = _inv_mm_length1;
		_tmp76_ = position;
		_tmp77_ = _tmp76_->y;
		_tmp75_[13] = (GLfloat) (-_tmp77_);
		_tmp78_ = _tmp75_[13];
		_tmp79_ = _inv_mm;
		_tmp79__length1 = _inv_mm_length1;
		_tmp80_ = position;
		_tmp81_ = _tmp80_->z;
		_tmp79_[14] = (GLfloat) (-_tmp81_);
		_tmp82_ = _tmp79_[14];
		_tmp83_ = _inv_mm;
		_tmp83__length1 = _inv_mm_length1;
		_tmp83_[15] = (GLfloat) 1.0;
		_tmp84_ = _tmp83_[15];
		_tmp85_ = _model_light_pos;
		_tmp85__length1 = _model_light_pos_length1;
		_tmp86_ = _inv_mm;
		_tmp86__length1 = _inv_mm_length1;
		_tmp87_ = _tmp86_[0];
		_tmp88_ = light_position;
		_tmp89_ = _tmp88_->x;
		_tmp90_ = _inv_mm;
		_tmp90__length1 = _inv_mm_length1;
		_tmp91_ = _tmp90_[12];
		_tmp92_ = _inv_mm;
		_tmp92__length1 = _inv_mm_length1;
		_tmp93_ = _tmp92_[4];
		_tmp94_ = light_position;
		_tmp95_ = _tmp94_->y;
		_tmp96_ = _inv_mm;
		_tmp96__length1 = _inv_mm_length1;
		_tmp97_ = _tmp96_[13];
		_tmp98_ = _inv_mm;
		_tmp98__length1 = _inv_mm_length1;
		_tmp99_ = _tmp98_[8];
		_tmp100_ = light_position;
		_tmp101_ = _tmp100_->z;
		_tmp102_ = _inv_mm;
		_tmp102__length1 = _inv_mm_length1;
		_tmp103_ = _tmp102_[14];
		_tmp85_[0] = ((_tmp87_ * (_tmp89_ + _tmp91_)) + (_tmp93_ * (_tmp95_ + _tmp97_))) + (_tmp99_ * (_tmp101_ + _tmp103_));
		_tmp104_ = _tmp85_[0];
		_tmp105_ = _model_light_pos;
		_tmp105__length1 = _model_light_pos_length1;
		_tmp106_ = _inv_mm;
		_tmp106__length1 = _inv_mm_length1;
		_tmp107_ = _tmp106_[1];
		_tmp108_ = light_position;
		_tmp109_ = _tmp108_->x;
		_tmp110_ = _inv_mm;
		_tmp110__length1 = _inv_mm_length1;
		_tmp111_ = _tmp110_[12];
		_tmp112_ = _inv_mm;
		_tmp112__length1 = _inv_mm_length1;
		_tmp113_ = _tmp112_[5];
		_tmp114_ = light_position;
		_tmp115_ = _tmp114_->y;
		_tmp116_ = _inv_mm;
		_tmp116__length1 = _inv_mm_length1;
		_tmp117_ = _tmp116_[13];
		_tmp118_ = _inv_mm;
		_tmp118__length1 = _inv_mm_length1;
		_tmp119_ = _tmp118_[9];
		_tmp120_ = light_position;
		_tmp121_ = _tmp120_->z;
		_tmp122_ = _inv_mm;
		_tmp122__length1 = _inv_mm_length1;
		_tmp123_ = _tmp122_[14];
		_tmp105_[1] = ((_tmp107_ * (_tmp109_ + _tmp111_)) + (_tmp113_ * (_tmp115_ + _tmp117_))) + (_tmp119_ * (_tmp121_ + _tmp123_));
		_tmp124_ = _tmp105_[1];
		_tmp125_ = _model_light_pos;
		_tmp125__length1 = _model_light_pos_length1;
		_tmp126_ = _inv_mm;
		_tmp126__length1 = _inv_mm_length1;
		_tmp127_ = _tmp126_[2];
		_tmp128_ = light_position;
		_tmp129_ = _tmp128_->x;
		_tmp130_ = _inv_mm;
		_tmp130__length1 = _inv_mm_length1;
		_tmp131_ = _tmp130_[12];
		_tmp132_ = _inv_mm;
		_tmp132__length1 = _inv_mm_length1;
		_tmp133_ = _tmp132_[6];
		_tmp134_ = light_position;
		_tmp135_ = _tmp134_->y;
		_tmp136_ = _inv_mm;
		_tmp136__length1 = _inv_mm_length1;
		_tmp137_ = _tmp136_[13];
		_tmp138_ = _inv_mm;
		_tmp138__length1 = _inv_mm_length1;
		_tmp139_ = _tmp138_[10];
		_tmp140_ = light_position;
		_tmp141_ = _tmp140_->z;
		_tmp142_ = _inv_mm;
		_tmp142__length1 = _inv_mm_length1;
		_tmp143_ = _tmp142_[14];
		_tmp125_[2] = ((_tmp127_ * (_tmp129_ + _tmp131_)) + (_tmp133_ * (_tmp135_ + _tmp137_))) + (_tmp139_ * (_tmp141_ + _tmp143_));
		_tmp144_ = _tmp125_[2];
		{
			gint i;
			i = 0;
			{
				gboolean _tmp145_;
				_tmp145_ = TRUE;
				while (TRUE) {
					gboolean _tmp146_;
					GLfloat* _tmp148_;
					gint _tmp148__length1;
					dReal* _tmp149_;
					gint _tmp149__length1;
					dReal* _tmp150_;
					gint _tmp150__length1;
					dReal _tmp151_;
					GLfloat* _tmp152_;
					gint _tmp152__length1;
					gint _tmp153_;
					GLfloat _tmp154_;
					dReal _tmp155_;
					dReal* _tmp156_;
					gint _tmp156__length1;
					dReal* _tmp157_;
					gint _tmp157__length1;
					dReal _tmp158_;
					GLfloat* _tmp159_;
					gint _tmp159__length1;
					gint _tmp160_;
					GLfloat _tmp161_;
					dReal _tmp162_;
					dReal* _tmp163_;
					gint _tmp163__length1;
					dReal* _tmp164_;
					gint _tmp164__length1;
					dReal _tmp165_;
					GLfloat* _tmp166_;
					gint _tmp166__length1;
					gint _tmp167_;
					GLfloat _tmp168_;
					dReal _tmp169_;
					dReal* _tmp170_;
					gint _tmp170__length1;
					GLfloat* _tmp171_;
					gint _tmp171__length1;
					gint _tmp172_;
					GLfloat _tmp173_;
					GLfloat* _tmp174_;
					gint _tmp174__length1;
					gint _tmp175_;
					GLfloat _tmp176_;
					GLfloat* _tmp177_;
					gint _tmp177__length1;
					gint _tmp178_;
					GLfloat _tmp179_;
					GLfloat* _tmp180_;
					gint _tmp180__length1;
					gint _tmp181_;
					GLfloat _tmp182_;
					dReal _tmp183_;
					dReal* _tmp184_;
					gint _tmp184__length1;
					GLfloat* _tmp185_;
					gint _tmp185__length1;
					gint _tmp186_;
					GLfloat _tmp187_;
					GLfloat* _tmp188_;
					gint _tmp188__length1;
					gint _tmp189_;
					GLfloat _tmp190_;
					GLfloat* _tmp191_;
					gint _tmp191__length1;
					gint _tmp192_;
					GLfloat _tmp193_;
					GLfloat* _tmp194_;
					gint _tmp194__length1;
					gint _tmp195_;
					GLfloat _tmp196_;
					dReal _tmp197_;
					dReal* _tmp198_;
					gint _tmp198__length1;
					GLfloat* _tmp199_;
					gint _tmp199__length1;
					gint _tmp200_;
					GLfloat _tmp201_;
					GLfloat* _tmp202_;
					gint _tmp202__length1;
					gint _tmp203_;
					GLfloat _tmp204_;
					GLfloat* _tmp205_;
					gint _tmp205__length1;
					gint _tmp206_;
					GLfloat _tmp207_;
					GLfloat* _tmp208_;
					gint _tmp208__length1;
					gint _tmp209_;
					GLfloat _tmp210_;
					dReal _tmp211_;
					GLfloat* _tmp212_;
					gint _tmp212__length1;
					gint _tmp213_;
					dReal* _tmp214_;
					gint _tmp214__length1;
					dReal _tmp215_;
					dReal* _tmp216_;
					gint _tmp216__length1;
					dReal _tmp217_;
					dReal* _tmp218_;
					gint _tmp218__length1;
					dReal _tmp219_;
					dReal* _tmp220_;
					gint _tmp220__length1;
					dReal _tmp221_;
					dReal* _tmp222_;
					gint _tmp222__length1;
					dReal _tmp223_;
					dReal* _tmp224_;
					gint _tmp224__length1;
					dReal _tmp225_;
					GLfloat _tmp226_;
					GLfloat* _tmp227_;
					gint _tmp227__length1;
					gint _tmp228_;
					dReal* _tmp229_;
					gint _tmp229__length1;
					dReal _tmp230_;
					GLfloat* _tmp231_;
					gint _tmp231__length1;
					gint _tmp232_;
					GLfloat _tmp233_;
					dReal* _tmp234_;
					gint _tmp234__length1;
					dReal _tmp235_;
					GLfloat* _tmp236_;
					gint _tmp236__length1;
					gint _tmp237_;
					GLfloat _tmp238_;
					dReal* _tmp239_;
					gint _tmp239__length1;
					dReal _tmp240_;
					GLfloat* _tmp241_;
					gint _tmp241__length1;
					gint _tmp242_;
					GLfloat _tmp243_;
					GLfloat _tmp244_;
					GLfloat* _tmp245_;
					gint _tmp245__length1;
					gint _tmp246_;
					dReal* _tmp247_;
					gint _tmp247__length1;
					dReal _tmp248_;
					GLfloat* _tmp249_;
					gint _tmp249__length1;
					gint _tmp250_;
					GLfloat _tmp251_;
					dReal* _tmp252_;
					gint _tmp252__length1;
					dReal _tmp253_;
					GLfloat* _tmp254_;
					gint _tmp254__length1;
					gint _tmp255_;
					GLfloat _tmp256_;
					dReal* _tmp257_;
					gint _tmp257__length1;
					dReal _tmp258_;
					GLfloat* _tmp259_;
					gint _tmp259__length1;
					gint _tmp260_;
					GLfloat _tmp261_;
					GLfloat _tmp262_;
					_tmp146_ = _tmp145_;
					if (!_tmp146_) {
						gint _tmp147_;
						_tmp147_ = i;
						i = _tmp147_ + 1;
					}
					_tmp145_ = FALSE;
					_tmp148_ = vertices;
					_tmp148__length1 = vertices_length1;
					if (!(i <= ((_tmp148__length1 / 14) - 1))) {
						break;
					}
					_tmp149_ = _vert_light_pos;
					_tmp149__length1 = _vert_light_pos_length1;
					_tmp150_ = _model_light_pos;
					_tmp150__length1 = _model_light_pos_length1;
					_tmp151_ = _tmp150_[0];
					_tmp152_ = vertices;
					_tmp152__length1 = vertices_length1;
					_tmp153_ = i;
					_tmp154_ = _tmp152_[_tmp153_ * 11];
					_tmp149_[0] = _tmp151_ - _tmp154_;
					_tmp155_ = _tmp149_[0];
					_tmp156_ = _vert_light_pos;
					_tmp156__length1 = _vert_light_pos_length1;
					_tmp157_ = _model_light_pos;
					_tmp157__length1 = _model_light_pos_length1;
					_tmp158_ = _tmp157_[1];
					_tmp159_ = vertices;
					_tmp159__length1 = vertices_length1;
					_tmp160_ = i;
					_tmp161_ = _tmp159_[(_tmp160_ * 11) + 1];
					_tmp156_[1] = _tmp158_ - _tmp161_;
					_tmp162_ = _tmp156_[1];
					_tmp163_ = _vert_light_pos;
					_tmp163__length1 = _vert_light_pos_length1;
					_tmp164_ = _model_light_pos;
					_tmp164__length1 = _model_light_pos_length1;
					_tmp165_ = _tmp164_[2];
					_tmp166_ = vertices;
					_tmp166__length1 = vertices_length1;
					_tmp167_ = i;
					_tmp168_ = _tmp166_[(_tmp167_ * 11) + 2];
					_tmp163_[2] = _tmp165_ - _tmp168_;
					_tmp169_ = _tmp163_[2];
					_tmp170_ = _binormal;
					_tmp170__length1 = _binormal_length1;
					_tmp171_ = vertices;
					_tmp171__length1 = vertices_length1;
					_tmp172_ = i;
					_tmp173_ = _tmp171_[(_tmp172_ * 11) + 9];
					_tmp174_ = vertices;
					_tmp174__length1 = vertices_length1;
					_tmp175_ = i;
					_tmp176_ = _tmp174_[(_tmp175_ * 11) + 5];
					_tmp177_ = vertices;
					_tmp177__length1 = vertices_length1;
					_tmp178_ = i;
					_tmp179_ = _tmp177_[(_tmp178_ * 11) + 10];
					_tmp180_ = vertices;
					_tmp180__length1 = vertices_length1;
					_tmp181_ = i;
					_tmp182_ = _tmp180_[(_tmp181_ * 11) + 4];
					_tmp170_[0] = (dReal) ((_tmp173_ * _tmp176_) - (_tmp179_ * _tmp182_));
					_tmp183_ = _tmp170_[0];
					_tmp184_ = _binormal;
					_tmp184__length1 = _binormal_length1;
					_tmp185_ = vertices;
					_tmp185__length1 = vertices_length1;
					_tmp186_ = i;
					_tmp187_ = _tmp185_[(_tmp186_ * 11) + 10];
					_tmp188_ = vertices;
					_tmp188__length1 = vertices_length1;
					_tmp189_ = i;
					_tmp190_ = _tmp188_[(_tmp189_ * 11) + 3];
					_tmp191_ = vertices;
					_tmp191__length1 = vertices_length1;
					_tmp192_ = i;
					_tmp193_ = _tmp191_[(_tmp192_ * 11) + 8];
					_tmp194_ = vertices;
					_tmp194__length1 = vertices_length1;
					_tmp195_ = i;
					_tmp196_ = _tmp194_[(_tmp195_ * 11) + 5];
					_tmp184_[1] = (dReal) ((_tmp187_ * _tmp190_) - (_tmp193_ * _tmp196_));
					_tmp197_ = _tmp184_[1];
					_tmp198_ = _binormal;
					_tmp198__length1 = _binormal_length1;
					_tmp199_ = vertices;
					_tmp199__length1 = vertices_length1;
					_tmp200_ = i;
					_tmp201_ = _tmp199_[(_tmp200_ * 11) + 8];
					_tmp202_ = vertices;
					_tmp202__length1 = vertices_length1;
					_tmp203_ = i;
					_tmp204_ = _tmp202_[(_tmp203_ * 11) + 4];
					_tmp205_ = vertices;
					_tmp205__length1 = vertices_length1;
					_tmp206_ = i;
					_tmp207_ = _tmp205_[(_tmp206_ * 11) + 9];
					_tmp208_ = vertices;
					_tmp208__length1 = vertices_length1;
					_tmp209_ = i;
					_tmp210_ = _tmp208_[(_tmp209_ * 11) + 3];
					_tmp198_[2] = (dReal) ((_tmp201_ * _tmp204_) - (_tmp207_ * _tmp210_));
					_tmp211_ = _tmp198_[2];
					_tmp212_ = self->tslvs;
					_tmp212__length1 = self->tslvs_length1;
					_tmp213_ = i;
					_tmp214_ = _vert_light_pos;
					_tmp214__length1 = _vert_light_pos_length1;
					_tmp215_ = _tmp214_[0];
					_tmp216_ = _binormal;
					_tmp216__length1 = _binormal_length1;
					_tmp217_ = _tmp216_[0];
					_tmp218_ = _vert_light_pos;
					_tmp218__length1 = _vert_light_pos_length1;
					_tmp219_ = _tmp218_[1];
					_tmp220_ = _binormal;
					_tmp220__length1 = _binormal_length1;
					_tmp221_ = _tmp220_[1];
					_tmp222_ = _vert_light_pos;
					_tmp222__length1 = _vert_light_pos_length1;
					_tmp223_ = _tmp222_[2];
					_tmp224_ = _binormal;
					_tmp224__length1 = _binormal_length1;
					_tmp225_ = _tmp224_[2];
					_tmp212_[_tmp213_ * 3] = (GLfloat) (((_tmp215_ * _tmp217_) + (_tmp219_ * _tmp221_)) + (_tmp223_ * _tmp225_));
					_tmp226_ = _tmp212_[_tmp213_ * 3];
					_tmp227_ = self->tslvs;
					_tmp227__length1 = self->tslvs_length1;
					_tmp228_ = i;
					_tmp229_ = _vert_light_pos;
					_tmp229__length1 = _vert_light_pos_length1;
					_tmp230_ = _tmp229_[0];
					_tmp231_ = vertices;
					_tmp231__length1 = vertices_length1;
					_tmp232_ = i;
					_tmp233_ = _tmp231_[(_tmp232_ * 11) + 8];
					_tmp234_ = _vert_light_pos;
					_tmp234__length1 = _vert_light_pos_length1;
					_tmp235_ = _tmp234_[1];
					_tmp236_ = vertices;
					_tmp236__length1 = vertices_length1;
					_tmp237_ = i;
					_tmp238_ = _tmp236_[(_tmp237_ * 11) + 9];
					_tmp239_ = _vert_light_pos;
					_tmp239__length1 = _vert_light_pos_length1;
					_tmp240_ = _tmp239_[2];
					_tmp241_ = vertices;
					_tmp241__length1 = vertices_length1;
					_tmp242_ = i;
					_tmp243_ = _tmp241_[(_tmp242_ * 11) + 10];
					_tmp227_[(_tmp228_ * 3) + 1] = (GLfloat) (((_tmp230_ * _tmp233_) + (_tmp235_ * _tmp238_)) + (_tmp240_ * _tmp243_));
					_tmp244_ = _tmp227_[(_tmp228_ * 3) + 1];
					_tmp245_ = self->tslvs;
					_tmp245__length1 = self->tslvs_length1;
					_tmp246_ = i;
					_tmp247_ = _vert_light_pos;
					_tmp247__length1 = _vert_light_pos_length1;
					_tmp248_ = _tmp247_[0];
					_tmp249_ = vertices;
					_tmp249__length1 = vertices_length1;
					_tmp250_ = i;
					_tmp251_ = _tmp249_[(_tmp250_ * 11) + 3];
					_tmp252_ = _vert_light_pos;
					_tmp252__length1 = _vert_light_pos_length1;
					_tmp253_ = _tmp252_[1];
					_tmp254_ = vertices;
					_tmp254__length1 = vertices_length1;
					_tmp255_ = i;
					_tmp256_ = _tmp254_[(_tmp255_ * 11) + 4];
					_tmp257_ = _vert_light_pos;
					_tmp257__length1 = _vert_light_pos_length1;
					_tmp258_ = _tmp257_[2];
					_tmp259_ = vertices;
					_tmp259__length1 = vertices_length1;
					_tmp260_ = i;
					_tmp261_ = _tmp259_[(_tmp260_ * 11) + 5];
					_tmp245_[(_tmp246_ * 3) + 2] = (GLfloat) (((_tmp248_ * _tmp251_) + (_tmp253_ * _tmp256_)) + (_tmp258_ * _tmp261_));
					_tmp262_ = _tmp245_[(_tmp246_ * 3) + 2];
				}
			}
		}
		_binormal = (g_free (_binormal), NULL);
		_vert_light_pos = (g_free (_vert_light_pos), NULL);
		_model_light_pos = (g_free (_model_light_pos), NULL);
		_inv_mm = (g_free (_inv_mm), NULL);
	}
}


static gfloat* _float_dup (gfloat* self) {
	gfloat* dup;
	dup = g_new0 (gfloat, 1);
	memcpy (dup, self, sizeof (gfloat));
	return dup;
}


GeeHashMap* soy_bodies_body_get_tags (soybodiesBody* self) {
	GeeHashMap* result;
	soyscenesScene* _tmp0_;
	GeeHashMap* _tmp2_;
	GeeHashMap* _tmp3_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ == NULL) {
		GeeHashMap* _tmp1_;
		_tmp1_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, G_TYPE_FLOAT, (GBoxedCopyFunc) _float_dup, g_free, NULL, NULL, NULL);
		result = _tmp1_;
		return result;
	}
	_tmp2_ = self->tags_;
	_tmp3_ = _g_object_ref0 (_tmp2_);
	result = _tmp3_;
	return result;
}


gfloat soy_bodies_body_get_density (soybodiesBody* self) {
	gfloat result;
	gfloat _tmp0_;
	g_return_val_if_fail (self != NULL, 0.0F);
	_tmp0_ = self->priv->_density;
	result = _tmp0_;
	return result;
}


void soy_bodies_body_set_density (soybodiesBody* self, gfloat value) {
	gfloat _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	if (_tmp0_ >= ((gfloat) 0)) {
		gfloat _tmp1_;
		soyscenesScene* _tmp2_;
		gfloat _tmp3_;
		soyscenesScene* _tmp4_;
		_tmp1_ = value;
		self->priv->_density = _tmp1_;
		_tmp2_ = self->scene;
		if (_tmp2_ != NULL) {
			g_rw_lock_writer_lock (&soy_scenes__stepLock);
		}
		_tmp3_ = value;
		soy_bodies_body_set_mass (self, _tmp3_);
		_tmp4_ = self->scene;
		if (_tmp4_ != NULL) {
			g_rw_lock_writer_unlock (&soy_scenes__stepLock);
		}
	}
	g_object_notify ((GObject *) self, "density");
}


static void __soy_bodies_body_position_set_soy_atoms_position_on_set (soyatomsPosition* _sender, soyatomsPosition* position, gpointer self) {
	_soy_bodies_body_position_set (self, position);
}


static void __soy_bodies_body_position_weak_gweak_notify (gpointer self, GObject* object) {
	_soy_bodies_body_position_weak (self, object);
}


soyatomsPosition* soy_bodies_body_get_position (soybodiesBody* self) {
	soyatomsPosition* result;
	dxVector3* v = NULL;
	soyatomsPosition* _tmp0_;
	soyatomsPosition* _tmp1_;
	soyatomsPosition* value;
	soyscenesScene* _tmp2_;
	gboolean _tmp7_ = FALSE;
	gboolean _tmp8_ = FALSE;
	gboolean _tmp9_ = FALSE;
	soyatomsPosition* _tmp10_;
	gboolean _tmp16_;
	gboolean _tmp22_;
	gboolean _tmp28_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_position_obj;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	value = _tmp1_;
	_tmp2_ = self->scene;
	if (_tmp2_ == NULL) {
		struct dxGeom* _tmp3_;
		dxVector3* _tmp4_ = NULL;
		_tmp3_ = self->geom;
		_tmp4_ = dGeomGetPosition (_tmp3_);
		v = _tmp4_;
	} else {
		struct dxBody* _tmp5_;
		dxVector3* _tmp6_ = NULL;
		_tmp5_ = self->body;
		_tmp6_ = dBodyGetPosition (_tmp5_);
		v = _tmp6_;
	}
	_tmp10_ = value;
	if (_tmp10_ == NULL) {
		_tmp9_ = TRUE;
	} else {
		dxVector3* _tmp11_;
		dReal _tmp12_;
		soyatomsPosition* _tmp13_;
		gfloat _tmp14_;
		gfloat _tmp15_;
		_tmp11_ = v;
		_tmp12_ = _tmp11_->x;
		_tmp13_ = value;
		_tmp14_ = soy_atoms_position_get_x (_tmp13_);
		_tmp15_ = _tmp14_;
		_tmp9_ = ((gfloat) _tmp12_) != _tmp15_;
	}
	_tmp16_ = _tmp9_;
	if (_tmp16_) {
		_tmp8_ = TRUE;
	} else {
		dxVector3* _tmp17_;
		dReal _tmp18_;
		soyatomsPosition* _tmp19_;
		gfloat _tmp20_;
		gfloat _tmp21_;
		_tmp17_ = v;
		_tmp18_ = _tmp17_->y;
		_tmp19_ = value;
		_tmp20_ = soy_atoms_position_get_y (_tmp19_);
		_tmp21_ = _tmp20_;
		_tmp8_ = ((gfloat) _tmp18_) != _tmp21_;
	}
	_tmp22_ = _tmp8_;
	if (_tmp22_) {
		_tmp7_ = TRUE;
	} else {
		dxVector3* _tmp23_;
		dReal _tmp24_;
		soyatomsPosition* _tmp25_;
		gfloat _tmp26_;
		gfloat _tmp27_;
		_tmp23_ = v;
		_tmp24_ = _tmp23_->z;
		_tmp25_ = value;
		_tmp26_ = soy_atoms_position_get_z (_tmp25_);
		_tmp27_ = _tmp26_;
		_tmp7_ = ((gfloat) _tmp24_) != _tmp27_;
	}
	_tmp28_ = _tmp7_;
	if (_tmp28_) {
		soyatomsPosition* _tmp29_;
		dxVector3* _tmp33_;
		dReal _tmp34_;
		dxVector3* _tmp35_;
		dReal _tmp36_;
		dxVector3* _tmp37_;
		dReal _tmp38_;
		soyatomsPosition* _tmp39_;
		soyatomsPosition* _tmp40_;
		soyatomsPosition* _tmp41_;
		soyatomsPosition* _tmp42_;
		_tmp29_ = value;
		if (!(_tmp29_ == NULL)) {
			soyatomsPosition* _tmp30_;
			guint _tmp31_ = 0U;
			soyatomsPosition* _tmp32_;
			_tmp30_ = self->priv->_position_obj;
			g_signal_parse_name ("on-set", SOY_ATOMS_TYPE_POSITION, &_tmp31_, NULL, FALSE);
			g_signal_handlers_disconnect_matched (_tmp30_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp31_, 0, NULL, (GCallback) __soy_bodies_body_position_set_soy_atoms_position_on_set, self);
			_tmp32_ = self->priv->_position_obj;
			g_object_weak_unref ((GObject*) _tmp32_, __soy_bodies_body_position_weak_gweak_notify, self);
		}
		_tmp33_ = v;
		_tmp34_ = _tmp33_->x;
		_tmp35_ = v;
		_tmp36_ = _tmp35_->y;
		_tmp37_ = v;
		_tmp38_ = _tmp37_->z;
		_tmp39_ = soy_atoms_position_new ((gfloat) _tmp34_, (gfloat) _tmp36_, (gfloat) _tmp38_);
		_g_object_unref0 (value);
		value = _tmp39_;
		_tmp40_ = value;
		g_signal_connect_object (_tmp40_, "on-set", (GCallback) __soy_bodies_body_position_set_soy_atoms_position_on_set, self, 0);
		_tmp41_ = value;
		g_object_weak_ref ((GObject*) _tmp41_, __soy_bodies_body_position_weak_gweak_notify, self);
		_tmp42_ = value;
		self->priv->_position_obj = _tmp42_;
	}
	result = value;
	return result;
}


void soy_bodies_body_set_position (soybodiesBody* self, soyatomsPosition* value) {
	soyatomsPosition* _tmp0_;
	soyatomsPosition* _tmp1_;
	soyatomsPosition* _tmp5_;
	soyatomsPosition* _tmp6_;
	soyatomsPosition* _tmp7_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_soy_bodies_body_position_set (self, _tmp0_);
	_tmp1_ = self->priv->_position_obj;
	if (_tmp1_ != NULL) {
		soyatomsPosition* _tmp2_;
		guint _tmp3_ = 0U;
		soyatomsPosition* _tmp4_;
		_tmp2_ = self->priv->_position_obj;
		g_signal_parse_name ("on-set", SOY_ATOMS_TYPE_POSITION, &_tmp3_, NULL, FALSE);
		g_signal_handlers_disconnect_matched (_tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, 0, NULL, (GCallback) __soy_bodies_body_position_set_soy_atoms_position_on_set, self);
		_tmp4_ = self->priv->_position_obj;
		g_object_weak_unref ((GObject*) _tmp4_, __soy_bodies_body_position_weak_gweak_notify, self);
	}
	_tmp5_ = value;
	self->priv->_position_obj = _tmp5_;
	_tmp6_ = value;
	g_signal_connect_object (_tmp6_, "on-set", (GCallback) __soy_bodies_body_position_set_soy_atoms_position_on_set, self, 0);
	_tmp7_ = value;
	g_object_weak_ref ((GObject*) _tmp7_, __soy_bodies_body_position_weak_gweak_notify, self);
	g_object_notify ((GObject *) self, "position");
}


static void __soy_bodies_body_rotation_set_soy_atoms_rotation_on_set (soyatomsRotation* _sender, soyatomsRotation* Rotation, gpointer self) {
	_soy_bodies_body_rotation_set (self, Rotation);
}


static void __soy_bodies_body_rotation_weak_gweak_notify (gpointer self, GObject* object) {
	_soy_bodies_body_rotation_weak (self, object);
}


soyatomsRotation* soy_bodies_body_get_rotation (soybodiesBody* self) {
	soyatomsRotation* result;
	soyscenesScene* _tmp0_;
	soyatomsRotation* _tmp2_;
	struct dxBody* _tmp6_;
	dxMatrix3* _tmp7_ = NULL;
	dxMatrix3* v;
	dxMatrix3* _tmp8_;
	dReal _tmp9_;
	gfloat _tmp10_ = 0.0F;
	dxMatrix3* _tmp11_;
	dReal _tmp12_;
	dxMatrix3* _tmp13_;
	dReal _tmp14_;
	gfloat _tmp15_ = 0.0F;
	dxMatrix3* _tmp16_;
	dReal _tmp17_;
	dxMatrix3* _tmp18_;
	dReal _tmp19_;
	gfloat _tmp20_ = 0.0F;
	soyatomsRotation* _tmp21_;
	soyatomsRotation* value;
	soyatomsRotation* _tmp22_;
	soyatomsRotation* _tmp23_;
	soyatomsRotation* _tmp24_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ == NULL) {
		soyatomsRotation* _tmp1_;
		_tmp1_ = soy_atoms_rotation_new (0.0f, 0.0f, 0.0f);
		result = _tmp1_;
		return result;
	}
	_tmp2_ = self->priv->_rotation_obj;
	if (_tmp2_ != NULL) {
		soyatomsRotation* _tmp3_;
		guint _tmp4_ = 0U;
		soyatomsRotation* _tmp5_;
		_tmp3_ = self->priv->_rotation_obj;
		g_signal_parse_name ("on-set", SOY_ATOMS_TYPE_ROTATION, &_tmp4_, NULL, FALSE);
		g_signal_handlers_disconnect_matched (_tmp3_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp4_, 0, NULL, (GCallback) __soy_bodies_body_rotation_set_soy_atoms_rotation_on_set, self);
		_tmp5_ = self->priv->_rotation_obj;
		g_object_weak_unref ((GObject*) _tmp5_, __soy_bodies_body_rotation_weak_gweak_notify, self);
	}
	g_rw_lock_reader_lock (&soy_scenes__stepLock);
	_tmp6_ = self->body;
	_tmp7_ = dBodyGetRotation (_tmp6_);
	v = _tmp7_;
	_tmp8_ = v;
	_tmp9_ = _tmp8_->m2;
	_tmp10_ = asinf ((-1) * ((gfloat) _tmp9_));
	_tmp11_ = v;
	_tmp12_ = _tmp11_->m1;
	_tmp13_ = v;
	_tmp14_ = _tmp13_->m0;
	_tmp15_ = atan2f ((gfloat) _tmp12_, (gfloat) _tmp14_);
	_tmp16_ = v;
	_tmp17_ = _tmp16_->m6;
	_tmp18_ = v;
	_tmp19_ = _tmp18_->ma;
	_tmp20_ = atan2f ((gfloat) _tmp17_, (gfloat) _tmp19_);
	_tmp21_ = soy_atoms_rotation_new (_tmp10_, _tmp15_, _tmp20_);
	value = _tmp21_;
	g_rw_lock_reader_unlock (&soy_scenes__stepLock);
	_tmp22_ = value;
	g_signal_connect_object (_tmp22_, "on-set", (GCallback) __soy_bodies_body_rotation_set_soy_atoms_rotation_on_set, self, 0);
	_tmp23_ = value;
	g_object_weak_ref ((GObject*) _tmp23_, __soy_bodies_body_rotation_weak_gweak_notify, self);
	_tmp24_ = value;
	self->priv->_rotation_obj = _tmp24_;
	result = value;
	return result;
}


void soy_bodies_body_set_rotation (soybodiesBody* self, soyatomsRotation* value) {
	soyatomsRotation* _tmp0_;
	soyatomsRotation* _tmp1_;
	soyatomsRotation* _tmp5_;
	soyatomsRotation* _tmp6_;
	soyatomsRotation* _tmp7_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_soy_bodies_body_rotation_set (self, _tmp0_);
	_tmp1_ = self->priv->_rotation_obj;
	if (_tmp1_ != NULL) {
		soyatomsRotation* _tmp2_;
		guint _tmp3_ = 0U;
		soyatomsRotation* _tmp4_;
		_tmp2_ = self->priv->_rotation_obj;
		g_signal_parse_name ("on-set", SOY_ATOMS_TYPE_ROTATION, &_tmp3_, NULL, FALSE);
		g_signal_handlers_disconnect_matched (_tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, 0, NULL, (GCallback) __soy_bodies_body_rotation_set_soy_atoms_rotation_on_set, self);
		_tmp4_ = self->priv->_rotation_obj;
		g_object_weak_unref ((GObject*) _tmp4_, __soy_bodies_body_rotation_weak_gweak_notify, self);
	}
	_tmp5_ = value;
	self->priv->_rotation_obj = _tmp5_;
	_tmp6_ = value;
	g_signal_connect_object (_tmp6_, "on-set", (GCallback) __soy_bodies_body_rotation_set_soy_atoms_rotation_on_set, self, 0);
	_tmp7_ = value;
	g_object_weak_ref ((GObject*) _tmp7_, __soy_bodies_body_rotation_weak_gweak_notify, self);
	g_object_notify ((GObject *) self, "rotation");
}


soyatomsVector* soy_bodies_body_get_velocity (soybodiesBody* self) {
	soyatomsVector* result;
	soyscenesScene* _tmp0_;
	soyatomsVector* _tmp2_;
	soyatomsVector* value;
	struct dxBody* _tmp3_;
	dxVector3* _tmp4_ = NULL;
	dxVector3* vel;
	soyatomsVector* _tmp5_;
	dxVector3* _tmp6_;
	dReal _tmp7_;
	soyatomsVector* _tmp8_;
	dxVector3* _tmp9_;
	dReal _tmp10_;
	soyatomsVector* _tmp11_;
	dxVector3* _tmp12_;
	dReal _tmp13_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->scene;
	if (_tmp0_ == NULL) {
		soyatomsVector* _tmp1_;
		_tmp1_ = soy_atoms_vector_new (0.0f, 0.0f, 0.0f);
		result = _tmp1_;
		return result;
	}
	_tmp2_ = soy_atoms_vector_new (0.0f, 0.0f, 0.0f);
	value = _tmp2_;
	g_rw_lock_reader_lock (&soy_scenes__stepLock);
	_tmp3_ = self->body;
	_tmp4_ = dBodyGetLinearVel (_tmp3_);
	vel = _tmp4_;
	_tmp5_ = value;
	_tmp6_ = vel;
	_tmp7_ = _tmp6_->x;
	soy_atoms_vector_set_x (_tmp5_, (gfloat) _tmp7_);
	_tmp8_ = value;
	_tmp9_ = vel;
	_tmp10_ = _tmp9_->y;
	soy_atoms_vector_set_y (_tmp8_, (gfloat) _tmp10_);
	_tmp11_ = value;
	_tmp12_ = vel;
	_tmp13_ = _tmp12_->z;
	soy_atoms_vector_set_z (_tmp11_, (gfloat) _tmp13_);
	g_rw_lock_reader_unlock (&soy_scenes__stepLock);
	result = value;
	return result;
}


void soy_bodies_body_set_velocity (soybodiesBody* self, soyatomsVector* value) {
	struct dxBody* _tmp0_;
	soyatomsVector* _tmp1_;
	gfloat _tmp2_;
	gfloat _tmp3_;
	soyatomsVector* _tmp4_;
	gfloat _tmp5_;
	gfloat _tmp6_;
	soyatomsVector* _tmp7_;
	gfloat _tmp8_;
	gfloat _tmp9_;
	g_return_if_fail (self != NULL);
	g_rw_lock_writer_lock (&soy_scenes__stepLock);
	_tmp0_ = self->body;
	_tmp1_ = value;
	_tmp2_ = soy_atoms_vector_get_x (_tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = value;
	_tmp5_ = soy_atoms_vector_get_y (_tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = value;
	_tmp8_ = soy_atoms_vector_get_z (_tmp7_);
	_tmp9_ = _tmp8_;
	dBodySetLinearVel (_tmp0_, (dReal) _tmp3_, (dReal) _tmp6_, (dReal) _tmp9_);
	g_rw_lock_writer_unlock (&soy_scenes__stepLock);
	g_object_notify ((GObject *) self, "velocity");
}


gfloat soy_bodies_body_get_col_radius (soybodiesBody* self) {
	g_return_val_if_fail (self != NULL, 0.0F);
	return SOY_BODIES_BODY_GET_CLASS (self)->get_col_radius (self);
}


static gfloat soy_bodies_body_real_get_col_radius (soybodiesBody* base) {
	gfloat result;
	soybodiesBody* self;
	GLfloat _tmp0_;
	self = base;
	_tmp0_ = self->priv->_col_radius;
	result = (gfloat) _tmp0_;
	return result;
}


gboolean soy_bodies_body_get_axis (soybodiesBody* self) {
	gboolean result;
	gboolean _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->priv->_axis;
	result = _tmp0_;
	return result;
}


void soy_bodies_body_set_axis (soybodiesBody* self, gboolean value) {
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	g_mutex_lock (&self->mutex);
	_tmp0_ = value;
	self->priv->_axis = _tmp0_;
	g_mutex_unlock (&self->mutex);
	g_object_notify ((GObject *) self, "axis");
}


static void __soy_bodies_body_axis_size_set_soy_atoms_size_on_set (soyatomsSize* _sender, soyatomsSize* size, gpointer self) {
	_soy_bodies_body_axis_size_set (self, size);
}


static void __soy_bodies_body_axis_size_weak_gweak_notify (gpointer self, GObject* object) {
	_soy_bodies_body_axis_size_weak (self, object);
}


soyatomsSize* soy_bodies_body_get_axis_size (soybodiesBody* self) {
	soyatomsSize* result;
	soyatomsSize* _tmp0_;
	soyatomsSize* _tmp1_;
	soyatomsSize* value;
	soyatomsSize* _tmp2_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_axis_size_obj;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	value = _tmp1_;
	_tmp2_ = value;
	if (_tmp2_ == NULL) {
		GLfloat _tmp3_;
		GLfloat _tmp4_;
		GLfloat _tmp5_;
		soyatomsSize* _tmp6_;
		soyatomsSize* _tmp7_;
		soyatomsSize* _tmp8_;
		soyatomsSize* _tmp9_;
		_tmp3_ = self->priv->_axis_x;
		_tmp4_ = self->priv->_axis_y;
		_tmp5_ = self->priv->_axis_z;
		_tmp6_ = soy_atoms_size_new ((gfloat) _tmp3_, (gfloat) _tmp4_, (gfloat) _tmp5_);
		_g_object_unref0 (value);
		value = _tmp6_;
		_tmp7_ = value;
		g_signal_connect_object (_tmp7_, "on-set", (GCallback) __soy_bodies_body_axis_size_set_soy_atoms_size_on_set, self, 0);
		_tmp8_ = value;
		g_object_weak_ref ((GObject*) _tmp8_, __soy_bodies_body_axis_size_weak_gweak_notify, self);
		_tmp9_ = value;
		self->priv->_axis_size_obj = _tmp9_;
	}
	result = value;
	return result;
}


void soy_bodies_body_set_axis_size (soybodiesBody* self, soyatomsSize* value) {
	soyatomsSize* _tmp0_;
	soyatomsSize* _tmp1_;
	soyatomsSize* _tmp2_;
	soyatomsSize* _tmp3_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_soy_bodies_body_axis_size_set (self, _tmp0_);
	_tmp1_ = value;
	self->priv->_axis_size_obj = _tmp1_;
	_tmp2_ = value;
	g_signal_connect_object (_tmp2_, "on-set", (GCallback) __soy_bodies_body_axis_size_set_soy_atoms_size_on_set, self, 0);
	_tmp3_ = value;
	g_object_weak_ref ((GObject*) _tmp3_, __soy_bodies_body_axis_size_weak_gweak_notify, self);
	g_object_notify ((GObject *) self, "axis-size");
}


static GObject * soy_bodies_body_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties) {
	GObject * obj;
	GObjectClass * parent_class;
	soybodiesBody * self;
	GeeHashMap* _tmp0_;
	GLfloat _tmp1_;
	GLfloat _tmp2_;
	struct dxWorld* _tmp3_;
	struct dxBody* _tmp4_;
	parent_class = G_OBJECT_CLASS (soy_bodies_body_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_BODIES_TYPE_BODY, soybodiesBody);
	_vala_clear_GMutex (&self->mutex);
	g_mutex_init (&self->mutex);
	_tmp0_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, G_TYPE_FLOAT, (GBoxedCopyFunc) _float_dup, g_free, NULL, NULL, NULL);
	_g_object_unref0 (self->tags_);
	self->tags_ = _tmp0_;
	self->priv->_density = 1.0f;
	self->priv->_axis = FALSE;
	self->priv->_axis_z = (GLfloat) 1.0f;
	_tmp1_ = self->priv->_axis_z;
	self->priv->_axis_y = _tmp1_;
	_tmp2_ = self->priv->_axis_y;
	self->priv->_axis_x = _tmp2_;
	self->priv->_axis_updated = TRUE;
	_tmp3_ = soy_scenes__world;
	_tmp4_ = dBodyCreate (_tmp3_);
	_dBodyDestroy0 (self->body);
	self->body = _tmp4_;
	return obj;
}


static void soy_bodies_body_class_init (soybodiesBodyClass * klass) {
	soyscenes_PhysicsThread* _tmp0_;
	soy_bodies_body_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (soybodiesBodyPrivate));
	SOY_BODIES_BODY_CLASS (klass)->create_geom = soy_bodies_body_real_create_geom;
	SOY_BODIES_BODY_CLASS (klass)->set_mass = soy_bodies_body_real_set_mass;
	SOY_BODIES_BODY_CLASS (klass)->add_extra = soy_bodies_body_real_add_extra;
	SOY_BODIES_BODY_CLASS (klass)->remove_extra = soy_bodies_body_real_remove_extra;
	SOY_BODIES_BODY_CLASS (klass)->pointDepth = soy_bodies_body_real_pointDepth;
	SOY_BODIES_BODY_CLASS (klass)->volume = soy_bodies_body_real_volume;
	SOY_BODIES_BODY_CLASS (klass)->finite = soy_bodies_body_real_finite;
	SOY_BODIES_BODY_CLASS (klass)->mult_model_matrix = soy_bodies_body_real_mult_model_matrix;
	SOY_BODIES_BODY_CLASS (klass)->render = soy_bodies_body_real_render;
	SOY_BODIES_BODY_CLASS (klass)->get_col_radius = soy_bodies_body_real_get_col_radius;
	G_OBJECT_CLASS (klass)->get_property = _vala_soy_bodies_body_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_soy_bodies_body_set_property;
	G_OBJECT_CLASS (klass)->constructor = soy_bodies_body_constructor;
	G_OBJECT_CLASS (klass)->finalize = soy_bodies_body_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_BODY_TAGS, g_param_spec_object ("tags", "tags", "tags", GEE_TYPE_HASH_MAP, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_BODY_DENSITY, g_param_spec_float ("density", "density", "density", -G_MAXFLOAT, G_MAXFLOAT, 0.0F, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_BODY_POSITION, g_param_spec_object ("position", "position", "position", SOY_ATOMS_TYPE_POSITION, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_BODY_ROTATION, g_param_spec_object ("rotation", "rotation", "rotation", SOY_ATOMS_TYPE_ROTATION, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_BODY_VELOCITY, g_param_spec_object ("velocity", "velocity", "velocity", SOY_ATOMS_TYPE_VECTOR, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_BODY_COL_RADIUS, g_param_spec_float ("col-radius", "col-radius", "col-radius", -G_MAXFLOAT, G_MAXFLOAT, 0.0F, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_BODY_AXIS, g_param_spec_boolean ("axis", "axis", "axis", FALSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_BODY_AXIS_SIZE, g_param_spec_object ("axis-size", "axis-size", "axis-size", SOY_ATOMS_TYPE_SIZE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	_tmp0_ = soy_scenes__thread;
	if (_tmp0_ == NULL) {
		soyscenes_PhysicsThread* _tmp1_;
		_tmp1_ = soy_scenes__physicsthread_new ();
		_g_object_unref0 (soy_scenes__thread);
		soy_scenes__thread = _tmp1_;
	}
}


static void soy_bodies_body_instance_init (soybodiesBody * self) {
	self->priv = SOY_BODIES_BODY_GET_PRIVATE (self);
	self->scene = NULL;
}


static void soy_bodies_body_finalize (GObject* obj) {
	soybodiesBody * self;
	gboolean _tmp0_ = FALSE;
	soyscenesScene* _tmp1_;
	gboolean _tmp6_;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_BODIES_TYPE_BODY, soybodiesBody);
	_tmp1_ = self->scene;
	if (_tmp1_ != NULL) {
		soyscenesScene* _tmp2_;
		GeeHashMap* _tmp3_;
		const gchar* _tmp4_;
		gboolean _tmp5_ = FALSE;
		_tmp2_ = self->scene;
		_tmp3_ = _tmp2_->bodies;
		_tmp4_ = self->key;
		_tmp5_ = gee_abstract_map_has ((GeeAbstractMap*) _tmp3_, _tmp4_, self);
		_tmp0_ = _tmp5_;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp6_ = _tmp0_;
	if (_tmp6_) {
		soy_bodies_body_remove (self);
	}
	_dBodyDestroy0 (self->body);
	self->fogcoords = (g_free (self->fogcoords), NULL);
	_dGeomDestroy0 (self->geom);
	_g_free0 (self->key);
	_vala_clear_GMutex (&self->mutex);
	self->tslvs = (g_free (self->tslvs), NULL);
	_g_object_unref0 (self->scene);
	_g_object_unref0 (self->tags_);
	G_OBJECT_CLASS (soy_bodies_body_parent_class)->finalize (obj);
}


GType soy_bodies_body_get_type (void) {
	static volatile gsize soy_bodies_body_type_id__volatile = 0;
	if (g_once_init_enter (&soy_bodies_body_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soybodiesBodyClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_bodies_body_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soybodiesBody), 0, (GInstanceInitFunc) soy_bodies_body_instance_init, NULL };
		GType soy_bodies_body_type_id;
		soy_bodies_body_type_id = g_type_register_static (G_TYPE_OBJECT, "soybodiesBody", &g_define_type_info, 0);
		g_once_init_leave (&soy_bodies_body_type_id__volatile, soy_bodies_body_type_id);
	}
	return soy_bodies_body_type_id__volatile;
}


static void _vala_soy_bodies_body_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	soybodiesBody * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_BODIES_TYPE_BODY, soybodiesBody);
	switch (property_id) {
		case SOY_BODIES_BODY_TAGS:
		g_value_take_object (value, soy_bodies_body_get_tags (self));
		break;
		case SOY_BODIES_BODY_DENSITY:
		g_value_set_float (value, soy_bodies_body_get_density (self));
		break;
		case SOY_BODIES_BODY_POSITION:
		g_value_take_object (value, soy_bodies_body_get_position (self));
		break;
		case SOY_BODIES_BODY_ROTATION:
		g_value_take_object (value, soy_bodies_body_get_rotation (self));
		break;
		case SOY_BODIES_BODY_VELOCITY:
		g_value_take_object (value, soy_bodies_body_get_velocity (self));
		break;
		case SOY_BODIES_BODY_COL_RADIUS:
		g_value_set_float (value, soy_bodies_body_get_col_radius (self));
		break;
		case SOY_BODIES_BODY_AXIS:
		g_value_set_boolean (value, soy_bodies_body_get_axis (self));
		break;
		case SOY_BODIES_BODY_AXIS_SIZE:
		g_value_take_object (value, soy_bodies_body_get_axis_size (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_soy_bodies_body_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	soybodiesBody * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_BODIES_TYPE_BODY, soybodiesBody);
	switch (property_id) {
		case SOY_BODIES_BODY_DENSITY:
		soy_bodies_body_set_density (self, g_value_get_float (value));
		break;
		case SOY_BODIES_BODY_POSITION:
		soy_bodies_body_set_position (self, g_value_get_object (value));
		break;
		case SOY_BODIES_BODY_ROTATION:
		soy_bodies_body_set_rotation (self, g_value_get_object (value));
		break;
		case SOY_BODIES_BODY_VELOCITY:
		soy_bodies_body_set_velocity (self, g_value_get_object (value));
		break;
		case SOY_BODIES_BODY_AXIS:
		soy_bodies_body_set_axis (self, g_value_get_boolean (value));
		break;
		case SOY_BODIES_BODY_AXIS_SIZE:
		soy_bodies_body_set_axis_size (self, g_value_get_object (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_clear_GMutex (GMutex * mutex) {
	GMutex zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GMutex))) {
		g_mutex_clear (mutex);
		memset (mutex, 0, sizeof (GMutex));
	}
}


static void _vala_clear_GRecMutex (GRecMutex * mutex) {
	GRecMutex zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GRecMutex))) {
		g_rec_mutex_clear (mutex);
		memset (mutex, 0, sizeof (GRecMutex));
	}
}


static void _vala_clear_GRWLock (GRWLock * mutex) {
	GRWLock zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GRWLock))) {
		g_rw_lock_clear (mutex);
		memset (mutex, 0, sizeof (GRWLock));
	}
}


static void _vala_clear_GCond (GCond * mutex) {
	GCond zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GCond))) {
		g_cond_clear (mutex);
		memset (mutex, 0, sizeof (GCond));
	}
}




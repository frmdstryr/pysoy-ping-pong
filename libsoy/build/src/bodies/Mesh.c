/* Mesh.c generated by valac 0.20.1, the Vala compiler
 * generated from Mesh.gs, do not modify */

/*
 *  libsoy - soy.bodies.Mesh
 *  Copyright (C) 2006,2007,2008,2009,2010,2011,2012,2013 Copyleft Games Group
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published
 *  by the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WIsTHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program; if not, see http://www.gnu.org/licenses
 */

#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <soy-1/ode.h>
#include <GLES/gl.h>
#include <GLES/glext.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>


#define SOY_BODIES_TYPE_BODY (soy_bodies_body_get_type ())
#define SOY_BODIES_BODY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_BODY, soybodiesBody))
#define SOY_BODIES_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))
#define SOY_BODIES_IS_BODY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_IS_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_BODY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))

typedef struct _soybodiesBody soybodiesBody;
typedef struct _soybodiesBodyClass soybodiesBodyClass;
typedef struct _soybodiesBodyPrivate soybodiesBodyPrivate;

#define SOY_BODIES_TYPE_CAMERA (soy_bodies_camera_get_type ())
#define SOY_BODIES_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_CAMERA, soybodiesCamera))
#define SOY_BODIES_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_CAMERA, soybodiesCameraClass))
#define SOY_BODIES_IS_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_CAMERA))
#define SOY_BODIES_IS_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_CAMERA))
#define SOY_BODIES_CAMERA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_CAMERA, soybodiesCameraClass))

typedef struct _soybodiesCamera soybodiesCamera;
typedef struct _soybodiesCameraClass soybodiesCameraClass;

#define SOY_SCENES_TYPE_SCENE (soy_scenes_scene_get_type ())
#define SOY_SCENES_SCENE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE_SCENE, soyscenesScene))
#define SOY_SCENES_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))
#define SOY_SCENES_IS_SCENE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_IS_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_SCENE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))

typedef struct _soyscenesScene soyscenesScene;
typedef struct _soyscenesSceneClass soyscenesSceneClass;

#define SOY_BODIES_TYPE_MESH (soy_bodies_mesh_get_type ())
#define SOY_BODIES_MESH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_MESH, soybodiesMesh))
#define SOY_BODIES_MESH_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_MESH, soybodiesMeshClass))
#define SOY_BODIES_IS_MESH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_MESH))
#define SOY_BODIES_IS_MESH_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_MESH))
#define SOY_BODIES_MESH_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_MESH, soybodiesMeshClass))

typedef struct _soybodiesMesh soybodiesMesh;
typedef struct _soybodiesMeshClass soybodiesMeshClass;
typedef struct _soybodiesMeshPrivate soybodiesMeshPrivate;

#define SOY_MATERIALS_TYPE_MATERIAL (soy_materials_material_get_type ())
#define SOY_MATERIALS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterial))
#define SOY_MATERIALS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))
#define SOY_MATERIALS_IS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_IS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_MATERIAL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))

typedef struct _soymaterialsMaterial soymaterialsMaterial;
typedef struct _soymaterialsMaterialClass soymaterialsMaterialClass;

#define SOY_ATOMS_TYPE_FACE (soy_atoms_face_get_type ())
#define SOY_ATOMS_FACE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_FACE, soyatomsFace))
#define SOY_ATOMS_FACE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_FACE, soyatomsFaceClass))
#define SOY_ATOMS_IS_FACE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_FACE))
#define SOY_ATOMS_IS_FACE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_FACE))
#define SOY_ATOMS_FACE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_FACE, soyatomsFaceClass))

typedef struct _soyatomsFace soyatomsFace;
typedef struct _soyatomsFaceClass soyatomsFaceClass;

#define SOY_ATOMS_TYPE_VERTEX (soy_atoms_vertex_get_type ())
#define SOY_ATOMS_VERTEX(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_VERTEX, soyatomsVertex))
#define SOY_ATOMS_VERTEX_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_VERTEX, soyatomsVertexClass))
#define SOY_ATOMS_IS_VERTEX(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_VERTEX))
#define SOY_ATOMS_IS_VERTEX_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_VERTEX))
#define SOY_ATOMS_VERTEX_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_VERTEX, soyatomsVertexClass))

typedef struct _soyatomsVertex soyatomsVertex;
typedef struct _soyatomsVertexClass soyatomsVertexClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define SOY_ATOMS_TYPE_POSITION (soy_atoms_position_get_type ())
#define SOY_ATOMS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPosition))
#define SOY_ATOMS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))
#define SOY_ATOMS_IS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_IS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_POSITION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))

typedef struct _soyatomsPosition soyatomsPosition;
typedef struct _soyatomsPositionClass soyatomsPositionClass;

#define SOY_ATOMS_TYPE_VECTOR (soy_atoms_vector_get_type ())
#define SOY_ATOMS_VECTOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_VECTOR, soyatomsVector))
#define SOY_ATOMS_VECTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_VECTOR, soyatomsVectorClass))
#define SOY_ATOMS_IS_VECTOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_VECTOR))
#define SOY_ATOMS_IS_VECTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_VECTOR))
#define SOY_ATOMS_VECTOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_VECTOR, soyatomsVectorClass))

typedef struct _soyatomsVector soyatomsVector;
typedef struct _soyatomsVectorClass soyatomsVectorClass;

#define SOY_ATOMS_TYPE_MORPH (soy_atoms_morph_get_type ())
#define SOY_ATOMS_MORPH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_MORPH, soyatomsMorph))
#define SOY_ATOMS_MORPH_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_MORPH, soyatomsMorphClass))
#define SOY_ATOMS_IS_MORPH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_MORPH))
#define SOY_ATOMS_IS_MORPH_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_MORPH))
#define SOY_ATOMS_MORPH_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_MORPH, soyatomsMorphClass))

typedef struct _soyatomsMorph soyatomsMorph;
typedef struct _soyatomsMorphClass soyatomsMorphClass;

struct _soybodiesBody {
	GObject parent_instance;
	soybodiesBodyPrivate * priv;
	struct dxBody* body;
	GLfloat* fogcoords;
	gint fogcoords_length1;
	struct dxGeom* geom;
	gchar* key;
	GMutex mutex;
	GLfloat* tslvs;
	gint tslvs_length1;
	soyscenesScene* scene;
	GeeHashMap* tags_;
};

struct _soybodiesBodyClass {
	GObjectClass parent_class;
	void (*create_geom) (soybodiesBody* self, GObject* geom_param, gfloat geom_scalar);
	void (*set_mass) (soybodiesBody* self, gfloat density);
	void (*add_extra) (soybodiesBody* self);
	void (*remove_extra) (soybodiesBody* self);
	gfloat (*pointDepth) (soybodiesBody* self, gfloat x, gfloat y, gfloat z);
	gfloat (*volume) (soybodiesBody* self);
	gint (*finite) (soybodiesBody* self);
	void (*mult_model_matrix) (soybodiesBody* self);
	void (*render) (soybodiesBody* self, gboolean alpha_stage, soybodiesCamera* camera, gint level);
	gfloat (*get_col_radius) (soybodiesBody* self);
};

struct _soybodiesMesh {
	soybodiesBody parent_instance;
	soybodiesMeshPrivate * priv;
};

struct _soybodiesMeshClass {
	soybodiesBodyClass parent_class;
};

struct _soybodiesMeshPrivate {
	GeeArrayList* _materials;
	GeeHashMap* _face_objs;
	GeeHashMap* _vert_objs;
	GLfloat* _verts;
	GLuint _glEBO;
	GLuint _glVBO;
	gint _length;
};


static gpointer soy_bodies_mesh_parent_class = NULL;

GType soy_bodies_body_get_type (void) G_GNUC_CONST;
GType soy_bodies_camera_get_type (void) G_GNUC_CONST;
GType soy_scenes_scene_get_type (void) G_GNUC_CONST;
GType soy_bodies_mesh_get_type (void) G_GNUC_CONST;
GType soy_materials_material_get_type (void) G_GNUC_CONST;
GType soy_atoms_face_get_type (void) G_GNUC_CONST;
GType soy_atoms_vertex_get_type (void) G_GNUC_CONST;
#define SOY_BODIES_MESH_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SOY_BODIES_TYPE_MESH, soybodiesMeshPrivate))
enum  {
	SOY_BODIES_MESH_DUMMY_PROPERTY,
	SOY_BODIES_MESH_LENGTH
};
static void _soy_bodies_mesh_resize (soybodiesMesh* self, gint length);
GType soy_atoms_position_get_type (void) G_GNUC_CONST;
soybodiesMesh* soy_bodies_mesh_new (soyatomsPosition* position);
soybodiesMesh* soy_bodies_mesh_construct (GType object_type, soyatomsPosition* position);
soybodiesBody* soy_bodies_body_new (soyatomsPosition* position, GObject* geom_param, gfloat geom_scalar);
soybodiesBody* soy_bodies_body_construct (GType object_type, soyatomsPosition* position, GObject* geom_param, gfloat geom_scalar);
soyatomsFace* soy_bodies_mesh_get (soybodiesMesh* self, gint index);
gint soy_bodies_mesh_get_length (soybodiesMesh* self);
GType soy_atoms_vector_get_type (void) G_GNUC_CONST;
soyatomsPosition* soy_atoms_position_new (gfloat x, gfloat y, gfloat z);
soyatomsPosition* soy_atoms_position_construct (GType object_type, gfloat x, gfloat y, gfloat z);
soyatomsVector* soy_atoms_vector_new (gfloat x, gfloat y, gfloat z);
soyatomsVector* soy_atoms_vector_construct (GType object_type, gfloat x, gfloat y, gfloat z);
soyatomsVertex* soy_atoms_vertex_new (soyatomsPosition* position, soyatomsVector* normal, soyatomsPosition* texcoord, soyatomsVector* tangent);
soyatomsVertex* soy_atoms_vertex_construct (GType object_type, soyatomsPosition* position, soyatomsVector* normal, soyatomsPosition* texcoord, soyatomsVector* tangent);
soyatomsFace* soy_atoms_face_new (soyatomsVertex* a, soyatomsVertex* b, soyatomsVertex* c);
soyatomsFace* soy_atoms_face_construct (GType object_type, soyatomsVertex* a, soyatomsVertex* b, soyatomsVertex* c);
static void _soy_bodies_mesh_face_set (soybodiesMesh* self, soyatomsFace* face);
static void __soy_bodies_mesh_face_set_soy_atoms_face_on_set (soyatomsFace* _sender, soyatomsFace* face, gpointer self);
static void _soy_bodies_mesh_face_weak (soybodiesMesh* self, GObject* face);
static void __soy_bodies_mesh_face_weak_gweak_notify (gpointer self, GObject* object);
void soy_bodies_mesh_set (soybodiesMesh* self, gint index, GObject* value);
soyatomsVertex* soy_atoms_face_get (soyatomsFace* self, gint index);
static void _soy_bodies_mesh_vert_weak (soybodiesMesh* self, GObject* vert);
static void __soy_bodies_mesh_vert_weak_gweak_notify (gpointer self, GObject* object);
static void _soy_bodies_mesh_update_verts (soybodiesMesh* self, gint index, soyatomsFace* face);
soyatomsPosition* soy_atoms_vertex_get_position (soyatomsVertex* self);
gfloat soy_atoms_position_get_x (soyatomsPosition* self);
gfloat soy_atoms_position_get_y (soyatomsPosition* self);
gfloat soy_atoms_position_get_z (soyatomsPosition* self);
soyatomsVector* soy_atoms_vertex_get_normal (soyatomsVertex* self);
gfloat soy_atoms_vector_get_x (soyatomsVector* self);
gfloat soy_atoms_vector_get_y (soyatomsVector* self);
gfloat soy_atoms_vector_get_z (soyatomsVector* self);
soyatomsPosition* soy_atoms_vertex_get_texcoord (soyatomsVertex* self);
soyatomsVector* soy_atoms_vertex_get_tangent (soyatomsVertex* self);
GLfloat* soy_bodies_mesh_get_raw_verts (soybodiesMesh* self);
void soy_bodies_mesh_set_raw_verts (soybodiesMesh* self, GLfloat* verts);
soybodiesMesh* soy_bodies_mesh_clone (soybodiesMesh* self);
soyatomsPosition* soy_bodies_body_get_position (soybodiesBody* self);
void soy_bodies_mesh_set_length (soybodiesMesh* self, gint value);
GType soy_atoms_morph_get_type (void) G_GNUC_CONST;
soyatomsMorph* soy_bodies_mesh_morph (soybodiesMesh* self, soybodiesMesh* variant, gfloat delta);
soyatomsMorph* soy_atoms_morph_new_with_delta (soybodiesMesh* a, soybodiesMesh* b, gfloat delta);
soyatomsMorph* soy_atoms_morph_construct_with_delta (GType object_type, soybodiesMesh* a, soybodiesMesh* b, gfloat delta);
static void soy_bodies_mesh_real_render (soybodiesBody* base, gboolean alpha_stage, soybodiesCamera* camera, gint level);
static GObject * soy_bodies_mesh_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
static void soy_bodies_mesh_finalize (GObject* obj);
static void _vala_soy_bodies_mesh_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_soy_bodies_mesh_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);


soybodiesMesh* soy_bodies_mesh_construct (GType object_type, soyatomsPosition* position) {
	soybodiesMesh * self = NULL;
	soyatomsPosition* _tmp0_;
	_tmp0_ = position;
	self = (soybodiesMesh*) soy_bodies_body_construct (object_type, _tmp0_, NULL, 0.0f);
	return self;
}


soybodiesMesh* soy_bodies_mesh_new (soyatomsPosition* position) {
	return soy_bodies_mesh_construct (SOY_BODIES_TYPE_MESH, position);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void __soy_bodies_mesh_face_set_soy_atoms_face_on_set (soyatomsFace* _sender, soyatomsFace* face, gpointer self) {
	_soy_bodies_mesh_face_set (self, face);
}


static void __soy_bodies_mesh_face_weak_gweak_notify (gpointer self, GObject* object) {
	_soy_bodies_mesh_face_weak (self, object);
}


soyatomsFace* soy_bodies_mesh_get (soybodiesMesh* self, gint index) {
	soyatomsFace* result = NULL;
	soyatomsFace* ret;
	gboolean _tmp0_ = FALSE;
	gint _tmp1_;
	gboolean _tmp5_;
	GeeHashMap* _tmp6_;
	gint _tmp7_;
	gboolean _tmp8_ = FALSE;
	soyatomsFace* _tmp88_;
	soyatomsFace* _tmp89_;
	GeeHashMap* _tmp90_;
	gint _tmp91_;
	soyatomsFace* _tmp92_;
	soyatomsFace* _tmp93_;
	g_return_val_if_fail (self != NULL, NULL);
	ret = NULL;
	_tmp1_ = index;
	if (_tmp1_ < 0) {
		_tmp0_ = TRUE;
	} else {
		gint _tmp2_;
		gint _tmp3_;
		gint _tmp4_;
		_tmp2_ = index;
		_tmp3_ = soy_bodies_mesh_get_length (self);
		_tmp4_ = _tmp3_;
		_tmp0_ = _tmp2_ >= _tmp4_;
	}
	_tmp5_ = _tmp0_;
	if (_tmp5_) {
		result = NULL;
		_g_object_unref0 (ret);
		return result;
	}
	_tmp6_ = self->priv->_face_objs;
	_tmp7_ = index;
	_tmp8_ = gee_abstract_map_has_key ((GeeAbstractMap*) _tmp6_, (gpointer) ((gintptr) _tmp7_));
	if (_tmp8_) {
		GeeHashMap* _tmp9_;
		gint _tmp10_;
		gpointer _tmp11_ = NULL;
		soyatomsFace* _tmp12_;
		_tmp9_ = self->priv->_face_objs;
		_tmp10_ = index;
		_tmp11_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp9_, (gpointer) ((gintptr) _tmp10_));
		_tmp12_ = _g_object_ref0 ((soyatomsFace*) _tmp11_);
		_g_object_unref0 (ret);
		ret = _tmp12_;
	} else {
		GeeArrayList* _tmp13_;
		GeeArrayList* verts;
		soyatomsVertex* v = NULL;
		gint _tmp14_;
		gint vert_index;
		gint _tmp15_;
		gint offset;
		GeeArrayList* _tmp78_;
		gpointer _tmp79_ = NULL;
		soyatomsVertex* _tmp80_;
		GeeArrayList* _tmp81_;
		gpointer _tmp82_ = NULL;
		soyatomsVertex* _tmp83_;
		GeeArrayList* _tmp84_;
		gpointer _tmp85_ = NULL;
		soyatomsVertex* _tmp86_;
		soyatomsFace* _tmp87_;
		_tmp13_ = gee_array_list_new (SOY_ATOMS_TYPE_VERTEX, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
		verts = _tmp13_;
		_tmp14_ = index;
		vert_index = _tmp14_ * 3;
		_tmp15_ = index;
		offset = _tmp15_ * 36;
		{
			gint i;
			i = 0;
			{
				gboolean _tmp16_;
				_tmp16_ = TRUE;
				while (TRUE) {
					gboolean _tmp17_;
					GeeHashMap* _tmp19_;
					gint _tmp20_;
					gboolean _tmp21_ = FALSE;
					GeeHashMap* _tmp71_;
					gint _tmp72_;
					soyatomsVertex* _tmp73_;
					GeeArrayList* _tmp74_;
					soyatomsVertex* _tmp75_;
					gint _tmp76_;
					gint _tmp77_;
					_tmp17_ = _tmp16_;
					if (!_tmp17_) {
						gint _tmp18_;
						_tmp18_ = i;
						i = _tmp18_ + 1;
					}
					_tmp16_ = FALSE;
					if (!(i <= 2)) {
						break;
					}
					_tmp19_ = self->priv->_vert_objs;
					_tmp20_ = vert_index;
					_tmp21_ = gee_abstract_map_has_key ((GeeAbstractMap*) _tmp19_, (gpointer) ((gintptr) _tmp20_));
					if (_tmp21_) {
						GeeHashMap* _tmp22_;
						gint _tmp23_;
						gpointer _tmp24_ = NULL;
						soyatomsVertex* _tmp25_;
						_tmp22_ = self->priv->_vert_objs;
						_tmp23_ = vert_index;
						_tmp24_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp22_, (gpointer) ((gintptr) _tmp23_));
						_tmp25_ = _g_object_ref0 ((soyatomsVertex*) _tmp24_);
						_g_object_unref0 (v);
						v = _tmp25_;
					} else {
						soyatomsPosition* pos = NULL;
						soyatomsVector* norm = NULL;
						soyatomsPosition* tex = NULL;
						soyatomsVector* tan = NULL;
						GLfloat* _tmp26_;
						gint _tmp27_;
						GLfloat _tmp28_;
						GLfloat* _tmp29_;
						gint _tmp30_;
						GLfloat _tmp31_;
						GLfloat* _tmp32_;
						gint _tmp33_;
						GLfloat _tmp34_;
						soyatomsPosition* _tmp35_;
						GLfloat* _tmp36_;
						gint _tmp37_;
						GLfloat _tmp38_;
						GLfloat* _tmp39_;
						gint _tmp40_;
						GLfloat _tmp41_;
						GLfloat* _tmp42_;
						gint _tmp43_;
						GLfloat _tmp44_;
						soyatomsVector* _tmp45_;
						GLfloat* _tmp46_;
						gint _tmp47_;
						GLfloat _tmp48_;
						GLfloat* _tmp49_;
						gint _tmp50_;
						GLfloat _tmp51_;
						GLfloat* _tmp52_;
						gint _tmp53_;
						GLfloat _tmp54_;
						soyatomsPosition* _tmp55_;
						GLfloat* _tmp56_;
						gint _tmp57_;
						GLfloat _tmp58_;
						GLfloat* _tmp59_;
						gint _tmp60_;
						GLfloat _tmp61_;
						GLfloat* _tmp62_;
						gint _tmp63_;
						GLfloat _tmp64_;
						soyatomsVector* _tmp65_;
						soyatomsPosition* _tmp66_;
						soyatomsVector* _tmp67_;
						soyatomsPosition* _tmp68_;
						soyatomsVector* _tmp69_;
						soyatomsVertex* _tmp70_;
						_tmp26_ = self->priv->_verts;
						_tmp27_ = offset;
						_tmp28_ = _tmp26_[_tmp27_];
						_tmp29_ = self->priv->_verts;
						_tmp30_ = offset;
						_tmp31_ = _tmp29_[_tmp30_ + 1];
						_tmp32_ = self->priv->_verts;
						_tmp33_ = offset;
						_tmp34_ = _tmp32_[_tmp33_ + 2];
						_tmp35_ = soy_atoms_position_new ((gfloat) _tmp28_, (gfloat) _tmp31_, (gfloat) _tmp34_);
						_g_object_unref0 (pos);
						pos = _tmp35_;
						_tmp36_ = self->priv->_verts;
						_tmp37_ = offset;
						_tmp38_ = _tmp36_[_tmp37_ + 3];
						_tmp39_ = self->priv->_verts;
						_tmp40_ = offset;
						_tmp41_ = _tmp39_[_tmp40_ + 4];
						_tmp42_ = self->priv->_verts;
						_tmp43_ = offset;
						_tmp44_ = _tmp42_[_tmp43_ + 5];
						_tmp45_ = soy_atoms_vector_new ((gfloat) _tmp38_, (gfloat) _tmp41_, (gfloat) _tmp44_);
						_g_object_unref0 (norm);
						norm = _tmp45_;
						_tmp46_ = self->priv->_verts;
						_tmp47_ = offset;
						_tmp48_ = _tmp46_[_tmp47_ + 6];
						_tmp49_ = self->priv->_verts;
						_tmp50_ = offset;
						_tmp51_ = _tmp49_[_tmp50_ + 7];
						_tmp52_ = self->priv->_verts;
						_tmp53_ = offset;
						_tmp54_ = _tmp52_[_tmp53_ + 8];
						_tmp55_ = soy_atoms_position_new ((gfloat) _tmp48_, (gfloat) _tmp51_, (gfloat) _tmp54_);
						_g_object_unref0 (tex);
						tex = _tmp55_;
						_tmp56_ = self->priv->_verts;
						_tmp57_ = offset;
						_tmp58_ = _tmp56_[_tmp57_ + 9];
						_tmp59_ = self->priv->_verts;
						_tmp60_ = offset;
						_tmp61_ = _tmp59_[_tmp60_ + 10];
						_tmp62_ = self->priv->_verts;
						_tmp63_ = offset;
						_tmp64_ = _tmp62_[_tmp63_ + 11];
						_tmp65_ = soy_atoms_vector_new ((gfloat) _tmp58_, (gfloat) _tmp61_, (gfloat) _tmp64_);
						_g_object_unref0 (tan);
						tan = _tmp65_;
						_tmp66_ = pos;
						_tmp67_ = norm;
						_tmp68_ = tex;
						_tmp69_ = tan;
						_tmp70_ = soy_atoms_vertex_new (_tmp66_, _tmp67_, _tmp68_, _tmp69_);
						_g_object_unref0 (v);
						v = _tmp70_;
						_g_object_unref0 (tan);
						_g_object_unref0 (tex);
						_g_object_unref0 (norm);
						_g_object_unref0 (pos);
					}
					_tmp71_ = self->priv->_vert_objs;
					_tmp72_ = vert_index;
					_tmp73_ = v;
					gee_abstract_map_set ((GeeAbstractMap*) _tmp71_, (gpointer) ((gintptr) _tmp72_), _tmp73_);
					_tmp74_ = verts;
					_tmp75_ = v;
					gee_abstract_collection_add ((GeeAbstractCollection*) _tmp74_, _tmp75_);
					_tmp76_ = offset;
					offset = _tmp76_ + 12;
					_tmp77_ = vert_index;
					vert_index = _tmp77_ + 1;
				}
			}
		}
		_tmp78_ = verts;
		_tmp79_ = gee_abstract_list_get ((GeeAbstractList*) _tmp78_, 0);
		_tmp80_ = (soyatomsVertex*) _tmp79_;
		_tmp81_ = verts;
		_tmp82_ = gee_abstract_list_get ((GeeAbstractList*) _tmp81_, 1);
		_tmp83_ = (soyatomsVertex*) _tmp82_;
		_tmp84_ = verts;
		_tmp85_ = gee_abstract_list_get ((GeeAbstractList*) _tmp84_, 2);
		_tmp86_ = (soyatomsVertex*) _tmp85_;
		_tmp87_ = soy_atoms_face_new (_tmp80_, _tmp83_, _tmp86_);
		_g_object_unref0 (ret);
		ret = _tmp87_;
		_g_object_unref0 (_tmp86_);
		_g_object_unref0 (_tmp83_);
		_g_object_unref0 (_tmp80_);
		_g_object_unref0 (v);
		_g_object_unref0 (verts);
	}
	_tmp88_ = ret;
	g_signal_connect_object (_tmp88_, "on-set", (GCallback) __soy_bodies_mesh_face_set_soy_atoms_face_on_set, self, 0);
	_tmp89_ = ret;
	g_object_weak_ref ((GObject*) _tmp89_, __soy_bodies_mesh_face_weak_gweak_notify, self);
	_tmp90_ = self->priv->_face_objs;
	_tmp91_ = index;
	_tmp92_ = ret;
	gee_abstract_map_set ((GeeAbstractMap*) _tmp90_, (gpointer) ((gintptr) _tmp91_), _tmp92_);
	_tmp93_ = ret;
	ret = NULL;
	result = _tmp93_;
	_g_object_unref0 (ret);
	return result;
}


static void __soy_bodies_mesh_vert_weak_gweak_notify (gpointer self, GObject* object) {
	_soy_bodies_mesh_vert_weak (self, object);
}


void soy_bodies_mesh_set (soybodiesMesh* self, gint index, GObject* value) {
	soyatomsFace* face = NULL;
	GObject* _tmp0_;
	GObject* _tmp1_;
	soyatomsFace* _tmp2_;
	GeeHashMap* _tmp3_;
	gint _tmp4_;
	gboolean _tmp5_ = FALSE;
	GeeHashMap* _tmp22_;
	gint _tmp23_;
	soyatomsFace* _tmp24_;
	gint _tmp25_;
	soyatomsFace* _tmp26_;
	soyatomsFace* _tmp27_;
	soyatomsFace* _tmp28_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (value != NULL);
	_tmp0_ = value;
	if (!G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, SOY_ATOMS_TYPE_FACE)) {
		_g_object_unref0 (face);
		return;
	}
	_tmp1_ = value;
	_tmp2_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, SOY_ATOMS_TYPE_FACE, soyatomsFace));
	_g_object_unref0 (face);
	face = _tmp2_;
	_tmp3_ = self->priv->_face_objs;
	_tmp4_ = index;
	_tmp5_ = gee_abstract_map_has_key ((GeeAbstractMap*) _tmp3_, (gpointer) ((gintptr) _tmp4_));
	if (_tmp5_) {
		GeeHashMap* _tmp6_;
		gint _tmp7_;
		gpointer _tmp8_ = NULL;
		soyatomsFace* _tmp9_;
		soyatomsFace* old;
		soyatomsFace* _tmp10_;
		soyatomsVertex* _tmp11_ = NULL;
		soyatomsVertex* _tmp12_;
		soyatomsFace* _tmp13_;
		soyatomsVertex* _tmp14_ = NULL;
		soyatomsVertex* _tmp15_;
		soyatomsFace* _tmp16_;
		soyatomsVertex* _tmp17_ = NULL;
		soyatomsVertex* _tmp18_;
		soyatomsFace* _tmp19_;
		guint _tmp20_ = 0U;
		soyatomsFace* _tmp21_;
		_tmp6_ = self->priv->_face_objs;
		_tmp7_ = index;
		_tmp8_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp6_, (gpointer) ((gintptr) _tmp7_));
		_tmp9_ = _g_object_ref0 ((soyatomsFace*) _tmp8_);
		old = _tmp9_;
		_tmp10_ = old;
		_tmp11_ = soy_atoms_face_get (_tmp10_, 0);
		_tmp12_ = _tmp11_;
		g_object_weak_unref ((GObject*) _tmp12_, __soy_bodies_mesh_vert_weak_gweak_notify, self);
		_g_object_unref0 (_tmp12_);
		_tmp13_ = old;
		_tmp14_ = soy_atoms_face_get (_tmp13_, 1);
		_tmp15_ = _tmp14_;
		g_object_weak_unref ((GObject*) _tmp15_, __soy_bodies_mesh_vert_weak_gweak_notify, self);
		_g_object_unref0 (_tmp15_);
		_tmp16_ = old;
		_tmp17_ = soy_atoms_face_get (_tmp16_, 2);
		_tmp18_ = _tmp17_;
		g_object_weak_unref ((GObject*) _tmp18_, __soy_bodies_mesh_vert_weak_gweak_notify, self);
		_g_object_unref0 (_tmp18_);
		_tmp19_ = old;
		g_signal_parse_name ("on-set", SOY_ATOMS_TYPE_FACE, &_tmp20_, NULL, FALSE);
		g_signal_handlers_disconnect_matched (_tmp19_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp20_, 0, NULL, (GCallback) __soy_bodies_mesh_face_set_soy_atoms_face_on_set, self);
		_tmp21_ = old;
		g_object_weak_unref ((GObject*) _tmp21_, __soy_bodies_mesh_face_weak_gweak_notify, self);
		_g_object_unref0 (old);
	}
	_tmp22_ = self->priv->_face_objs;
	_tmp23_ = index;
	_tmp24_ = face;
	gee_abstract_map_set ((GeeAbstractMap*) _tmp22_, (gpointer) ((gintptr) _tmp23_), _tmp24_);
	g_mutex_lock (&((soybodiesBody*) self)->mutex);
	_tmp25_ = index;
	_tmp26_ = face;
	_soy_bodies_mesh_update_verts (self, _tmp25_, _tmp26_);
	g_mutex_unlock (&((soybodiesBody*) self)->mutex);
	_tmp27_ = face;
	g_signal_connect_object (_tmp27_, "on-set", (GCallback) __soy_bodies_mesh_face_set_soy_atoms_face_on_set, self, 0);
	_tmp28_ = face;
	g_object_weak_ref ((GObject*) _tmp28_, __soy_bodies_mesh_face_weak_gweak_notify, self);
	_g_object_unref0 (face);
}


static void _soy_bodies_mesh_face_weak (soybodiesMesh* self, GObject* face) {
	GeeArrayList* _tmp0_;
	GeeArrayList* garbage;
	g_return_if_fail (self != NULL);
	g_return_if_fail (face != NULL);
	_tmp0_ = gee_array_list_new (G_TYPE_INT, NULL, NULL, NULL);
	garbage = _tmp0_;
	{
		GeeHashMap* _tmp1_;
		GeeSet* _tmp2_;
		GeeSet* _tmp3_;
		GeeSet* _tmp4_;
		GeeIterator* _tmp5_ = NULL;
		GeeIterator* _tmp6_;
		GeeIterator* _index_it;
		_tmp1_ = self->priv->_face_objs;
		_tmp2_ = gee_abstract_map_get_keys ((GeeMap*) _tmp1_);
		_tmp3_ = _tmp2_;
		_tmp4_ = _tmp3_;
		_tmp5_ = gee_iterable_iterator ((GeeIterable*) _tmp4_);
		_tmp6_ = _tmp5_;
		_g_object_unref0 (_tmp4_);
		_index_it = _tmp6_;
		while (TRUE) {
			GeeIterator* _tmp7_;
			gboolean _tmp8_ = FALSE;
			GeeIterator* _tmp9_;
			gpointer _tmp10_ = NULL;
			gint index;
			GeeHashMap* _tmp11_;
			gint _tmp12_;
			gpointer _tmp13_ = NULL;
			GObject* _tmp14_;
			_tmp7_ = _index_it;
			_tmp8_ = gee_iterator_next (_tmp7_);
			if (!_tmp8_) {
				break;
			}
			_tmp9_ = _index_it;
			_tmp10_ = gee_iterator_get (_tmp9_);
			index = (gint) ((gintptr) _tmp10_);
			_tmp11_ = self->priv->_face_objs;
			_tmp12_ = index;
			_tmp13_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp11_, (gpointer) ((gintptr) _tmp12_));
			_tmp14_ = face;
			if (G_TYPE_CHECK_INSTANCE_CAST ((soyatomsFace*) _tmp13_, G_TYPE_OBJECT, GObject) == _tmp14_) {
				GeeArrayList* _tmp15_;
				gint _tmp16_;
				_tmp15_ = garbage;
				_tmp16_ = index;
				gee_abstract_collection_add ((GeeAbstractCollection*) _tmp15_, (gpointer) ((gintptr) _tmp16_));
			}
		}
		_g_object_unref0 (_index_it);
	}
	{
		GeeArrayList* _tmp17_;
		GeeArrayList* _tmp18_;
		GeeArrayList* _index_list;
		GeeArrayList* _tmp19_;
		gint _tmp20_;
		gint _tmp21_;
		gint _index_size;
		gint _index_index;
		_tmp17_ = garbage;
		_tmp18_ = _g_object_ref0 (_tmp17_);
		_index_list = _tmp18_;
		_tmp19_ = _index_list;
		_tmp20_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp19_);
		_tmp21_ = _tmp20_;
		_index_size = _tmp21_;
		_index_index = -1;
		while (TRUE) {
			gint _tmp22_;
			gint _tmp23_;
			gint _tmp24_;
			GeeArrayList* _tmp25_;
			gint _tmp26_;
			gpointer _tmp27_ = NULL;
			gint index;
			GeeHashMap* _tmp28_;
			gint _tmp29_;
			_tmp22_ = _index_index;
			_index_index = _tmp22_ + 1;
			_tmp23_ = _index_index;
			_tmp24_ = _index_size;
			if (!(_tmp23_ < _tmp24_)) {
				break;
			}
			_tmp25_ = _index_list;
			_tmp26_ = _index_index;
			_tmp27_ = gee_abstract_list_get ((GeeAbstractList*) _tmp25_, _tmp26_);
			index = (gint) ((gintptr) _tmp27_);
			_tmp28_ = self->priv->_face_objs;
			_tmp29_ = index;
			gee_abstract_map_unset ((GeeAbstractMap*) _tmp28_, (gpointer) ((gintptr) _tmp29_), NULL);
		}
		_g_object_unref0 (_index_list);
	}
	_g_object_unref0 (garbage);
}


static void _soy_bodies_mesh_vert_weak (soybodiesMesh* self, GObject* vert) {
	GeeArrayList* _tmp0_;
	GeeArrayList* garbage;
	g_return_if_fail (self != NULL);
	g_return_if_fail (vert != NULL);
	_tmp0_ = gee_array_list_new (G_TYPE_INT, NULL, NULL, NULL);
	garbage = _tmp0_;
	{
		GeeHashMap* _tmp1_;
		GeeSet* _tmp2_;
		GeeSet* _tmp3_;
		GeeSet* _tmp4_;
		GeeIterator* _tmp5_ = NULL;
		GeeIterator* _tmp6_;
		GeeIterator* _index_it;
		_tmp1_ = self->priv->_vert_objs;
		_tmp2_ = gee_abstract_map_get_keys ((GeeMap*) _tmp1_);
		_tmp3_ = _tmp2_;
		_tmp4_ = _tmp3_;
		_tmp5_ = gee_iterable_iterator ((GeeIterable*) _tmp4_);
		_tmp6_ = _tmp5_;
		_g_object_unref0 (_tmp4_);
		_index_it = _tmp6_;
		while (TRUE) {
			GeeIterator* _tmp7_;
			gboolean _tmp8_ = FALSE;
			GeeIterator* _tmp9_;
			gpointer _tmp10_ = NULL;
			gint index;
			GeeHashMap* _tmp11_;
			gint _tmp12_;
			gpointer _tmp13_ = NULL;
			GObject* _tmp14_;
			_tmp7_ = _index_it;
			_tmp8_ = gee_iterator_next (_tmp7_);
			if (!_tmp8_) {
				break;
			}
			_tmp9_ = _index_it;
			_tmp10_ = gee_iterator_get (_tmp9_);
			index = (gint) ((gintptr) _tmp10_);
			_tmp11_ = self->priv->_vert_objs;
			_tmp12_ = index;
			_tmp13_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp11_, (gpointer) ((gintptr) _tmp12_));
			_tmp14_ = vert;
			if (G_TYPE_CHECK_INSTANCE_CAST ((soyatomsVertex*) _tmp13_, G_TYPE_OBJECT, GObject) == _tmp14_) {
				GeeArrayList* _tmp15_;
				gint _tmp16_;
				_tmp15_ = garbage;
				_tmp16_ = index;
				gee_abstract_collection_add ((GeeAbstractCollection*) _tmp15_, (gpointer) ((gintptr) _tmp16_));
			}
		}
		_g_object_unref0 (_index_it);
	}
	{
		GeeArrayList* _tmp17_;
		GeeArrayList* _tmp18_;
		GeeArrayList* _index_list;
		GeeArrayList* _tmp19_;
		gint _tmp20_;
		gint _tmp21_;
		gint _index_size;
		gint _index_index;
		_tmp17_ = garbage;
		_tmp18_ = _g_object_ref0 (_tmp17_);
		_index_list = _tmp18_;
		_tmp19_ = _index_list;
		_tmp20_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp19_);
		_tmp21_ = _tmp20_;
		_index_size = _tmp21_;
		_index_index = -1;
		while (TRUE) {
			gint _tmp22_;
			gint _tmp23_;
			gint _tmp24_;
			GeeArrayList* _tmp25_;
			gint _tmp26_;
			gpointer _tmp27_ = NULL;
			gint index;
			GeeHashMap* _tmp28_;
			gint _tmp29_;
			_tmp22_ = _index_index;
			_index_index = _tmp22_ + 1;
			_tmp23_ = _index_index;
			_tmp24_ = _index_size;
			if (!(_tmp23_ < _tmp24_)) {
				break;
			}
			_tmp25_ = _index_list;
			_tmp26_ = _index_index;
			_tmp27_ = gee_abstract_list_get ((GeeAbstractList*) _tmp25_, _tmp26_);
			index = (gint) ((gintptr) _tmp27_);
			_tmp28_ = self->priv->_vert_objs;
			_tmp29_ = index;
			gee_abstract_map_unset ((GeeAbstractMap*) _tmp28_, (gpointer) ((gintptr) _tmp29_), NULL);
		}
		_g_object_unref0 (_index_list);
	}
	_g_object_unref0 (garbage);
}


static void _soy_bodies_mesh_update_verts (soybodiesMesh* self, gint index, soyatomsFace* face) {
	gint _tmp0_;
	gint vert_index;
	gint _tmp1_;
	gint offset;
	g_return_if_fail (self != NULL);
	g_return_if_fail (face != NULL);
	_tmp0_ = index;
	vert_index = _tmp0_ * 3;
	_tmp1_ = index;
	offset = _tmp1_ * 36;
	{
		gint i;
		i = 0;
		{
			gboolean _tmp2_;
			_tmp2_ = TRUE;
			while (TRUE) {
				gboolean _tmp3_;
				GeeHashMap* _tmp5_;
				gint _tmp6_;
				gboolean _tmp7_ = FALSE;
				GeeHashMap* _tmp11_;
				gint _tmp12_;
				soyatomsFace* _tmp13_;
				gint _tmp14_;
				soyatomsVertex* _tmp15_ = NULL;
				soyatomsVertex* _tmp16_;
				GLfloat* _tmp17_;
				gint _tmp18_;
				soyatomsFace* _tmp19_;
				gint _tmp20_;
				soyatomsVertex* _tmp21_ = NULL;
				soyatomsVertex* _tmp22_;
				soyatomsPosition* _tmp23_;
				soyatomsPosition* _tmp24_;
				soyatomsPosition* _tmp25_;
				gfloat _tmp26_;
				gfloat _tmp27_;
				GLfloat _tmp28_;
				GLfloat* _tmp29_;
				gint _tmp30_;
				soyatomsFace* _tmp31_;
				gint _tmp32_;
				soyatomsVertex* _tmp33_ = NULL;
				soyatomsVertex* _tmp34_;
				soyatomsPosition* _tmp35_;
				soyatomsPosition* _tmp36_;
				soyatomsPosition* _tmp37_;
				gfloat _tmp38_;
				gfloat _tmp39_;
				GLfloat _tmp40_;
				GLfloat* _tmp41_;
				gint _tmp42_;
				soyatomsFace* _tmp43_;
				gint _tmp44_;
				soyatomsVertex* _tmp45_ = NULL;
				soyatomsVertex* _tmp46_;
				soyatomsPosition* _tmp47_;
				soyatomsPosition* _tmp48_;
				soyatomsPosition* _tmp49_;
				gfloat _tmp50_;
				gfloat _tmp51_;
				GLfloat _tmp52_;
				GLfloat* _tmp53_;
				gint _tmp54_;
				soyatomsFace* _tmp55_;
				gint _tmp56_;
				soyatomsVertex* _tmp57_ = NULL;
				soyatomsVertex* _tmp58_;
				soyatomsVector* _tmp59_;
				soyatomsVector* _tmp60_;
				soyatomsVector* _tmp61_;
				gfloat _tmp62_;
				gfloat _tmp63_;
				GLfloat _tmp64_;
				GLfloat* _tmp65_;
				gint _tmp66_;
				soyatomsFace* _tmp67_;
				gint _tmp68_;
				soyatomsVertex* _tmp69_ = NULL;
				soyatomsVertex* _tmp70_;
				soyatomsVector* _tmp71_;
				soyatomsVector* _tmp72_;
				soyatomsVector* _tmp73_;
				gfloat _tmp74_;
				gfloat _tmp75_;
				GLfloat _tmp76_;
				GLfloat* _tmp77_;
				gint _tmp78_;
				soyatomsFace* _tmp79_;
				gint _tmp80_;
				soyatomsVertex* _tmp81_ = NULL;
				soyatomsVertex* _tmp82_;
				soyatomsVector* _tmp83_;
				soyatomsVector* _tmp84_;
				soyatomsVector* _tmp85_;
				gfloat _tmp86_;
				gfloat _tmp87_;
				GLfloat _tmp88_;
				GLfloat* _tmp89_;
				gint _tmp90_;
				soyatomsFace* _tmp91_;
				gint _tmp92_;
				soyatomsVertex* _tmp93_ = NULL;
				soyatomsVertex* _tmp94_;
				soyatomsPosition* _tmp95_;
				soyatomsPosition* _tmp96_;
				soyatomsPosition* _tmp97_;
				gfloat _tmp98_;
				gfloat _tmp99_;
				GLfloat _tmp100_;
				GLfloat* _tmp101_;
				gint _tmp102_;
				soyatomsFace* _tmp103_;
				gint _tmp104_;
				soyatomsVertex* _tmp105_ = NULL;
				soyatomsVertex* _tmp106_;
				soyatomsPosition* _tmp107_;
				soyatomsPosition* _tmp108_;
				soyatomsPosition* _tmp109_;
				gfloat _tmp110_;
				gfloat _tmp111_;
				GLfloat _tmp112_;
				GLfloat* _tmp113_;
				gint _tmp114_;
				soyatomsFace* _tmp115_;
				gint _tmp116_;
				soyatomsVertex* _tmp117_ = NULL;
				soyatomsVertex* _tmp118_;
				soyatomsPosition* _tmp119_;
				soyatomsPosition* _tmp120_;
				soyatomsPosition* _tmp121_;
				gfloat _tmp122_;
				gfloat _tmp123_;
				GLfloat _tmp124_;
				GLfloat* _tmp125_;
				gint _tmp126_;
				soyatomsFace* _tmp127_;
				gint _tmp128_;
				soyatomsVertex* _tmp129_ = NULL;
				soyatomsVertex* _tmp130_;
				soyatomsVector* _tmp131_;
				soyatomsVector* _tmp132_;
				soyatomsVector* _tmp133_;
				gfloat _tmp134_;
				gfloat _tmp135_;
				GLfloat _tmp136_;
				GLfloat* _tmp137_;
				gint _tmp138_;
				soyatomsFace* _tmp139_;
				gint _tmp140_;
				soyatomsVertex* _tmp141_ = NULL;
				soyatomsVertex* _tmp142_;
				soyatomsVector* _tmp143_;
				soyatomsVector* _tmp144_;
				soyatomsVector* _tmp145_;
				gfloat _tmp146_;
				gfloat _tmp147_;
				GLfloat _tmp148_;
				GLfloat* _tmp149_;
				gint _tmp150_;
				soyatomsFace* _tmp151_;
				gint _tmp152_;
				soyatomsVertex* _tmp153_ = NULL;
				soyatomsVertex* _tmp154_;
				soyatomsVector* _tmp155_;
				soyatomsVector* _tmp156_;
				soyatomsVector* _tmp157_;
				gfloat _tmp158_;
				gfloat _tmp159_;
				GLfloat _tmp160_;
				gint _tmp161_;
				gint _tmp162_;
				_tmp3_ = _tmp2_;
				if (!_tmp3_) {
					gint _tmp4_;
					_tmp4_ = i;
					i = _tmp4_ + 1;
				}
				_tmp2_ = FALSE;
				if (!(i <= 2)) {
					break;
				}
				_tmp5_ = self->priv->_vert_objs;
				_tmp6_ = vert_index;
				_tmp7_ = gee_abstract_map_has_key ((GeeAbstractMap*) _tmp5_, (gpointer) ((gintptr) _tmp6_));
				if (_tmp7_) {
					GeeHashMap* _tmp8_;
					gint _tmp9_;
					gpointer _tmp10_ = NULL;
					_tmp8_ = self->priv->_vert_objs;
					_tmp9_ = vert_index;
					_tmp10_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp8_, (gpointer) ((gintptr) _tmp9_));
					g_object_weak_unref ((GObject*) ((soyatomsVertex*) _tmp10_), __soy_bodies_mesh_vert_weak_gweak_notify, self);
				}
				_tmp11_ = self->priv->_vert_objs;
				_tmp12_ = vert_index;
				_tmp13_ = face;
				_tmp14_ = i;
				_tmp15_ = soy_atoms_face_get (_tmp13_, _tmp14_);
				_tmp16_ = _tmp15_;
				gee_abstract_map_set ((GeeAbstractMap*) _tmp11_, (gpointer) ((gintptr) _tmp12_), _tmp16_);
				_g_object_unref0 (_tmp16_);
				_tmp17_ = self->priv->_verts;
				_tmp18_ = offset;
				_tmp19_ = face;
				_tmp20_ = i;
				_tmp21_ = soy_atoms_face_get (_tmp19_, _tmp20_);
				_tmp22_ = _tmp21_;
				_tmp23_ = soy_atoms_vertex_get_position (_tmp22_);
				_tmp24_ = _tmp23_;
				_tmp25_ = _tmp24_;
				_tmp26_ = soy_atoms_position_get_x (_tmp25_);
				_tmp27_ = _tmp26_;
				_tmp17_[_tmp18_] = (GLfloat) _tmp27_;
				_tmp28_ = _tmp17_[_tmp18_];
				_g_object_unref0 (_tmp25_);
				_g_object_unref0 (_tmp22_);
				_tmp29_ = self->priv->_verts;
				_tmp30_ = offset;
				_tmp31_ = face;
				_tmp32_ = i;
				_tmp33_ = soy_atoms_face_get (_tmp31_, _tmp32_);
				_tmp34_ = _tmp33_;
				_tmp35_ = soy_atoms_vertex_get_position (_tmp34_);
				_tmp36_ = _tmp35_;
				_tmp37_ = _tmp36_;
				_tmp38_ = soy_atoms_position_get_y (_tmp37_);
				_tmp39_ = _tmp38_;
				_tmp29_[_tmp30_ + 1] = (GLfloat) _tmp39_;
				_tmp40_ = _tmp29_[_tmp30_ + 1];
				_g_object_unref0 (_tmp37_);
				_g_object_unref0 (_tmp34_);
				_tmp41_ = self->priv->_verts;
				_tmp42_ = offset;
				_tmp43_ = face;
				_tmp44_ = i;
				_tmp45_ = soy_atoms_face_get (_tmp43_, _tmp44_);
				_tmp46_ = _tmp45_;
				_tmp47_ = soy_atoms_vertex_get_position (_tmp46_);
				_tmp48_ = _tmp47_;
				_tmp49_ = _tmp48_;
				_tmp50_ = soy_atoms_position_get_z (_tmp49_);
				_tmp51_ = _tmp50_;
				_tmp41_[_tmp42_ + 2] = (GLfloat) _tmp51_;
				_tmp52_ = _tmp41_[_tmp42_ + 2];
				_g_object_unref0 (_tmp49_);
				_g_object_unref0 (_tmp46_);
				_tmp53_ = self->priv->_verts;
				_tmp54_ = offset;
				_tmp55_ = face;
				_tmp56_ = i;
				_tmp57_ = soy_atoms_face_get (_tmp55_, _tmp56_);
				_tmp58_ = _tmp57_;
				_tmp59_ = soy_atoms_vertex_get_normal (_tmp58_);
				_tmp60_ = _tmp59_;
				_tmp61_ = _tmp60_;
				_tmp62_ = soy_atoms_vector_get_x (_tmp61_);
				_tmp63_ = _tmp62_;
				_tmp53_[_tmp54_ + 3] = (GLfloat) _tmp63_;
				_tmp64_ = _tmp53_[_tmp54_ + 3];
				_g_object_unref0 (_tmp61_);
				_g_object_unref0 (_tmp58_);
				_tmp65_ = self->priv->_verts;
				_tmp66_ = offset;
				_tmp67_ = face;
				_tmp68_ = i;
				_tmp69_ = soy_atoms_face_get (_tmp67_, _tmp68_);
				_tmp70_ = _tmp69_;
				_tmp71_ = soy_atoms_vertex_get_normal (_tmp70_);
				_tmp72_ = _tmp71_;
				_tmp73_ = _tmp72_;
				_tmp74_ = soy_atoms_vector_get_y (_tmp73_);
				_tmp75_ = _tmp74_;
				_tmp65_[_tmp66_ + 4] = (GLfloat) _tmp75_;
				_tmp76_ = _tmp65_[_tmp66_ + 4];
				_g_object_unref0 (_tmp73_);
				_g_object_unref0 (_tmp70_);
				_tmp77_ = self->priv->_verts;
				_tmp78_ = offset;
				_tmp79_ = face;
				_tmp80_ = i;
				_tmp81_ = soy_atoms_face_get (_tmp79_, _tmp80_);
				_tmp82_ = _tmp81_;
				_tmp83_ = soy_atoms_vertex_get_normal (_tmp82_);
				_tmp84_ = _tmp83_;
				_tmp85_ = _tmp84_;
				_tmp86_ = soy_atoms_vector_get_z (_tmp85_);
				_tmp87_ = _tmp86_;
				_tmp77_[_tmp78_ + 5] = (GLfloat) _tmp87_;
				_tmp88_ = _tmp77_[_tmp78_ + 5];
				_g_object_unref0 (_tmp85_);
				_g_object_unref0 (_tmp82_);
				_tmp89_ = self->priv->_verts;
				_tmp90_ = offset;
				_tmp91_ = face;
				_tmp92_ = i;
				_tmp93_ = soy_atoms_face_get (_tmp91_, _tmp92_);
				_tmp94_ = _tmp93_;
				_tmp95_ = soy_atoms_vertex_get_texcoord (_tmp94_);
				_tmp96_ = _tmp95_;
				_tmp97_ = _tmp96_;
				_tmp98_ = soy_atoms_position_get_x (_tmp97_);
				_tmp99_ = _tmp98_;
				_tmp89_[_tmp90_ + 6] = (GLfloat) _tmp99_;
				_tmp100_ = _tmp89_[_tmp90_ + 6];
				_g_object_unref0 (_tmp97_);
				_g_object_unref0 (_tmp94_);
				_tmp101_ = self->priv->_verts;
				_tmp102_ = offset;
				_tmp103_ = face;
				_tmp104_ = i;
				_tmp105_ = soy_atoms_face_get (_tmp103_, _tmp104_);
				_tmp106_ = _tmp105_;
				_tmp107_ = soy_atoms_vertex_get_texcoord (_tmp106_);
				_tmp108_ = _tmp107_;
				_tmp109_ = _tmp108_;
				_tmp110_ = soy_atoms_position_get_y (_tmp109_);
				_tmp111_ = _tmp110_;
				_tmp101_[_tmp102_ + 7] = (GLfloat) _tmp111_;
				_tmp112_ = _tmp101_[_tmp102_ + 7];
				_g_object_unref0 (_tmp109_);
				_g_object_unref0 (_tmp106_);
				_tmp113_ = self->priv->_verts;
				_tmp114_ = offset;
				_tmp115_ = face;
				_tmp116_ = i;
				_tmp117_ = soy_atoms_face_get (_tmp115_, _tmp116_);
				_tmp118_ = _tmp117_;
				_tmp119_ = soy_atoms_vertex_get_texcoord (_tmp118_);
				_tmp120_ = _tmp119_;
				_tmp121_ = _tmp120_;
				_tmp122_ = soy_atoms_position_get_z (_tmp121_);
				_tmp123_ = _tmp122_;
				_tmp113_[_tmp114_ + 8] = (GLfloat) _tmp123_;
				_tmp124_ = _tmp113_[_tmp114_ + 8];
				_g_object_unref0 (_tmp121_);
				_g_object_unref0 (_tmp118_);
				_tmp125_ = self->priv->_verts;
				_tmp126_ = offset;
				_tmp127_ = face;
				_tmp128_ = i;
				_tmp129_ = soy_atoms_face_get (_tmp127_, _tmp128_);
				_tmp130_ = _tmp129_;
				_tmp131_ = soy_atoms_vertex_get_tangent (_tmp130_);
				_tmp132_ = _tmp131_;
				_tmp133_ = _tmp132_;
				_tmp134_ = soy_atoms_vector_get_x (_tmp133_);
				_tmp135_ = _tmp134_;
				_tmp125_[_tmp126_ + 9] = (GLfloat) _tmp135_;
				_tmp136_ = _tmp125_[_tmp126_ + 9];
				_g_object_unref0 (_tmp133_);
				_g_object_unref0 (_tmp130_);
				_tmp137_ = self->priv->_verts;
				_tmp138_ = offset;
				_tmp139_ = face;
				_tmp140_ = i;
				_tmp141_ = soy_atoms_face_get (_tmp139_, _tmp140_);
				_tmp142_ = _tmp141_;
				_tmp143_ = soy_atoms_vertex_get_tangent (_tmp142_);
				_tmp144_ = _tmp143_;
				_tmp145_ = _tmp144_;
				_tmp146_ = soy_atoms_vector_get_y (_tmp145_);
				_tmp147_ = _tmp146_;
				_tmp137_[_tmp138_ + 10] = (GLfloat) _tmp147_;
				_tmp148_ = _tmp137_[_tmp138_ + 10];
				_g_object_unref0 (_tmp145_);
				_g_object_unref0 (_tmp142_);
				_tmp149_ = self->priv->_verts;
				_tmp150_ = offset;
				_tmp151_ = face;
				_tmp152_ = i;
				_tmp153_ = soy_atoms_face_get (_tmp151_, _tmp152_);
				_tmp154_ = _tmp153_;
				_tmp155_ = soy_atoms_vertex_get_tangent (_tmp154_);
				_tmp156_ = _tmp155_;
				_tmp157_ = _tmp156_;
				_tmp158_ = soy_atoms_vector_get_z (_tmp157_);
				_tmp159_ = _tmp158_;
				_tmp149_[_tmp150_ + 11] = (GLfloat) _tmp159_;
				_tmp160_ = _tmp149_[_tmp150_ + 11];
				_g_object_unref0 (_tmp157_);
				_g_object_unref0 (_tmp154_);
				_tmp161_ = offset;
				offset = _tmp161_ + 12;
				_tmp162_ = vert_index;
				vert_index = _tmp162_ + 1;
			}
		}
	}
}


static void _soy_bodies_mesh_face_set (soybodiesMesh* self, soyatomsFace* face) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (face != NULL);
	{
		GeeHashMap* _tmp0_;
		GeeSet* _tmp1_;
		GeeSet* _tmp2_;
		GeeSet* _tmp3_;
		GeeIterator* _tmp4_ = NULL;
		GeeIterator* _tmp5_;
		GeeIterator* _index_it;
		_tmp0_ = self->priv->_face_objs;
		_tmp1_ = gee_abstract_map_get_keys ((GeeMap*) _tmp0_);
		_tmp2_ = _tmp1_;
		_tmp3_ = _tmp2_;
		_tmp4_ = gee_iterable_iterator ((GeeIterable*) _tmp3_);
		_tmp5_ = _tmp4_;
		_g_object_unref0 (_tmp3_);
		_index_it = _tmp5_;
		while (TRUE) {
			GeeIterator* _tmp6_;
			gboolean _tmp7_ = FALSE;
			GeeIterator* _tmp8_;
			gpointer _tmp9_ = NULL;
			gint index;
			GeeHashMap* _tmp10_;
			gint _tmp11_;
			gpointer _tmp12_ = NULL;
			soyatomsFace* _tmp13_;
			_tmp6_ = _index_it;
			_tmp7_ = gee_iterator_next (_tmp6_);
			if (!_tmp7_) {
				break;
			}
			_tmp8_ = _index_it;
			_tmp9_ = gee_iterator_get (_tmp8_);
			index = (gint) ((gintptr) _tmp9_);
			_tmp10_ = self->priv->_face_objs;
			_tmp11_ = index;
			_tmp12_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp10_, (gpointer) ((gintptr) _tmp11_));
			_tmp13_ = face;
			if (((soyatomsFace*) _tmp12_) == _tmp13_) {
				gint _tmp14_;
				soyatomsFace* _tmp15_;
				g_mutex_lock (&((soybodiesBody*) self)->mutex);
				_tmp14_ = index;
				_tmp15_ = face;
				_soy_bodies_mesh_update_verts (self, _tmp14_, _tmp15_);
				g_mutex_unlock (&((soybodiesBody*) self)->mutex);
			}
		}
		_g_object_unref0 (_index_it);
	}
}


GLfloat* soy_bodies_mesh_get_raw_verts (soybodiesMesh* self) {
	GLfloat* result = NULL;
	GLfloat* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_verts;
	result = _tmp0_;
	return result;
}


void soy_bodies_mesh_set_raw_verts (soybodiesMesh* self, GLfloat* verts) {
	gint _tmp0_;
	gint _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = soy_bodies_mesh_get_length (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_ != 0) {
		{
			gint i;
			i = 0;
			{
				gboolean _tmp2_;
				_tmp2_ = TRUE;
				while (TRUE) {
					gboolean _tmp3_;
					gint _tmp5_;
					gint _tmp6_;
					GLfloat* _tmp7_;
					gint _tmp8_;
					GLfloat* _tmp9_;
					gint _tmp10_;
					GLfloat _tmp11_;
					GLfloat _tmp12_;
					_tmp3_ = _tmp2_;
					if (!_tmp3_) {
						gint _tmp4_;
						_tmp4_ = i;
						i = _tmp4_ + 1;
					}
					_tmp2_ = FALSE;
					_tmp5_ = soy_bodies_mesh_get_length (self);
					_tmp6_ = _tmp5_;
					if (!(i <= (_tmp6_ * 36))) {
						break;
					}
					_tmp7_ = self->priv->_verts;
					_tmp8_ = i;
					_tmp9_ = verts;
					_tmp10_ = i;
					_tmp11_ = _tmp9_[_tmp10_];
					_tmp7_[_tmp8_] = _tmp11_;
					_tmp12_ = _tmp7_[_tmp8_];
				}
			}
		}
	}
}


soybodiesMesh* soy_bodies_mesh_clone (soybodiesMesh* self) {
	soybodiesMesh* result = NULL;
	soyatomsPosition* _tmp0_;
	soyatomsPosition* _tmp1_;
	soyatomsPosition* _tmp2_;
	soybodiesMesh* _tmp3_;
	soybodiesMesh* _tmp4_;
	soybodiesMesh* mesh;
	gint _tmp5_;
	gint _tmp6_;
	GLfloat* _tmp7_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = soy_bodies_body_get_position ((soybodiesBody*) self);
	_tmp1_ = _tmp0_;
	_tmp2_ = _tmp1_;
	_tmp3_ = soy_bodies_mesh_new (_tmp2_);
	_tmp4_ = _tmp3_;
	_g_object_unref0 (_tmp2_);
	mesh = _tmp4_;
	_tmp5_ = soy_bodies_mesh_get_length (self);
	_tmp6_ = _tmp5_;
	soy_bodies_mesh_set_length (mesh, _tmp6_);
	_tmp7_ = soy_bodies_mesh_get_raw_verts (self);
	soy_bodies_mesh_set_raw_verts (mesh, _tmp7_);
	result = mesh;
	return result;
}


soyatomsMorph* soy_bodies_mesh_morph (soybodiesMesh* self, soybodiesMesh* variant, gfloat delta) {
	soyatomsMorph* result = NULL;
	soybodiesMesh* _tmp0_;
	gfloat _tmp1_;
	soyatomsMorph* _tmp2_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (variant != NULL, NULL);
	_tmp0_ = variant;
	_tmp1_ = delta;
	_tmp2_ = soy_atoms_morph_new_with_delta (self, _tmp0_, _tmp1_);
	result = _tmp2_;
	return result;
}


static void _soy_bodies_mesh_resize (soybodiesMesh* self, gint length) {
	gulong buffer_size = 0UL;
	gint _tmp0_;
	gulong _tmp1_;
	gint _tmp12_;
	g_return_if_fail (self != NULL);
	g_mutex_lock (&((soybodiesBody*) self)->mutex);
	_tmp0_ = length;
	buffer_size = (_tmp0_ * 36) * sizeof (GLfloat);
	_tmp1_ = buffer_size;
	if (_tmp1_ == ((gulong) 0)) {
		gint _tmp2_;
		_tmp2_ = self->priv->_length;
		if (_tmp2_ != 0) {
			GLfloat* _tmp3_;
			_tmp3_ = self->priv->_verts;
			g_free (_tmp3_);
			self->priv->_verts = NULL;
		}
	} else {
		gint _tmp4_;
		_tmp4_ = self->priv->_length;
		if (_tmp4_ != 0) {
			gint _tmp5_;
			gint _tmp6_;
			_tmp5_ = self->priv->_length;
			_tmp6_ = length;
			if (_tmp5_ != _tmp6_) {
				GLfloat* _tmp7_;
				gulong _tmp8_;
				void* _tmp9_ = NULL;
				_tmp7_ = self->priv->_verts;
				_tmp8_ = buffer_size;
				_tmp9_ = g_realloc (_tmp7_, (gsize) _tmp8_);
				self->priv->_verts = (GLfloat*) _tmp9_;
			}
		} else {
			gulong _tmp10_;
			void* _tmp11_ = NULL;
			_tmp10_ = buffer_size;
			_tmp11_ = g_malloc0 ((gsize) _tmp10_);
			self->priv->_verts = (GLfloat*) _tmp11_;
		}
	}
	_tmp12_ = length;
	self->priv->_length = (gint) ((GLsizei) _tmp12_);
	g_mutex_unlock (&((soybodiesBody*) self)->mutex);
}


static void soy_bodies_mesh_real_render (soybodiesBody* base, gboolean alpha_stage, soybodiesCamera* camera, gint level) {
	soybodiesMesh * self;
	self = (soybodiesMesh*) base;
	g_return_if_fail (camera != NULL);
	return;
}


gint soy_bodies_mesh_get_length (soybodiesMesh* self) {
	gint result;
	gint _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->priv->_length;
	result = _tmp0_;
	return result;
}


void soy_bodies_mesh_set_length (soybodiesMesh* self, gint value) {
	gint _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_soy_bodies_mesh_resize (self, _tmp0_);
	g_object_notify ((GObject *) self, "length");
}


static GObject * soy_bodies_mesh_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties) {
	GObject * obj;
	GObjectClass * parent_class;
	soybodiesMesh * self;
	GeeArrayList* _tmp0_;
	GeeHashMap* _tmp1_;
	GeeHashMap* _tmp2_;
	parent_class = G_OBJECT_CLASS (soy_bodies_mesh_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_BODIES_TYPE_MESH, soybodiesMesh);
	_tmp0_ = gee_array_list_new (SOY_MATERIALS_TYPE_MATERIAL, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
	_g_object_unref0 (self->priv->_materials);
	self->priv->_materials = _tmp0_;
	_tmp1_ = gee_hash_map_new (G_TYPE_INT, NULL, NULL, SOY_ATOMS_TYPE_FACE, NULL, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->_face_objs);
	self->priv->_face_objs = _tmp1_;
	_tmp2_ = gee_hash_map_new (G_TYPE_INT, NULL, NULL, SOY_ATOMS_TYPE_VERTEX, NULL, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->_vert_objs);
	self->priv->_vert_objs = _tmp2_;
	self->priv->_glEBO = (GLuint) 0;
	self->priv->_glVBO = (GLuint) 0;
	return obj;
}


static void soy_bodies_mesh_class_init (soybodiesMeshClass * klass) {
	soy_bodies_mesh_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (soybodiesMeshPrivate));
	SOY_BODIES_BODY_CLASS (klass)->render = soy_bodies_mesh_real_render;
	G_OBJECT_CLASS (klass)->get_property = _vala_soy_bodies_mesh_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_soy_bodies_mesh_set_property;
	G_OBJECT_CLASS (klass)->constructor = soy_bodies_mesh_constructor;
	G_OBJECT_CLASS (klass)->finalize = soy_bodies_mesh_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_BODIES_MESH_LENGTH, g_param_spec_int ("length", "length", "length", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
}


static void soy_bodies_mesh_instance_init (soybodiesMesh * self) {
	self->priv = SOY_BODIES_MESH_GET_PRIVATE (self);
}


static void soy_bodies_mesh_finalize (GObject* obj) {
	soybodiesMesh * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_BODIES_TYPE_MESH, soybodiesMesh);
	_soy_bodies_mesh_resize (self, 0);
	_g_object_unref0 (self->priv->_materials);
	_g_object_unref0 (self->priv->_face_objs);
	_g_object_unref0 (self->priv->_vert_objs);
	G_OBJECT_CLASS (soy_bodies_mesh_parent_class)->finalize (obj);
}


GType soy_bodies_mesh_get_type (void) {
	static volatile gsize soy_bodies_mesh_type_id__volatile = 0;
	if (g_once_init_enter (&soy_bodies_mesh_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soybodiesMeshClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_bodies_mesh_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soybodiesMesh), 0, (GInstanceInitFunc) soy_bodies_mesh_instance_init, NULL };
		GType soy_bodies_mesh_type_id;
		soy_bodies_mesh_type_id = g_type_register_static (SOY_BODIES_TYPE_BODY, "soybodiesMesh", &g_define_type_info, 0);
		g_once_init_leave (&soy_bodies_mesh_type_id__volatile, soy_bodies_mesh_type_id);
	}
	return soy_bodies_mesh_type_id__volatile;
}


static void _vala_soy_bodies_mesh_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	soybodiesMesh * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_BODIES_TYPE_MESH, soybodiesMesh);
	switch (property_id) {
		case SOY_BODIES_MESH_LENGTH:
		g_value_set_int (value, soy_bodies_mesh_get_length (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_soy_bodies_mesh_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	soybodiesMesh * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_BODIES_TYPE_MESH, soybodiesMesh);
	switch (property_id) {
		case SOY_BODIES_MESH_LENGTH:
		soy_bodies_mesh_set_length (self, g_value_get_int (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}




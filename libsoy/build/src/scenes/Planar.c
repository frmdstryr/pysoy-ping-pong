/* Planar.c generated by valac 0.20.1, the Vala compiler
 * generated from Planar.gs, do not modify */

/*
 *  libsoy - soy.scenes.Planar
 *  Copyright (C) 2006,2007,2008,2009,2010,2011,2012,2013 Copyleft Games Group
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published
 *  by the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program; if not, see http://www.gnu.org/licenses
 *
 */

#include <glib.h>
#include <glib-object.h>
#include <GLES/gl.h>
#include <GLES/glext.h>
#include <soy-1/ode.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <float.h>
#include <math.h>


#define SOY_SCENES_TYPE_SCENE (soy_scenes_scene_get_type ())
#define SOY_SCENES_SCENE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE_SCENE, soyscenesScene))
#define SOY_SCENES_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))
#define SOY_SCENES_IS_SCENE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_IS_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_SCENE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))

typedef struct _soyscenesScene soyscenesScene;
typedef struct _soyscenesSceneClass soyscenesSceneClass;
typedef struct _soyscenesScenePrivate soyscenesScenePrivate;

#define SOY_BODIES_TYPE_BODY (soy_bodies_body_get_type ())
#define SOY_BODIES_BODY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_BODY, soybodiesBody))
#define SOY_BODIES_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))
#define SOY_BODIES_IS_BODY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_IS_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_BODY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))

typedef struct _soybodiesBody soybodiesBody;
typedef struct _soybodiesBodyClass soybodiesBodyClass;

#define SOY_BODIES_TYPE_CAMERA (soy_bodies_camera_get_type ())
#define SOY_BODIES_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_CAMERA, soybodiesCamera))
#define SOY_BODIES_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_CAMERA, soybodiesCameraClass))
#define SOY_BODIES_IS_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_CAMERA))
#define SOY_BODIES_IS_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_CAMERA))
#define SOY_BODIES_CAMERA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_CAMERA, soybodiesCameraClass))

typedef struct _soybodiesCamera soybodiesCamera;
typedef struct _soybodiesCameraClass soybodiesCameraClass;

#define SOY_BODIES_TYPE_LIGHT (soy_bodies_light_get_type ())
#define SOY_BODIES_LIGHT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_LIGHT, soybodiesLight))
#define SOY_BODIES_LIGHT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_LIGHT, soybodiesLightClass))
#define SOY_BODIES_IS_LIGHT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_LIGHT))
#define SOY_BODIES_IS_LIGHT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_LIGHT))
#define SOY_BODIES_LIGHT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_LIGHT, soybodiesLightClass))

typedef struct _soybodiesLight soybodiesLight;
typedef struct _soybodiesLightClass soybodiesLightClass;

#define SOY_JOINTS_TYPE_JOINT (soy_joints_joint_get_type ())
#define SOY_JOINTS_JOINT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_JOINTS_TYPE_JOINT, soyjointsJoint))
#define SOY_JOINTS_JOINT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_JOINTS_TYPE_JOINT, soyjointsJointClass))
#define SOY_JOINTS_IS_JOINT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_JOINTS_TYPE_JOINT))
#define SOY_JOINTS_IS_JOINT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_JOINTS_TYPE_JOINT))
#define SOY_JOINTS_JOINT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_JOINTS_TYPE_JOINT, soyjointsJointClass))

typedef struct _soyjointsJoint soyjointsJoint;
typedef struct _soyjointsJointClass soyjointsJointClass;

#define SOY_CONTROLLERS_TYPE_CONTROLLER (soy_controllers_controller_get_type ())
#define SOY_CONTROLLERS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersController))
#define SOY_CONTROLLERS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersControllerClass))
#define SOY_CONTROLLERS_IS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER))
#define SOY_CONTROLLERS_IS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_TYPE_CONTROLLER))
#define SOY_CONTROLLERS_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersControllerClass))

typedef struct _soycontrollersController soycontrollersController;
typedef struct _soycontrollersControllerClass soycontrollersControllerClass;

#define SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER (soy_controllers_virtual_controller_get_type ())
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualController))
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualControllerClass))
#define SOY_CONTROLLERS_IS_VIRTUAL_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER))
#define SOY_CONTROLLERS_IS_VIRTUAL_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER))
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualControllerClass))

typedef struct _soycontrollersVirtualController soycontrollersVirtualController;
typedef struct _soycontrollersVirtualControllerClass soycontrollersVirtualControllerClass;

#define SOY_FIELDS_TYPE_FIELD (soy_fields_field_get_type ())
#define SOY_FIELDS_FIELD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_FIELDS_TYPE_FIELD, soyfieldsField))
#define SOY_FIELDS_FIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_FIELDS_TYPE_FIELD, soyfieldsFieldClass))
#define SOY_FIELDS_IS_FIELD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_FIELDS_TYPE_FIELD))
#define SOY_FIELDS_IS_FIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_FIELDS_TYPE_FIELD))
#define SOY_FIELDS_FIELD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_FIELDS_TYPE_FIELD, soyfieldsFieldClass))

typedef struct _soyfieldsField soyfieldsField;
typedef struct _soyfieldsFieldClass soyfieldsFieldClass;

#define SOY_SCENES_TYPE_PLANAR (soy_scenes_planar_get_type ())
#define SOY_SCENES_PLANAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE_PLANAR, soyscenesPlanar))
#define SOY_SCENES_PLANAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE_PLANAR, soyscenesPlanarClass))
#define SOY_SCENES_IS_PLANAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE_PLANAR))
#define SOY_SCENES_IS_PLANAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE_PLANAR))
#define SOY_SCENES_PLANAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE_PLANAR, soyscenesPlanarClass))

typedef struct _soyscenesPlanar soyscenesPlanar;
typedef struct _soyscenesPlanarClass soyscenesPlanarClass;
typedef struct _soyscenesPlanarPrivate soyscenesPlanarPrivate;

#define SOY_MATERIALS_TYPE_MATERIAL (soy_materials_material_get_type ())
#define SOY_MATERIALS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterial))
#define SOY_MATERIALS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))
#define SOY_MATERIALS_IS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_IS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_MATERIAL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))

typedef struct _soymaterialsMaterial soymaterialsMaterial;
typedef struct _soymaterialsMaterialClass soymaterialsMaterialClass;
#define _dGeomDestroy0(var) ((var == NULL) ? NULL : (var = (dGeomDestroy (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define SOY_ATOMS_TYPE_VECTOR (soy_atoms_vector_get_type ())
#define SOY_ATOMS_VECTOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_VECTOR, soyatomsVector))
#define SOY_ATOMS_VECTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_VECTOR, soyatomsVectorClass))
#define SOY_ATOMS_IS_VECTOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_VECTOR))
#define SOY_ATOMS_IS_VECTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_VECTOR))
#define SOY_ATOMS_VECTOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_VECTOR, soyatomsVectorClass))

typedef struct _soyatomsVector soyatomsVector;
typedef struct _soyatomsVectorClass soyatomsVectorClass;

#define SOY_ATOMS_TYPE_POSITION (soy_atoms_position_get_type ())
#define SOY_ATOMS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPosition))
#define SOY_ATOMS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))
#define SOY_ATOMS_IS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_IS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_POSITION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))

typedef struct _soyatomsPosition soyatomsPosition;
typedef struct _soyatomsPositionClass soyatomsPositionClass;
typedef struct _soymaterialsMaterialPrivate soymaterialsMaterialPrivate;
#define _dmatrix3_free0(var) ((var == NULL) ? NULL : (var = (dmatrix3_free (var), NULL)))

struct _soyscenesScene {
	GObject parent_instance;
	soyscenesScenePrivate * priv;
	struct dxSpace* space;
	GeeHashSet* lights;
	GeeHashMap* bodies;
	GeeArrayList* joints;
	GeeHashSet* Controllers;
	GeeHashMap* fields;
	GLfloat* tslvs;
	gint tslvs_length1;
	GLfloat* colTexels;
};

struct _soyscenesSceneClass {
	GObjectClass parent_class;
	void (*do_in_step) (soyscenesScene* self);
	void (*render) (soyscenesScene* self, GLfloat fov, GLfloat aspect, GLfloat znear, GLfloat zfar, soybodiesCamera* camera, gint level);
	void (*render_extra) (soyscenesScene* self);
};

struct _soyscenesPlanar {
	soyscenesScene parent_instance;
	soyscenesPlanarPrivate * priv;
	GMutex mutex;
};

struct _soyscenesPlanarClass {
	soyscenesSceneClass parent_class;
};

struct _soyscenesPlanarPrivate {
	gfloat _offset;
	gint _step;
	gint _size;
	struct dxGeom* _planeID;
	GLuint _ebo;
	GLuint _vbo;
	gboolean _updated;
	GLfloat* _vercache;
	gint _vercache_length1;
	gint __vercache_size_;
	soymaterialsMaterial* _material;
	gfloat _scale;
};

struct _soymaterialsMaterial {
	GObject parent_instance;
	soymaterialsMaterialPrivate * priv;
	gboolean needsTSLVs;
	gboolean translucent;
};

struct _soymaterialsMaterialClass {
	GObjectClass parent_class;
	gboolean (*render) (soymaterialsMaterial* self, gint step, GLvoid* tslvs, dxMatrix3* texmatrix);
	GLenum* (*get_draw_mode) (soymaterialsMaterial* self);
};


static gpointer soy_scenes_planar_parent_class = NULL;
extern gulong GeomScene;

GType soy_scenes_scene_get_type (void) G_GNUC_CONST;
GType soy_bodies_body_get_type (void) G_GNUC_CONST;
GType soy_bodies_camera_get_type (void) G_GNUC_CONST;
GType soy_bodies_light_get_type (void) G_GNUC_CONST;
GType soy_joints_joint_get_type (void) G_GNUC_CONST;
GType soy_controllers_controller_get_type (void) G_GNUC_CONST;
GType soy_controllers_virtual_controller_get_type (void) G_GNUC_CONST;
GType soy_fields_field_get_type (void) G_GNUC_CONST;
GType soy_scenes_planar_get_type (void) G_GNUC_CONST;
GType soy_materials_material_get_type (void) G_GNUC_CONST;
#define SOY_SCENES_PLANAR_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SOY_SCENES_TYPE_PLANAR, soyscenesPlanarPrivate))
enum  {
	SOY_SCENES_PLANAR_DUMMY_PROPERTY,
	SOY_SCENES_PLANAR_MATERIAL,
	SOY_SCENES_PLANAR_SCALE
};
soyscenesPlanar* soy_scenes_planar_new (gfloat offset, gint step, soymaterialsMaterial* material);
soyscenesPlanar* soy_scenes_planar_construct (GType object_type, gfloat offset, gint step, soymaterialsMaterial* material);
soyscenesScene* soy_scenes_scene_new (void);
soyscenesScene* soy_scenes_scene_construct (GType object_type);
void soy_scenes_planar_set_scale (soyscenesPlanar* self, gfloat value);
soyatomsVector* soy_atoms_vector_new (gfloat x, gfloat y, gfloat z);
soyatomsVector* soy_atoms_vector_construct (GType object_type, gfloat x, gfloat y, gfloat z);
GType soy_atoms_vector_get_type (void) G_GNUC_CONST;
void soy_scenes_scene_set_gravity (soyscenesScene* self, soyatomsVector* value);
soymaterialsMaterial* soy_materials_material_new (void);
soymaterialsMaterial* soy_materials_material_construct (GType object_type);
void soy_scenes_scene_set_rotation (soyscenesScene* self, GLfloat* value, int value_length1);
soyatomsPosition* soy_atoms_position_new (gfloat x, gfloat y, gfloat z);
soyatomsPosition* soy_atoms_position_construct (GType object_type, gfloat x, gfloat y, gfloat z);
GType soy_atoms_position_get_type (void) G_GNUC_CONST;
void soy_scenes_scene_set_position (soyscenesScene* self, soyatomsPosition* value);
static void soy_scenes_planar_real_render_extra (soyscenesScene* base);
static void _soy_scenes_planar_update_scene (soyscenesPlanar* self);
soyatomsPosition* soy_scenes_scene_get_position (soyscenesScene* self);
void soy_atoms_position_set_x (soyatomsPosition* self, gfloat value);
void soy_atoms_position_set_z (soyatomsPosition* self, gfloat value);
void soy_bodies_light_on (soybodiesLight* self, GLenum id);
void soy_scenes_scene_calculateTSLV (soyscenesScene* self, GLfloat* vertices, int vertices_length1);
gboolean soy_materials_material_render (soymaterialsMaterial* self, gint step, GLvoid* tslvs, dxMatrix3* texmatrix);
static GLfloat* _vala_array_dup8 (GLfloat* self, int length);
soymaterialsMaterial* soy_scenes_planar_get_material (soyscenesPlanar* self);
void soy_scenes_planar_set_material (soyscenesPlanar* self, soymaterialsMaterial* value);
gfloat soy_scenes_planar_get_scale (soyscenesPlanar* self);
static void soy_scenes_planar_finalize (GObject* obj);
static void _vala_soy_scenes_planar_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_soy_scenes_planar_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
static void _vala_clear_GMutex (GMutex * mutex);
static void _vala_clear_GRecMutex (GRecMutex * mutex);
static void _vala_clear_GRWLock (GRWLock * mutex);
static void _vala_clear_GCond (GCond * mutex);


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


soyscenesPlanar* soy_scenes_planar_construct (GType object_type, gfloat offset, gint step, soymaterialsMaterial* material) {
	soyscenesPlanar * self = NULL;
	soyatomsVector* _tmp0_;
	soyatomsVector* _tmp1_;
	gfloat _tmp2_;
	gint _tmp3_;
	struct dxSpace* _tmp4_;
	gfloat _tmp5_;
	struct dxGeom* _tmp6_;
	struct dxGeom* _tmp7_;
	gulong _tmp8_;
	struct dxGeom* _tmp9_;
	soymaterialsMaterial* _tmp10_;
	GLfloat* _tmp14_ = NULL;
	GLfloat* _tmp15_;
	gint _tmp15__length1;
	soyatomsPosition* _tmp16_;
	soyatomsPosition* _tmp17_;
	self = (soyscenesPlanar*) soy_scenes_scene_construct (object_type);
	self->priv->_ebo = (GLuint) 0;
	self->priv->_updated = TRUE;
	soy_scenes_planar_set_scale (self, 1.0f);
	_vala_clear_GMutex (&self->mutex);
	g_mutex_init (&self->mutex);
	_tmp0_ = soy_atoms_vector_new (0.0f, -9.8f, 0.0f);
	_tmp1_ = _tmp0_;
	soy_scenes_scene_set_gravity ((soyscenesScene*) self, _tmp1_);
	_g_object_unref0 (_tmp1_);
	_tmp2_ = offset;
	self->priv->_offset = _tmp2_;
	_tmp3_ = step;
	self->priv->_step = _tmp3_;
	_tmp4_ = ((soyscenesScene*) self)->space;
	_tmp5_ = self->priv->_offset;
	_tmp6_ = dCreatePlane (_tmp4_, (dReal) 0.0f, (dReal) 1.0f, (dReal) 0.0f, (dReal) _tmp5_);
	_dGeomDestroy0 (self->priv->_planeID);
	self->priv->_planeID = _tmp6_;
	_tmp7_ = self->priv->_planeID;
	_tmp8_ = GeomScene;
	dGeomSetCategoryBits (_tmp7_, _tmp8_);
	_tmp9_ = self->priv->_planeID;
	dGeomSetData (_tmp9_, (void*) self);
	_tmp10_ = material;
	if (_tmp10_ != NULL) {
		soymaterialsMaterial* _tmp11_;
		soymaterialsMaterial* _tmp12_;
		_tmp11_ = material;
		_tmp12_ = _g_object_ref0 (_tmp11_);
		_g_object_unref0 (self->priv->_material);
		self->priv->_material = _tmp12_;
	} else {
		soymaterialsMaterial* _tmp13_;
		_tmp13_ = soy_materials_material_new ();
		_g_object_unref0 (self->priv->_material);
		self->priv->_material = _tmp13_;
	}
	_tmp14_ = g_new0 (GLfloat, 9);
	_tmp14_[0] = (GLfloat) 1.0f;
	_tmp14_[1] = (GLfloat) 0.0f;
	_tmp14_[2] = (GLfloat) 0.0f;
	_tmp14_[3] = (GLfloat) 0.0f;
	_tmp14_[4] = (GLfloat) 1.0f;
	_tmp14_[5] = (GLfloat) 0.0f;
	_tmp14_[6] = (GLfloat) 0.0f;
	_tmp14_[7] = (GLfloat) 0.0f;
	_tmp14_[8] = (GLfloat) 1.0f;
	_tmp15_ = _tmp14_;
	_tmp15__length1 = 9;
	soy_scenes_scene_set_rotation ((soyscenesScene*) self, _tmp15_, 9);
	_tmp15_ = (g_free (_tmp15_), NULL);
	_tmp16_ = soy_atoms_position_new (0.0f, 0.0f, 0.0f);
	_tmp17_ = _tmp16_;
	soy_scenes_scene_set_position ((soyscenesScene*) self, _tmp17_);
	_g_object_unref0 (_tmp17_);
	return self;
}


soyscenesPlanar* soy_scenes_planar_new (gfloat offset, gint step, soymaterialsMaterial* material) {
	return soy_scenes_planar_construct (SOY_SCENES_TYPE_PLANAR, offset, step, material);
}


static void soy_scenes_planar_real_render_extra (soyscenesScene* base) {
	soyscenesPlanar * self;
	gint i;
	gint tslvoffset;
	dxMatrix3* _tmp0_;
	dxMatrix3* translate;
	gboolean _tmp1_;
	GLfloat* _tmp4_ = NULL;
	GLfloat* matrix;
	gint matrix_length1;
	gint _matrix_size_;
	GLfloat* _tmp5_;
	gint _tmp5__length1;
	GLfloat* _tmp6_;
	gint _tmp6__length1;
	GLfloat _tmp7_;
	GLfloat* _tmp8_;
	gint _tmp8__length1;
	GLfloat _tmp9_;
	GLfloat* _tmp10_;
	gint _tmp10__length1;
	GLfloat _tmp11_;
	GLfloat* _tmp12_;
	gint _tmp12__length1;
	GLfloat _tmp13_;
	GLfloat* _tmp14_;
	gint _tmp14__length1;
	GLfloat _tmp15_;
	GLfloat* _tmp16_;
	gint _tmp16__length1;
	GLfloat _tmp17_;
	GLfloat* _tmp18_;
	gint _tmp18__length1;
	GLfloat _tmp19_;
	GLfloat* _tmp20_;
	gint _tmp20__length1;
	GLfloat _tmp21_;
	GLfloat* _tmp22_;
	gint _tmp22__length1;
	GLfloat _tmp23_;
	GLfloat* _tmp24_;
	gint _tmp24__length1;
	GLfloat _tmp25_;
	GLfloat* _tmp26_;
	gint _tmp26__length1;
	GLfloat _tmp27_;
	GLfloat* _tmp28_;
	gint _tmp28__length1;
	GLfloat _tmp29_;
	soyatomsPosition* _tmp30_;
	soyatomsPosition* _tmp31_;
	GLfloat* _tmp32_;
	gint _tmp32__length1;
	GLfloat _tmp33_;
	GLfloat* _tmp34_;
	gint _tmp34__length1;
	GLfloat _tmp35_;
	GLfloat* _tmp36_;
	gint _tmp36__length1;
	GLfloat _tmp37_;
	GLfloat* _tmp38_;
	gint _tmp38__length1;
	GLfloat _tmp39_;
	GLfloat* _tmp40_;
	gint _tmp40__length1;
	GLfloat _tmp41_;
	GLfloat* _tmp42_;
	gint _tmp42__length1;
	GLfloat _tmp43_;
	soyatomsPosition* _tmp44_;
	soyatomsPosition* _tmp45_;
	GLfloat* _tmp46_;
	gint _tmp46__length1;
	GLfloat _tmp47_;
	GLfloat* _tmp48_;
	gint _tmp48__length1;
	GLfloat _tmp49_;
	GLfloat* _tmp50_;
	gint _tmp50__length1;
	GLfloat _tmp51_;
	GLfloat* _tmp52_;
	gint _tmp52__length1;
	GLfloat _tmp53_;
	GLfloat* _tmp54_;
	gint _tmp54__length1;
	GLfloat _tmp55_;
	GLfloat* _tmp56_;
	gint _tmp56__length1;
	GLfloat _tmp57_;
	dxMatrix3* _tmp58_;
	dxMatrix3* _tmp59_;
	dxMatrix3* _tmp60_;
	dxMatrix3* _tmp61_;
	GLfloat* _tmp62_;
	gint _tmp62__length1;
	GLfloat _tmp63_;
	GLfloat* _tmp64_;
	gint _tmp64__length1;
	GLfloat _tmp65_;
	GLfloat* _tmp66_;
	gint _tmp66__length1;
	GLfloat _tmp67_;
	GLfloat* _tmp68_;
	gint _tmp68__length1;
	GLfloat _tmp69_;
	GLfloat* _tmp70_;
	gint _tmp70__length1;
	GLfloat _tmp71_;
	GLfloat* _tmp72_;
	gint _tmp72__length1;
	GLfloat _tmp73_;
	gfloat _tmp74_;
	dxMatrix3* _tmp75_;
	GLfloat* _tmp76_;
	gint _tmp76__length1;
	GLfloat _tmp77_;
	GLfloat* _tmp78_;
	gint _tmp78__length1;
	GLfloat _tmp79_;
	GLfloat* _tmp80_;
	gint _tmp80__length1;
	GLfloat _tmp81_;
	GLfloat* _tmp82_;
	gint _tmp82__length1;
	GLfloat _tmp83_;
	GLfloat* _tmp84_;
	gint _tmp84__length1;
	GLfloat _tmp85_;
	GLfloat* _tmp86_;
	gint _tmp86__length1;
	GLfloat _tmp87_;
	gfloat _tmp88_;
	GLenum j;
	soymaterialsMaterial* _tmp98_;
	gboolean _tmp99_;
	self = (soyscenesPlanar*) base;
	i = 0;
	tslvoffset = 0;
	_tmp0_ = dmatrix3_new ();
	translate = _tmp0_;
	glMatrixMode (GL_MODELVIEW);
	glPushMatrix ();
	g_mutex_lock (&self->mutex);
	_tmp1_ = self->priv->_updated;
	if (_tmp1_) {
		_soy_scenes_planar_update_scene (self);
	} else {
		GLuint _tmp2_;
		GLuint _tmp3_;
		_tmp2_ = self->priv->_ebo;
		glBindBuffer (GL_ELEMENT_ARRAY_BUFFER, _tmp2_);
		_tmp3_ = self->priv->_vbo;
		glBindBuffer (GL_ARRAY_BUFFER, _tmp3_);
	}
	glVertexPointer ((GLint) 3, GL_FLOAT, (GLsizei) (sizeof (GLfloat) * 11), NULL);
	glNormalPointer (GL_FLOAT, (GLsizei) (sizeof (GLfloat) * 11), (GLvoid*) (sizeof (GLfloat) * 3));
	glTexCoordPointer ((GLint) 2, GL_FLOAT, (GLsizei) (sizeof (GLfloat) * 11), (GLvoid*) (sizeof (GLfloat) * 6));
	_tmp4_ = g_new0 (GLfloat, 16);
	matrix = _tmp4_;
	matrix_length1 = 16;
	_matrix_size_ = matrix_length1;
	_tmp5_ = matrix;
	_tmp5__length1 = matrix_length1;
	glGetFloatv (GL_MODELVIEW_MATRIX, _tmp5_);
	_tmp6_ = matrix;
	_tmp6__length1 = matrix_length1;
	_tmp7_ = _tmp6_[0];
	_tmp8_ = matrix;
	_tmp8__length1 = matrix_length1;
	_tmp9_ = _tmp8_[12];
	_tmp10_ = matrix;
	_tmp10__length1 = matrix_length1;
	_tmp11_ = _tmp10_[1];
	_tmp12_ = matrix;
	_tmp12__length1 = matrix_length1;
	_tmp13_ = _tmp12_[13];
	_tmp14_ = matrix;
	_tmp14__length1 = matrix_length1;
	_tmp15_ = _tmp14_[2];
	_tmp16_ = matrix;
	_tmp16__length1 = matrix_length1;
	_tmp17_ = _tmp16_[14];
	_tmp18_ = matrix;
	_tmp18__length1 = matrix_length1;
	_tmp19_ = _tmp18_[8];
	_tmp20_ = matrix;
	_tmp20__length1 = matrix_length1;
	_tmp21_ = _tmp20_[12];
	_tmp22_ = matrix;
	_tmp22__length1 = matrix_length1;
	_tmp23_ = _tmp22_[9];
	_tmp24_ = matrix;
	_tmp24__length1 = matrix_length1;
	_tmp25_ = _tmp24_[13];
	_tmp26_ = matrix;
	_tmp26__length1 = matrix_length1;
	_tmp27_ = _tmp26_[10];
	_tmp28_ = matrix;
	_tmp28__length1 = matrix_length1;
	_tmp29_ = _tmp28_[14];
	glTranslatef (-(((_tmp7_ * _tmp9_) + (_tmp11_ * _tmp13_)) + (_tmp15_ * _tmp17_)), (GLfloat) 0, -(((_tmp19_ * _tmp21_) + (_tmp23_ * _tmp25_)) + (_tmp27_ * _tmp29_)));
	_tmp30_ = soy_scenes_scene_get_position ((soyscenesScene*) self);
	_tmp31_ = _tmp30_;
	_tmp32_ = matrix;
	_tmp32__length1 = matrix_length1;
	_tmp33_ = _tmp32_[0];
	_tmp34_ = matrix;
	_tmp34__length1 = matrix_length1;
	_tmp35_ = _tmp34_[12];
	_tmp36_ = matrix;
	_tmp36__length1 = matrix_length1;
	_tmp37_ = _tmp36_[1];
	_tmp38_ = matrix;
	_tmp38__length1 = matrix_length1;
	_tmp39_ = _tmp38_[13];
	_tmp40_ = matrix;
	_tmp40__length1 = matrix_length1;
	_tmp41_ = _tmp40_[2];
	_tmp42_ = matrix;
	_tmp42__length1 = matrix_length1;
	_tmp43_ = _tmp42_[14];
	soy_atoms_position_set_x (_tmp31_, (gfloat) (((_tmp33_ * _tmp35_) + (_tmp37_ * _tmp39_)) + (_tmp41_ * _tmp43_)));
	_tmp44_ = soy_scenes_scene_get_position ((soyscenesScene*) self);
	_tmp45_ = _tmp44_;
	_tmp46_ = matrix;
	_tmp46__length1 = matrix_length1;
	_tmp47_ = _tmp46_[8];
	_tmp48_ = matrix;
	_tmp48__length1 = matrix_length1;
	_tmp49_ = _tmp48_[12];
	_tmp50_ = matrix;
	_tmp50__length1 = matrix_length1;
	_tmp51_ = _tmp50_[9];
	_tmp52_ = matrix;
	_tmp52__length1 = matrix_length1;
	_tmp53_ = _tmp52_[13];
	_tmp54_ = matrix;
	_tmp54__length1 = matrix_length1;
	_tmp55_ = _tmp54_[10];
	_tmp56_ = matrix;
	_tmp56__length1 = matrix_length1;
	_tmp57_ = _tmp56_[14];
	soy_atoms_position_set_z (_tmp45_, (gfloat) (((_tmp47_ * _tmp49_) + (_tmp51_ * _tmp53_)) + (_tmp55_ * _tmp57_)));
	_tmp58_ = translate;
	_tmp58_->m0 = (dReal) 1.0f;
	_tmp59_ = translate;
	_tmp59_->m5 = (dReal) 1.0f;
	_tmp60_ = translate;
	_tmp60_->ma = (dReal) 1.0f;
	_tmp61_ = translate;
	_tmp62_ = matrix;
	_tmp62__length1 = matrix_length1;
	_tmp63_ = _tmp62_[0];
	_tmp64_ = matrix;
	_tmp64__length1 = matrix_length1;
	_tmp65_ = _tmp64_[12];
	_tmp66_ = matrix;
	_tmp66__length1 = matrix_length1;
	_tmp67_ = _tmp66_[1];
	_tmp68_ = matrix;
	_tmp68__length1 = matrix_length1;
	_tmp69_ = _tmp68_[13];
	_tmp70_ = matrix;
	_tmp70__length1 = matrix_length1;
	_tmp71_ = _tmp70_[2];
	_tmp72_ = matrix;
	_tmp72__length1 = matrix_length1;
	_tmp73_ = _tmp72_[14];
	_tmp74_ = self->priv->_scale;
	_tmp61_->m3 = (dReal) ((-(((_tmp63_ * _tmp65_) + (_tmp67_ * _tmp69_)) + (_tmp71_ * _tmp73_))) / _tmp74_);
	_tmp75_ = translate;
	_tmp76_ = matrix;
	_tmp76__length1 = matrix_length1;
	_tmp77_ = _tmp76_[8];
	_tmp78_ = matrix;
	_tmp78__length1 = matrix_length1;
	_tmp79_ = _tmp78_[12];
	_tmp80_ = matrix;
	_tmp80__length1 = matrix_length1;
	_tmp81_ = _tmp80_[9];
	_tmp82_ = matrix;
	_tmp82__length1 = matrix_length1;
	_tmp83_ = _tmp82_[13];
	_tmp84_ = matrix;
	_tmp84__length1 = matrix_length1;
	_tmp85_ = _tmp84_[10];
	_tmp86_ = matrix;
	_tmp86__length1 = matrix_length1;
	_tmp87_ = _tmp86_[14];
	_tmp88_ = self->priv->_scale;
	_tmp75_->m7 = (dReal) ((-(((_tmp77_ * _tmp79_) + (_tmp81_ * _tmp83_)) + (_tmp85_ * _tmp87_))) / _tmp88_);
	j = GL_LIGHT0;
	{
		GeeHashSet* _tmp89_;
		GeeIterator* _tmp90_ = NULL;
		GeeIterator* _light_it;
		_tmp89_ = ((soyscenesScene*) self)->lights;
		_tmp90_ = gee_abstract_collection_iterator ((GeeAbstractCollection*) _tmp89_);
		_light_it = _tmp90_;
		while (TRUE) {
			GeeIterator* _tmp91_;
			gboolean _tmp92_ = FALSE;
			GeeIterator* _tmp93_;
			gpointer _tmp94_ = NULL;
			soybodiesLight* light;
			soybodiesLight* _tmp95_;
			GLenum _tmp96_;
			GLenum _tmp97_;
			_tmp91_ = _light_it;
			_tmp92_ = gee_iterator_next (_tmp91_);
			if (!_tmp92_) {
				break;
			}
			_tmp93_ = _light_it;
			_tmp94_ = gee_iterator_get (_tmp93_);
			light = (soybodiesLight*) _tmp94_;
			_tmp95_ = light;
			_tmp96_ = j;
			soy_bodies_light_on (_tmp95_, _tmp96_);
			_tmp97_ = j;
			j = _tmp97_ + 1;
			_g_object_unref0 (light);
		}
		_g_object_unref0 (_light_it);
	}
	_tmp98_ = self->priv->_material;
	_tmp99_ = _tmp98_->needsTSLVs;
	if (_tmp99_) {
		GLfloat* _tmp100_;
		gint _tmp100__length1;
		GLfloat* _tmp101_;
		gint _tmp101__length1;
		gint _tmp102_;
		GLfloat* _tmp103_;
		gint _tmp103__length1;
		GLfloat* _tmp104_;
		gint _tmp104__length1;
		_tmp100_ = self->priv->_vercache;
		_tmp100__length1 = self->priv->_vercache_length1;
		soy_scenes_scene_calculateTSLV ((soyscenesScene*) self, _tmp100_, _tmp100__length1);
		_tmp101_ = ((soyscenesScene*) self)->tslvs;
		_tmp101__length1 = ((soyscenesScene*) self)->tslvs_length1;
		tslvoffset = (gint) (((_tmp101__length1 * sizeof (GLfloat)) * 11) / 3);
		_tmp102_ = tslvoffset;
		_tmp103_ = ((soyscenesScene*) self)->tslvs;
		_tmp103__length1 = ((soyscenesScene*) self)->tslvs_length1;
		_tmp104_ = ((soyscenesScene*) self)->tslvs;
		_tmp104__length1 = ((soyscenesScene*) self)->tslvs_length1;
		glBufferSubData (GL_ARRAY_BUFFER, (GLint) ((GLsizei) _tmp102_), (GLsizei) (_tmp103__length1 * sizeof (GLfloat)), _tmp104_);
	}
	while (TRUE) {
		soymaterialsMaterial* _tmp105_;
		gint _tmp106_;
		gint _tmp107_;
		dxMatrix3* _tmp108_;
		gboolean _tmp109_ = FALSE;
		gint _tmp110_;
		gint _tmp111_;
		_tmp105_ = self->priv->_material;
		_tmp106_ = i;
		_tmp107_ = tslvoffset;
		_tmp108_ = translate;
		_tmp109_ = soy_materials_material_render (_tmp105_, _tmp106_, (GLvoid*) _tmp107_, _tmp108_);
		if (!_tmp109_) {
			break;
		}
		_tmp110_ = self->priv->_step;
		glDrawElements (GL_TRIANGLES, (GLsizei) ((8 + ((_tmp110_ - 1) * 16)) * 3), GL_UNSIGNED_BYTE, (GLvoid*) 0);
		_tmp111_ = i;
		i = _tmp111_ + 1;
	}
	g_mutex_unlock (&self->mutex);
	glMatrixMode (GL_MODELVIEW);
	glPopMatrix ();
	matrix = (g_free (matrix), NULL);
	_dmatrix3_free0 (translate);
}


static GLfloat* _vala_array_dup8 (GLfloat* self, int length) {
	return g_memdup (self, length * sizeof (GLfloat));
}


static void _soy_scenes_planar_update_scene (soyscenesPlanar* self) {
	GLuint _tmp0_;
	gint _tmp3_;
	GLubyte* _tmp4_ = NULL;
	GLubyte* elements;
	gint elements_length1;
	gint _elements_size_;
	gint _tmp5_;
	GLfloat* _tmp6_ = NULL;
	GLfloat* vertices;
	gint vertices_length1;
	gint _vertices_size_;
	GLubyte* _tmp21_;
	gint _tmp21__length1;
	GLubyte _tmp22_;
	GLfloat* _tmp78_;
	gint _tmp78__length1;
	GLfloat _tmp79_;
	GLfloat* _tmp80_;
	gint _tmp80__length1;
	gfloat _tmp81_;
	GLfloat _tmp82_;
	GLfloat* _tmp83_;
	gint _tmp83__length1;
	GLfloat _tmp84_;
	GLfloat* _tmp85_;
	gint _tmp85__length1;
	GLfloat _tmp86_;
	GLfloat* _tmp87_;
	gint _tmp87__length1;
	GLfloat _tmp88_;
	GLfloat* _tmp89_;
	gint _tmp89__length1;
	GLfloat _tmp90_;
	GLfloat* _tmp91_;
	gint _tmp91__length1;
	GLfloat _tmp92_;
	GLfloat* _tmp93_;
	gint _tmp93__length1;
	GLfloat _tmp94_;
	GLfloat* _tmp95_;
	gint _tmp95__length1;
	GLfloat _tmp96_;
	GLfloat* _tmp97_;
	gint _tmp97__length1;
	GLfloat _tmp98_;
	GLfloat* _tmp99_;
	gint _tmp99__length1;
	GLfloat _tmp100_;
	gfloat angle;
	gint _tmp101_;
	gint _tmp102_;
	gint _tmp103_;
	gfloat radius;
	GLfloat* _tmp181_;
	gint _tmp181__length1;
	GLfloat* _tmp182_;
	gint _tmp182__length1;
	GLuint _tmp183_;
	gint _tmp184_;
	GLubyte* _tmp185_;
	gint _tmp185__length1;
	GLuint _tmp186_;
	gint _tmp187_;
	GLfloat* _tmp188_;
	gint _tmp188__length1;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_ebo;
	if (_tmp0_ == ((GLuint) 0)) {
		GLuint _tmp1_ = 0U;
		GLuint _tmp2_ = 0U;
		glGenBuffers ((GLsizei) 1, &_tmp1_);
		self->priv->_ebo = _tmp1_;
		glGenBuffers ((GLsizei) 1, &_tmp2_);
		self->priv->_vbo = _tmp2_;
	}
	_tmp3_ = self->priv->_step;
	_tmp4_ = g_new0 (GLubyte, (8 + ((_tmp3_ - 1) * 16)) * 3);
	elements = _tmp4_;
	elements_length1 = (8 + ((_tmp3_ - 1) * 16)) * 3;
	_elements_size_ = elements_length1;
	_tmp5_ = self->priv->_step;
	_tmp6_ = g_new0 (GLfloat, (1 + (_tmp5_ * 8)) * 14);
	vertices = _tmp6_;
	vertices_length1 = (1 + (_tmp5_ * 8)) * 14;
	_vertices_size_ = vertices_length1;
	{
		gint i;
		i = 0;
		{
			gboolean _tmp7_;
			_tmp7_ = TRUE;
			while (TRUE) {
				gboolean _tmp8_;
				GLubyte* _tmp10_;
				gint _tmp10__length1;
				gint _tmp11_;
				GLubyte _tmp12_;
				GLubyte* _tmp13_;
				gint _tmp13__length1;
				gint _tmp14_;
				gint _tmp15_;
				GLubyte _tmp16_;
				GLubyte* _tmp17_;
				gint _tmp17__length1;
				gint _tmp18_;
				gint _tmp19_;
				GLubyte _tmp20_;
				_tmp8_ = _tmp7_;
				if (!_tmp8_) {
					gint _tmp9_;
					_tmp9_ = i;
					i = _tmp9_ + 1;
				}
				_tmp7_ = FALSE;
				if (!(i <= 7)) {
					break;
				}
				_tmp10_ = elements;
				_tmp10__length1 = elements_length1;
				_tmp11_ = i;
				_tmp10_[_tmp11_ * 3] = (GLubyte) 0;
				_tmp12_ = _tmp10_[_tmp11_ * 3];
				_tmp13_ = elements;
				_tmp13__length1 = elements_length1;
				_tmp14_ = i;
				_tmp15_ = i;
				_tmp13_[(_tmp14_ * 3) + 1] = (GLubyte) (_tmp15_ + 2);
				_tmp16_ = _tmp13_[(_tmp14_ * 3) + 1];
				_tmp17_ = elements;
				_tmp17__length1 = elements_length1;
				_tmp18_ = i;
				_tmp19_ = i;
				_tmp17_[(_tmp18_ * 3) + 2] = (GLubyte) (_tmp19_ + 1);
				_tmp20_ = _tmp17_[(_tmp18_ * 3) + 2];
			}
		}
	}
	_tmp21_ = elements;
	_tmp21__length1 = elements_length1;
	_tmp21_[(7 * 3) + 1] = (GLubyte) 1;
	_tmp22_ = _tmp21_[(7 * 3) + 1];
	{
		gint i;
		i = 1;
		{
			gboolean _tmp23_;
			_tmp23_ = TRUE;
			while (TRUE) {
				gboolean _tmp24_;
				gint _tmp26_;
				GLubyte* _tmp66_;
				gint _tmp66__length1;
				gint _tmp67_;
				gint _tmp68_;
				GLubyte _tmp69_;
				GLubyte* _tmp70_;
				gint _tmp70__length1;
				gint _tmp71_;
				gint _tmp72_;
				GLubyte _tmp73_;
				GLubyte* _tmp74_;
				gint _tmp74__length1;
				gint _tmp75_;
				gint _tmp76_;
				GLubyte _tmp77_;
				_tmp24_ = _tmp23_;
				if (!_tmp24_) {
					gint _tmp25_;
					_tmp25_ = i;
					i = _tmp25_ + 1;
				}
				_tmp23_ = FALSE;
				_tmp26_ = self->priv->_step;
				if (!(i <= (_tmp26_ - 1))) {
					break;
				}
				{
					gint j;
					j = 0;
					{
						gboolean _tmp27_;
						_tmp27_ = TRUE;
						while (TRUE) {
							gboolean _tmp28_;
							GLubyte* _tmp30_;
							gint _tmp30__length1;
							gint _tmp31_;
							gint _tmp32_;
							gint _tmp33_;
							gint _tmp34_;
							GLubyte _tmp35_;
							GLubyte* _tmp36_;
							gint _tmp36__length1;
							gint _tmp37_;
							gint _tmp38_;
							gint _tmp39_;
							gint _tmp40_;
							GLubyte _tmp41_;
							GLubyte* _tmp42_;
							gint _tmp42__length1;
							gint _tmp43_;
							gint _tmp44_;
							gint _tmp45_;
							gint _tmp46_;
							GLubyte _tmp47_;
							GLubyte* _tmp48_;
							gint _tmp48__length1;
							gint _tmp49_;
							gint _tmp50_;
							gint _tmp51_;
							gint _tmp52_;
							GLubyte _tmp53_;
							GLubyte* _tmp54_;
							gint _tmp54__length1;
							gint _tmp55_;
							gint _tmp56_;
							gint _tmp57_;
							gint _tmp58_;
							GLubyte _tmp59_;
							GLubyte* _tmp60_;
							gint _tmp60__length1;
							gint _tmp61_;
							gint _tmp62_;
							gint _tmp63_;
							gint _tmp64_;
							GLubyte _tmp65_;
							_tmp28_ = _tmp27_;
							if (!_tmp28_) {
								gint _tmp29_;
								_tmp29_ = j;
								j = _tmp29_ + 1;
							}
							_tmp27_ = FALSE;
							if (!(j <= 7)) {
								break;
							}
							_tmp30_ = elements;
							_tmp30__length1 = elements_length1;
							_tmp31_ = i;
							_tmp32_ = j;
							_tmp33_ = i;
							_tmp34_ = j;
							_tmp30_[(((_tmp31_ * 8) + _tmp32_) - 4) * 6] = (GLubyte) ((((_tmp33_ - 1) * 8) + _tmp34_) + 1);
							_tmp35_ = _tmp30_[(((_tmp31_ * 8) + _tmp32_) - 4) * 6];
							_tmp36_ = elements;
							_tmp36__length1 = elements_length1;
							_tmp37_ = i;
							_tmp38_ = j;
							_tmp39_ = i;
							_tmp40_ = j;
							_tmp36_[((((_tmp37_ * 8) + _tmp38_) - 4) * 6) + 1] = (GLubyte) ((((_tmp39_ - 1) * 8) + _tmp40_) + 2);
							_tmp41_ = _tmp36_[((((_tmp37_ * 8) + _tmp38_) - 4) * 6) + 1];
							_tmp42_ = elements;
							_tmp42__length1 = elements_length1;
							_tmp43_ = i;
							_tmp44_ = j;
							_tmp45_ = i;
							_tmp46_ = j;
							_tmp42_[((((_tmp43_ * 8) + _tmp44_) - 4) * 6) + 2] = (GLubyte) (((_tmp45_ * 8) + _tmp46_) + 1);
							_tmp47_ = _tmp42_[((((_tmp43_ * 8) + _tmp44_) - 4) * 6) + 2];
							_tmp48_ = elements;
							_tmp48__length1 = elements_length1;
							_tmp49_ = i;
							_tmp50_ = j;
							_tmp51_ = i;
							_tmp52_ = j;
							_tmp48_[((((_tmp49_ * 8) + _tmp50_) - 4) * 6) + 3] = (GLubyte) (((_tmp51_ * 8) + _tmp52_) + 1);
							_tmp53_ = _tmp48_[((((_tmp49_ * 8) + _tmp50_) - 4) * 6) + 3];
							_tmp54_ = elements;
							_tmp54__length1 = elements_length1;
							_tmp55_ = i;
							_tmp56_ = j;
							_tmp57_ = i;
							_tmp58_ = j;
							_tmp54_[((((_tmp55_ * 8) + _tmp56_) - 4) * 6) + 4] = (GLubyte) ((((_tmp57_ - 1) * 8) + _tmp58_) + 2);
							_tmp59_ = _tmp54_[((((_tmp55_ * 8) + _tmp56_) - 4) * 6) + 4];
							_tmp60_ = elements;
							_tmp60__length1 = elements_length1;
							_tmp61_ = i;
							_tmp62_ = j;
							_tmp63_ = i;
							_tmp64_ = j;
							_tmp60_[((((_tmp61_ * 8) + _tmp62_) - 4) * 6) + 5] = (GLubyte) (((_tmp63_ * 8) + _tmp64_) + 2);
							_tmp65_ = _tmp60_[((((_tmp61_ * 8) + _tmp62_) - 4) * 6) + 5];
						}
					}
				}
				_tmp66_ = elements;
				_tmp66__length1 = elements_length1;
				_tmp67_ = i;
				_tmp68_ = i;
				_tmp66_[((((_tmp67_ * 8) + 7) - 4) * 6) + 1] = (GLubyte) (((_tmp68_ - 1) * 8) + 1);
				_tmp69_ = _tmp66_[((((_tmp67_ * 8) + 7) - 4) * 6) + 1];
				_tmp70_ = elements;
				_tmp70__length1 = elements_length1;
				_tmp71_ = i;
				_tmp72_ = i;
				_tmp70_[((((_tmp71_ * 8) + 7) - 4) * 6) + 4] = (GLubyte) (((_tmp72_ - 1) * 8) + 1);
				_tmp73_ = _tmp70_[((((_tmp71_ * 8) + 7) - 4) * 6) + 4];
				_tmp74_ = elements;
				_tmp74__length1 = elements_length1;
				_tmp75_ = i;
				_tmp76_ = i;
				_tmp74_[((((_tmp75_ * 8) + 7) - 4) * 6) + 5] = (GLubyte) ((_tmp76_ * 8) + 1);
				_tmp77_ = _tmp74_[((((_tmp75_ * 8) + 7) - 4) * 6) + 5];
			}
		}
	}
	_tmp78_ = vertices;
	_tmp78__length1 = vertices_length1;
	_tmp78_[0] = (GLfloat) 0.0f;
	_tmp79_ = _tmp78_[0];
	_tmp80_ = vertices;
	_tmp80__length1 = vertices_length1;
	_tmp81_ = self->priv->_offset;
	_tmp80_[1] = (GLfloat) _tmp81_;
	_tmp82_ = _tmp80_[1];
	_tmp83_ = vertices;
	_tmp83__length1 = vertices_length1;
	_tmp83_[2] = (GLfloat) 0.0f;
	_tmp84_ = _tmp83_[2];
	_tmp85_ = vertices;
	_tmp85__length1 = vertices_length1;
	_tmp85_[3] = (GLfloat) 0.0f;
	_tmp86_ = _tmp85_[3];
	_tmp87_ = vertices;
	_tmp87__length1 = vertices_length1;
	_tmp87_[4] = (GLfloat) 1.0f;
	_tmp88_ = _tmp87_[4];
	_tmp89_ = vertices;
	_tmp89__length1 = vertices_length1;
	_tmp89_[5] = (GLfloat) 0.0f;
	_tmp90_ = _tmp89_[5];
	_tmp91_ = vertices;
	_tmp91__length1 = vertices_length1;
	_tmp91_[6] = (GLfloat) 0.0f;
	_tmp92_ = _tmp91_[6];
	_tmp93_ = vertices;
	_tmp93__length1 = vertices_length1;
	_tmp93_[7] = (GLfloat) 0.0f;
	_tmp94_ = _tmp93_[7];
	_tmp95_ = vertices;
	_tmp95__length1 = vertices_length1;
	_tmp95_[8] = (GLfloat) 0.0f;
	_tmp96_ = _tmp95_[8];
	_tmp97_ = vertices;
	_tmp97__length1 = vertices_length1;
	_tmp97_[9] = (GLfloat) 0.0f;
	_tmp98_ = _tmp97_[9];
	_tmp99_ = vertices;
	_tmp99__length1 = vertices_length1;
	_tmp99_[10] = (GLfloat) (-1.0f);
	_tmp100_ = _tmp99_[10];
	angle = (gfloat) 0;
	_tmp101_ = self->priv->_size;
	_tmp102_ = self->priv->_step;
	_tmp103_ = self->priv->_step;
	radius = (2 * _tmp101_) / ((gfloat) (_tmp102_ * (_tmp103_ + 1)));
	{
		gint i;
		i = 0;
		{
			gboolean _tmp104_;
			_tmp104_ = TRUE;
			while (TRUE) {
				gboolean _tmp105_;
				gint _tmp107_;
				gfloat _tmp174_;
				gfloat _tmp175_;
				gfloat _tmp176_;
				gint _tmp177_;
				gint _tmp178_;
				gint _tmp179_;
				gint _tmp180_;
				_tmp105_ = _tmp104_;
				if (!_tmp105_) {
					gint _tmp106_;
					_tmp106_ = i;
					i = _tmp106_ + 1;
				}
				_tmp104_ = FALSE;
				_tmp107_ = self->priv->_step;
				if (!(i <= (_tmp107_ - 1))) {
					break;
				}
				{
					gint j;
					j = 0;
					{
						gboolean _tmp108_;
						_tmp108_ = TRUE;
						while (TRUE) {
							gboolean _tmp109_;
							GLfloat* _tmp111_;
							gint _tmp111__length1;
							gint _tmp112_;
							gint _tmp113_;
							gfloat _tmp114_;
							gfloat _tmp115_;
							gint _tmp116_;
							gfloat _tmp117_ = 0.0F;
							GLfloat _tmp118_;
							GLfloat* _tmp119_;
							gint _tmp119__length1;
							gint _tmp120_;
							gint _tmp121_;
							gfloat _tmp122_;
							GLfloat _tmp123_;
							GLfloat* _tmp124_;
							gint _tmp124__length1;
							gint _tmp125_;
							gint _tmp126_;
							gfloat _tmp127_;
							gfloat _tmp128_;
							gint _tmp129_;
							gfloat _tmp130_ = 0.0F;
							GLfloat _tmp131_;
							GLfloat* _tmp132_;
							gint _tmp132__length1;
							gint _tmp133_;
							gint _tmp134_;
							GLfloat _tmp135_;
							GLfloat* _tmp136_;
							gint _tmp136__length1;
							gint _tmp137_;
							gint _tmp138_;
							GLfloat _tmp139_;
							GLfloat* _tmp140_;
							gint _tmp140__length1;
							gint _tmp141_;
							gint _tmp142_;
							GLfloat _tmp143_;
							GLfloat* _tmp144_;
							gint _tmp144__length1;
							gint _tmp145_;
							gint _tmp146_;
							GLfloat* _tmp147_;
							gint _tmp147__length1;
							gint _tmp148_;
							gint _tmp149_;
							GLfloat _tmp150_;
							gfloat _tmp151_;
							GLfloat _tmp152_;
							GLfloat* _tmp153_;
							gint _tmp153__length1;
							gint _tmp154_;
							gint _tmp155_;
							GLfloat* _tmp156_;
							gint _tmp156__length1;
							gint _tmp157_;
							gint _tmp158_;
							GLfloat _tmp159_;
							gfloat _tmp160_;
							GLfloat _tmp161_;
							GLfloat* _tmp162_;
							gint _tmp162__length1;
							gint _tmp163_;
							gint _tmp164_;
							GLfloat _tmp165_;
							GLfloat* _tmp166_;
							gint _tmp166__length1;
							gint _tmp167_;
							gint _tmp168_;
							GLfloat _tmp169_;
							GLfloat* _tmp170_;
							gint _tmp170__length1;
							gint _tmp171_;
							gint _tmp172_;
							GLfloat _tmp173_;
							_tmp109_ = _tmp108_;
							if (!_tmp109_) {
								gint _tmp110_;
								_tmp110_ = j;
								j = _tmp110_ + 1;
							}
							_tmp108_ = FALSE;
							if (!(j <= 7)) {
								break;
							}
							_tmp111_ = vertices;
							_tmp111__length1 = vertices_length1;
							_tmp112_ = i;
							_tmp113_ = j;
							_tmp114_ = radius;
							_tmp115_ = angle;
							_tmp116_ = j;
							_tmp117_ = cosf (_tmp115_ + ((_tmp116_ * ((gfloat) G_PI)) / 4));
							_tmp111_[(((_tmp112_ * 8) + _tmp113_) + 1) * 11] = (GLfloat) (_tmp114_ * _tmp117_);
							_tmp118_ = _tmp111_[(((_tmp112_ * 8) + _tmp113_) + 1) * 11];
							_tmp119_ = vertices;
							_tmp119__length1 = vertices_length1;
							_tmp120_ = i;
							_tmp121_ = j;
							_tmp122_ = self->priv->_offset;
							_tmp119_[((((_tmp120_ * 8) + _tmp121_) + 1) * 11) + 1] = (GLfloat) _tmp122_;
							_tmp123_ = _tmp119_[((((_tmp120_ * 8) + _tmp121_) + 1) * 11) + 1];
							_tmp124_ = vertices;
							_tmp124__length1 = vertices_length1;
							_tmp125_ = i;
							_tmp126_ = j;
							_tmp127_ = radius;
							_tmp128_ = angle;
							_tmp129_ = j;
							_tmp130_ = sinf (_tmp128_ + ((_tmp129_ * ((gfloat) G_PI)) / 4));
							_tmp124_[((((_tmp125_ * 8) + _tmp126_) + 1) * 11) + 2] = (GLfloat) (_tmp127_ * _tmp130_);
							_tmp131_ = _tmp124_[((((_tmp125_ * 8) + _tmp126_) + 1) * 11) + 2];
							_tmp132_ = vertices;
							_tmp132__length1 = vertices_length1;
							_tmp133_ = i;
							_tmp134_ = j;
							_tmp132_[((((_tmp133_ * 8) + _tmp134_) + 1) * 11) + 3] = (GLfloat) 0.0f;
							_tmp135_ = _tmp132_[((((_tmp133_ * 8) + _tmp134_) + 1) * 11) + 3];
							_tmp136_ = vertices;
							_tmp136__length1 = vertices_length1;
							_tmp137_ = i;
							_tmp138_ = j;
							_tmp136_[((((_tmp137_ * 8) + _tmp138_) + 1) * 11) + 4] = (GLfloat) 1.0f;
							_tmp139_ = _tmp136_[((((_tmp137_ * 8) + _tmp138_) + 1) * 11) + 4];
							_tmp140_ = vertices;
							_tmp140__length1 = vertices_length1;
							_tmp141_ = i;
							_tmp142_ = j;
							_tmp140_[((((_tmp141_ * 8) + _tmp142_) + 1) * 11) + 5] = (GLfloat) 0.0f;
							_tmp143_ = _tmp140_[((((_tmp141_ * 8) + _tmp142_) + 1) * 11) + 5];
							_tmp144_ = vertices;
							_tmp144__length1 = vertices_length1;
							_tmp145_ = i;
							_tmp146_ = j;
							_tmp147_ = vertices;
							_tmp147__length1 = vertices_length1;
							_tmp148_ = i;
							_tmp149_ = j;
							_tmp150_ = _tmp147_[(((_tmp148_ * 8) + _tmp149_) + 1) * 11];
							_tmp151_ = self->priv->_scale;
							_tmp144_[((((_tmp145_ * 8) + _tmp146_) + 1) * 11) + 6] = _tmp150_ / _tmp151_;
							_tmp152_ = _tmp144_[((((_tmp145_ * 8) + _tmp146_) + 1) * 11) + 6];
							_tmp153_ = vertices;
							_tmp153__length1 = vertices_length1;
							_tmp154_ = i;
							_tmp155_ = j;
							_tmp156_ = vertices;
							_tmp156__length1 = vertices_length1;
							_tmp157_ = i;
							_tmp158_ = j;
							_tmp159_ = _tmp156_[((((_tmp157_ * 8) + _tmp158_) + 1) * 11) + 2];
							_tmp160_ = self->priv->_scale;
							_tmp153_[((((_tmp154_ * 8) + _tmp155_) + 1) * 11) + 7] = _tmp159_ / _tmp160_;
							_tmp161_ = _tmp153_[((((_tmp154_ * 8) + _tmp155_) + 1) * 11) + 7];
							_tmp162_ = vertices;
							_tmp162__length1 = vertices_length1;
							_tmp163_ = i;
							_tmp164_ = j;
							_tmp162_[((((_tmp163_ * 8) + _tmp164_) + 1) * 11) + 8] = (GLfloat) 0.0f;
							_tmp165_ = _tmp162_[((((_tmp163_ * 8) + _tmp164_) + 1) * 11) + 8];
							_tmp166_ = vertices;
							_tmp166__length1 = vertices_length1;
							_tmp167_ = i;
							_tmp168_ = j;
							_tmp166_[((((_tmp167_ * 8) + _tmp168_) + 1) * 11) + 9] = (GLfloat) 0.0f;
							_tmp169_ = _tmp166_[((((_tmp167_ * 8) + _tmp168_) + 1) * 11) + 9];
							_tmp170_ = vertices;
							_tmp170__length1 = vertices_length1;
							_tmp171_ = i;
							_tmp172_ = j;
							_tmp170_[((((_tmp171_ * 8) + _tmp172_) + 1) * 11) + 10] = (GLfloat) (-1.0f);
							_tmp173_ = _tmp170_[((((_tmp171_ * 8) + _tmp172_) + 1) * 11) + 10];
						}
					}
				}
				_tmp174_ = angle;
				angle = _tmp174_ + (((gfloat) G_PI) / 8);
				_tmp175_ = angle;
				angle = fmodf (_tmp175_, ((gfloat) G_PI) * 2);
				_tmp176_ = radius;
				_tmp177_ = i;
				_tmp178_ = self->priv->_size;
				_tmp179_ = self->priv->_step;
				_tmp180_ = self->priv->_step;
				radius = _tmp176_ + (((2 * (_tmp177_ + 2)) * _tmp178_) / ((gfloat) (_tmp179_ * (_tmp180_ + 1))));
			}
		}
	}
	_tmp181_ = vertices;
	_tmp181__length1 = vertices_length1;
	_tmp182_ = (_tmp181_ != NULL) ? _vala_array_dup8 (_tmp181_, _tmp181__length1) : ((gpointer) _tmp181_);
	_tmp182__length1 = _tmp181__length1;
	self->priv->_vercache = (g_free (self->priv->_vercache), NULL);
	self->priv->_vercache = _tmp182_;
	self->priv->_vercache_length1 = _tmp182__length1;
	self->priv->__vercache_size_ = self->priv->_vercache_length1;
	_tmp183_ = self->priv->_ebo;
	glBindBuffer (GL_ELEMENT_ARRAY_BUFFER, _tmp183_);
	_tmp184_ = self->priv->_step;
	_tmp185_ = elements;
	_tmp185__length1 = elements_length1;
	glBufferData (GL_ELEMENT_ARRAY_BUFFER, (GLsizei) ((8 + ((_tmp184_ - 1) * 16)) * 3), _tmp185_, GL_STATIC_DRAW);
	_tmp186_ = self->priv->_vbo;
	glBindBuffer (GL_ARRAY_BUFFER, _tmp186_);
	_tmp187_ = self->priv->_step;
	_tmp188_ = vertices;
	_tmp188__length1 = vertices_length1;
	glBufferData (GL_ARRAY_BUFFER, (GLsizei) (((1 + (_tmp187_ * 8)) * 14) * sizeof (GLfloat)), _tmp188_, GL_STATIC_DRAW);
	self->priv->_updated = FALSE;
	vertices = (g_free (vertices), NULL);
	elements = (g_free (elements), NULL);
}


soymaterialsMaterial* soy_scenes_planar_get_material (soyscenesPlanar* self) {
	soymaterialsMaterial* result;
	soymaterialsMaterial* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_material;
	result = _tmp0_;
	return result;
}


void soy_scenes_planar_set_material (soyscenesPlanar* self, soymaterialsMaterial* value) {
	soymaterialsMaterial* _tmp0_;
	soymaterialsMaterial* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_material);
	self->priv->_material = _tmp1_;
	g_object_notify ((GObject *) self, "material");
}


gfloat soy_scenes_planar_get_scale (soyscenesPlanar* self) {
	gfloat result;
	gfloat _tmp0_;
	g_return_val_if_fail (self != NULL, 0.0F);
	_tmp0_ = self->priv->_scale;
	result = _tmp0_;
	return result;
}


void soy_scenes_planar_set_scale (soyscenesPlanar* self, gfloat value) {
	gfloat _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	self->priv->_scale = _tmp0_;
	self->priv->_updated = TRUE;
	g_object_notify ((GObject *) self, "scale");
}


static void soy_scenes_planar_class_init (soyscenesPlanarClass * klass) {
	soy_scenes_planar_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (soyscenesPlanarPrivate));
	SOY_SCENES_SCENE_CLASS (klass)->render_extra = soy_scenes_planar_real_render_extra;
	G_OBJECT_CLASS (klass)->get_property = _vala_soy_scenes_planar_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_soy_scenes_planar_set_property;
	G_OBJECT_CLASS (klass)->finalize = soy_scenes_planar_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_SCENES_PLANAR_MATERIAL, g_param_spec_object ("material", "material", "material", SOY_MATERIALS_TYPE_MATERIAL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_SCENES_PLANAR_SCALE, g_param_spec_float ("scale", "scale", "scale", -G_MAXFLOAT, G_MAXFLOAT, 0.0F, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
}


static void soy_scenes_planar_instance_init (soyscenesPlanar * self) {
	self->priv = SOY_SCENES_PLANAR_GET_PRIVATE (self);
	self->priv->_size = 200;
}


static void soy_scenes_planar_finalize (GObject* obj) {
	soyscenesPlanar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_SCENES_TYPE_PLANAR, soyscenesPlanar);
	_dGeomDestroy0 (self->priv->_planeID);
	_vala_clear_GMutex (&self->mutex);
	self->priv->_vercache = (g_free (self->priv->_vercache), NULL);
	_g_object_unref0 (self->priv->_material);
	G_OBJECT_CLASS (soy_scenes_planar_parent_class)->finalize (obj);
}


GType soy_scenes_planar_get_type (void) {
	static volatile gsize soy_scenes_planar_type_id__volatile = 0;
	if (g_once_init_enter (&soy_scenes_planar_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soyscenesPlanarClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_scenes_planar_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soyscenesPlanar), 0, (GInstanceInitFunc) soy_scenes_planar_instance_init, NULL };
		GType soy_scenes_planar_type_id;
		soy_scenes_planar_type_id = g_type_register_static (SOY_SCENES_TYPE_SCENE, "soyscenesPlanar", &g_define_type_info, 0);
		g_once_init_leave (&soy_scenes_planar_type_id__volatile, soy_scenes_planar_type_id);
	}
	return soy_scenes_planar_type_id__volatile;
}


static void _vala_soy_scenes_planar_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	soyscenesPlanar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_SCENES_TYPE_PLANAR, soyscenesPlanar);
	switch (property_id) {
		case SOY_SCENES_PLANAR_MATERIAL:
		g_value_set_object (value, soy_scenes_planar_get_material (self));
		break;
		case SOY_SCENES_PLANAR_SCALE:
		g_value_set_float (value, soy_scenes_planar_get_scale (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_soy_scenes_planar_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	soyscenesPlanar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_SCENES_TYPE_PLANAR, soyscenesPlanar);
	switch (property_id) {
		case SOY_SCENES_PLANAR_MATERIAL:
		soy_scenes_planar_set_material (self, g_value_get_object (value));
		break;
		case SOY_SCENES_PLANAR_SCALE:
		soy_scenes_planar_set_scale (self, g_value_get_float (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_clear_GMutex (GMutex * mutex) {
	GMutex zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GMutex))) {
		g_mutex_clear (mutex);
		memset (mutex, 0, sizeof (GMutex));
	}
}


static void _vala_clear_GRecMutex (GRecMutex * mutex) {
	GRecMutex zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GRecMutex))) {
		g_rec_mutex_clear (mutex);
		memset (mutex, 0, sizeof (GRecMutex));
	}
}


static void _vala_clear_GRWLock (GRWLock * mutex) {
	GRWLock zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GRWLock))) {
		g_rw_lock_clear (mutex);
		memset (mutex, 0, sizeof (GRWLock));
	}
}


static void _vala_clear_GCond (GCond * mutex) {
	GCond zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GCond))) {
		g_cond_clear (mutex);
		memset (mutex, 0, sizeof (GCond));
	}
}




/* Landscape.c generated by valac 0.20.1, the Vala compiler
 * generated from Landscape.gs, do not modify */

/*
 *  libsoy - soy.scenes.Landscape
 *  Copyright (C) 2006,2007,2008,2009,2010,2011,2012,2013 Copyleft Games Group
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published
 *  by the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program; if not, see http://www.gnu.org/licenses
 *
 */

#include <glib.h>
#include <glib-object.h>
#include <GLES/gl.h>
#include <GLES/glext.h>
#include <soy-1/ode.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <float.h>
#include <math.h>


#define SOY_SCENES_TYPE_SCENE (soy_scenes_scene_get_type ())
#define SOY_SCENES_SCENE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE_SCENE, soyscenesScene))
#define SOY_SCENES_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))
#define SOY_SCENES_IS_SCENE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_IS_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_SCENE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))

typedef struct _soyscenesScene soyscenesScene;
typedef struct _soyscenesSceneClass soyscenesSceneClass;
typedef struct _soyscenesScenePrivate soyscenesScenePrivate;

#define SOY_BODIES_TYPE_BODY (soy_bodies_body_get_type ())
#define SOY_BODIES_BODY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_BODY, soybodiesBody))
#define SOY_BODIES_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))
#define SOY_BODIES_IS_BODY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_IS_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_BODY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))

typedef struct _soybodiesBody soybodiesBody;
typedef struct _soybodiesBodyClass soybodiesBodyClass;

#define SOY_BODIES_TYPE_CAMERA (soy_bodies_camera_get_type ())
#define SOY_BODIES_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_CAMERA, soybodiesCamera))
#define SOY_BODIES_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_CAMERA, soybodiesCameraClass))
#define SOY_BODIES_IS_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_CAMERA))
#define SOY_BODIES_IS_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_CAMERA))
#define SOY_BODIES_CAMERA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_CAMERA, soybodiesCameraClass))

typedef struct _soybodiesCamera soybodiesCamera;
typedef struct _soybodiesCameraClass soybodiesCameraClass;

#define SOY_BODIES_TYPE_LIGHT (soy_bodies_light_get_type ())
#define SOY_BODIES_LIGHT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_LIGHT, soybodiesLight))
#define SOY_BODIES_LIGHT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_LIGHT, soybodiesLightClass))
#define SOY_BODIES_IS_LIGHT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_LIGHT))
#define SOY_BODIES_IS_LIGHT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_LIGHT))
#define SOY_BODIES_LIGHT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_LIGHT, soybodiesLightClass))

typedef struct _soybodiesLight soybodiesLight;
typedef struct _soybodiesLightClass soybodiesLightClass;

#define SOY_JOINTS_TYPE_JOINT (soy_joints_joint_get_type ())
#define SOY_JOINTS_JOINT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_JOINTS_TYPE_JOINT, soyjointsJoint))
#define SOY_JOINTS_JOINT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_JOINTS_TYPE_JOINT, soyjointsJointClass))
#define SOY_JOINTS_IS_JOINT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_JOINTS_TYPE_JOINT))
#define SOY_JOINTS_IS_JOINT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_JOINTS_TYPE_JOINT))
#define SOY_JOINTS_JOINT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_JOINTS_TYPE_JOINT, soyjointsJointClass))

typedef struct _soyjointsJoint soyjointsJoint;
typedef struct _soyjointsJointClass soyjointsJointClass;

#define SOY_CONTROLLERS_TYPE_CONTROLLER (soy_controllers_controller_get_type ())
#define SOY_CONTROLLERS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersController))
#define SOY_CONTROLLERS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersControllerClass))
#define SOY_CONTROLLERS_IS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER))
#define SOY_CONTROLLERS_IS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_TYPE_CONTROLLER))
#define SOY_CONTROLLERS_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersControllerClass))

typedef struct _soycontrollersController soycontrollersController;
typedef struct _soycontrollersControllerClass soycontrollersControllerClass;

#define SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER (soy_controllers_virtual_controller_get_type ())
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualController))
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualControllerClass))
#define SOY_CONTROLLERS_IS_VIRTUAL_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER))
#define SOY_CONTROLLERS_IS_VIRTUAL_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER))
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualControllerClass))

typedef struct _soycontrollersVirtualController soycontrollersVirtualController;
typedef struct _soycontrollersVirtualControllerClass soycontrollersVirtualControllerClass;

#define SOY_FIELDS_TYPE_FIELD (soy_fields_field_get_type ())
#define SOY_FIELDS_FIELD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_FIELDS_TYPE_FIELD, soyfieldsField))
#define SOY_FIELDS_FIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_FIELDS_TYPE_FIELD, soyfieldsFieldClass))
#define SOY_FIELDS_IS_FIELD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_FIELDS_TYPE_FIELD))
#define SOY_FIELDS_IS_FIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_FIELDS_TYPE_FIELD))
#define SOY_FIELDS_FIELD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_FIELDS_TYPE_FIELD, soyfieldsFieldClass))

typedef struct _soyfieldsField soyfieldsField;
typedef struct _soyfieldsFieldClass soyfieldsFieldClass;

#define SOY_SCENES_TYPE_LANDSCAPE (soy_scenes_landscape_get_type ())
#define SOY_SCENES_LANDSCAPE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE_LANDSCAPE, soyscenesLandscape))
#define SOY_SCENES_LANDSCAPE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE_LANDSCAPE, soyscenesLandscapeClass))
#define SOY_SCENES_IS_LANDSCAPE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE_LANDSCAPE))
#define SOY_SCENES_IS_LANDSCAPE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE_LANDSCAPE))
#define SOY_SCENES_LANDSCAPE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE_LANDSCAPE, soyscenesLandscapeClass))

typedef struct _soyscenesLandscape soyscenesLandscape;
typedef struct _soyscenesLandscapeClass soyscenesLandscapeClass;
typedef struct _soyscenesLandscapePrivate soyscenesLandscapePrivate;

#define SOY_MATERIALS_TYPE_MATERIAL (soy_materials_material_get_type ())
#define SOY_MATERIALS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterial))
#define SOY_MATERIALS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))
#define SOY_MATERIALS_IS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_IS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_MATERIAL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))

typedef struct _soymaterialsMaterial soymaterialsMaterial;
typedef struct _soymaterialsMaterialClass soymaterialsMaterialClass;

#define SOY_ATOMS_TYPE_POSITION (soy_atoms_position_get_type ())
#define SOY_ATOMS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPosition))
#define SOY_ATOMS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))
#define SOY_ATOMS_IS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_IS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_POSITION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))

typedef struct _soyatomsPosition soyatomsPosition;
typedef struct _soyatomsPositionClass soyatomsPositionClass;

#define SOY_ATOMS_TYPE_SIZE (soy_atoms_size_get_type ())
#define SOY_ATOMS_SIZE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_SIZE, soyatomsSize))
#define SOY_ATOMS_SIZE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_SIZE, soyatomsSizeClass))
#define SOY_ATOMS_IS_SIZE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_SIZE))
#define SOY_ATOMS_IS_SIZE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_SIZE))
#define SOY_ATOMS_SIZE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_SIZE, soyatomsSizeClass))

typedef struct _soyatomsSize soyatomsSize;
typedef struct _soyatomsSizeClass soyatomsSizeClass;

#define SOY_TEXTURES_TYPE_TEXTURE (soy_textures_texture_get_type ())
#define SOY_TEXTURES_TEXTURE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_TEXTURES_TYPE_TEXTURE, soytexturesTexture))
#define SOY_TEXTURES_TEXTURE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_TEXTURES_TYPE_TEXTURE, soytexturesTextureClass))
#define SOY_TEXTURES_IS_TEXTURE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_TEXTURES_TYPE_TEXTURE))
#define SOY_TEXTURES_IS_TEXTURE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_TEXTURES_TYPE_TEXTURE))
#define SOY_TEXTURES_TEXTURE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_TEXTURES_TYPE_TEXTURE, soytexturesTextureClass))

typedef struct _soytexturesTexture soytexturesTexture;
typedef struct _soytexturesTextureClass soytexturesTextureClass;
#define _dGeomHeightfieldDataDestroy0(var) ((var == NULL) ? NULL : (var = (dGeomHeightfieldDataDestroy (var), NULL)))
#define _dGeomDestroy0(var) ((var == NULL) ? NULL : (var = (dGeomDestroy (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _soytexturesTexturePrivate soytexturesTexturePrivate;
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _soyscenesScene {
	GObject parent_instance;
	soyscenesScenePrivate * priv;
	struct dxSpace* space;
	GeeHashSet* lights;
	GeeHashMap* bodies;
	GeeArrayList* joints;
	GeeHashSet* Controllers;
	GeeHashMap* fields;
	GLfloat* tslvs;
	gint tslvs_length1;
	GLfloat* colTexels;
};

struct _soyscenesSceneClass {
	GObjectClass parent_class;
	void (*do_in_step) (soyscenesScene* self);
	void (*render) (soyscenesScene* self, GLfloat fov, GLfloat aspect, GLfloat znear, GLfloat zfar, soybodiesCamera* camera, gint level);
	void (*render_extra) (soyscenesScene* self);
};

struct _soyscenesLandscape {
	soyscenesScene parent_instance;
	soyscenesLandscapePrivate * priv;
	GMutex mutex;
};

struct _soyscenesLandscapeClass {
	soyscenesSceneClass parent_class;
};

struct _soyscenesLandscapePrivate {
	GLuint _ebo;
	GLuint _vbo;
	gboolean _updated;
	GLfloat* _vertArray;
	gint _vertArray_length1;
	gint __vertArray_size_;
	GLushort* _faceArray;
	gint _faceArray_length1;
	gint __faceArray_size_;
	struct dxHeightfieldData* _heightfieldData;
	struct dxGeom* _geomID;
	soymaterialsMaterial* _material;
	soyatomsPosition* _pos;
	soyatomsSize* _size;
	soytexturesTexture* _map;
};

struct _soytexturesTexture {
	GObject parent_instance;
	soytexturesTexturePrivate * priv;
	gboolean translucent;
	guchar* texels;
	guchar* mipmaps;
	gboolean updated;
};

struct _soytexturesTextureClass {
	GObjectClass parent_class;
	void (*enable) (soytexturesTexture* self);
	void (*disable) (soytexturesTexture* self);
};


static gpointer soy_scenes_landscape_parent_class = NULL;

GType soy_scenes_scene_get_type (void) G_GNUC_CONST;
GType soy_bodies_body_get_type (void) G_GNUC_CONST;
GType soy_bodies_camera_get_type (void) G_GNUC_CONST;
GType soy_bodies_light_get_type (void) G_GNUC_CONST;
GType soy_joints_joint_get_type (void) G_GNUC_CONST;
GType soy_controllers_controller_get_type (void) G_GNUC_CONST;
GType soy_controllers_virtual_controller_get_type (void) G_GNUC_CONST;
GType soy_fields_field_get_type (void) G_GNUC_CONST;
GType soy_scenes_landscape_get_type (void) G_GNUC_CONST;
GType soy_materials_material_get_type (void) G_GNUC_CONST;
GType soy_atoms_position_get_type (void) G_GNUC_CONST;
GType soy_atoms_size_get_type (void) G_GNUC_CONST;
GType soy_textures_texture_get_type (void) G_GNUC_CONST;
#define SOY_SCENES_LANDSCAPE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SOY_SCENES_TYPE_LANDSCAPE, soyscenesLandscapePrivate))
enum  {
	SOY_SCENES_LANDSCAPE_DUMMY_PROPERTY,
	SOY_SCENES_LANDSCAPE_MATERIAL,
	SOY_SCENES_LANDSCAPE_POSITION,
	SOY_SCENES_LANDSCAPE_SIZE,
	SOY_SCENES_LANDSCAPE_HEIGHTMAP
};
soyscenesLandscape* soy_scenes_landscape_new (soytexturesTexture* heightmap, soymaterialsMaterial* mat, gint detail, soyatomsSize* size, soyatomsPosition* position);
soyscenesLandscape* soy_scenes_landscape_construct (GType object_type, soytexturesTexture* heightmap, soymaterialsMaterial* mat, gint detail, soyatomsSize* size, soyatomsPosition* position);
soyscenesScene* soy_scenes_scene_new (void);
soyscenesScene* soy_scenes_scene_construct (GType object_type);
gint soy_textures_texture_get_channels (soytexturesTexture* self);
soyatomsSize* soy_atoms_size_new (gfloat width, gfloat height, gfloat depth);
soyatomsSize* soy_atoms_size_construct (GType object_type, gfloat width, gfloat height, gfloat depth);
soyatomsPosition* soy_atoms_position_new (gfloat x, gfloat y, gfloat z);
soyatomsPosition* soy_atoms_position_construct (GType object_type, gfloat x, gfloat y, gfloat z);
static void _soy_scenes_landscape_update_landscape (soyscenesLandscape* self);
soyatomsSize* soy_textures_texture_get_size (soytexturesTexture* self);
gfloat soy_atoms_size_get_width (soyatomsSize* self);
gfloat soy_atoms_size_get_height (soyatomsSize* self);
gfloat soy_atoms_size_get_depth (soyatomsSize* self);
gfloat soy_atoms_position_get_x (soyatomsPosition* self);
gfloat soy_atoms_position_get_y (soyatomsPosition* self);
gfloat soy_atoms_position_get_z (soyatomsPosition* self);
static void soy_scenes_landscape_real_render_extra (soyscenesScene* base);
void soy_bodies_light_on (soybodiesLight* self, GLenum id);
gboolean soy_materials_material_render (soymaterialsMaterial* self, gint step, GLvoid* tslvs, dxMatrix3* texmatrix);
soymaterialsMaterial* soy_scenes_landscape_get_material (soyscenesLandscape* self);
void soy_scenes_landscape_set_material (soyscenesLandscape* self, soymaterialsMaterial* value);
soyatomsPosition* soy_scenes_landscape_get_position (soyscenesLandscape* self);
void soy_scenes_landscape_set_position (soyscenesLandscape* self, soyatomsPosition* value);
soyatomsSize* soy_scenes_landscape_get_size (soyscenesLandscape* self);
void soy_scenes_landscape_set_size (soyscenesLandscape* self, soyatomsSize* value);
soytexturesTexture* soy_scenes_landscape_get_heightmap (soyscenesLandscape* self);
void soy_scenes_landscape_set_heightmap (soyscenesLandscape* self, soytexturesTexture* value);
static void soy_scenes_landscape_finalize (GObject* obj);
static void _vala_soy_scenes_landscape_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_soy_scenes_landscape_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
static void _vala_clear_GMutex (GMutex * mutex);
static void _vala_clear_GRecMutex (GRecMutex * mutex);
static void _vala_clear_GRWLock (GRWLock * mutex);
static void _vala_clear_GCond (GCond * mutex);


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


soyscenesLandscape* soy_scenes_landscape_construct (GType object_type, soytexturesTexture* heightmap, soymaterialsMaterial* mat, gint detail, soyatomsSize* size, soyatomsPosition* position) {
	soyscenesLandscape * self = NULL;
	soytexturesTexture* _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	soytexturesTexture* _tmp3_;
	soytexturesTexture* _tmp4_;
	soymaterialsMaterial* _tmp5_;
	soymaterialsMaterial* _tmp6_;
	soyatomsSize* _tmp7_;
	soyatomsPosition* _tmp11_;
	g_return_val_if_fail (heightmap != NULL, NULL);
	g_return_val_if_fail (mat != NULL, NULL);
	self = (soyscenesLandscape*) soy_scenes_scene_construct (object_type);
	_tmp0_ = heightmap;
	_tmp1_ = soy_textures_texture_get_channels (_tmp0_);
	_tmp2_ = _tmp1_;
	_vala_assert (_tmp2_ == 1, "heightmap.channels is 1");
	_tmp3_ = heightmap;
	_tmp4_ = _g_object_ref0 (_tmp3_);
	_g_object_unref0 (self->priv->_map);
	self->priv->_map = _tmp4_;
	_tmp5_ = mat;
	_tmp6_ = _g_object_ref0 (_tmp5_);
	_g_object_unref0 (self->priv->_material);
	self->priv->_material = _tmp6_;
	_tmp7_ = size;
	if (_tmp7_ == NULL) {
		soyatomsSize* _tmp8_;
		_tmp8_ = soy_atoms_size_new ((gfloat) 1024, (gfloat) 16, (gfloat) 1024);
		_g_object_unref0 (self->priv->_size);
		self->priv->_size = _tmp8_;
	} else {
		soyatomsSize* _tmp9_;
		soyatomsSize* _tmp10_;
		_tmp9_ = size;
		_tmp10_ = _g_object_ref0 (_tmp9_);
		_g_object_unref0 (self->priv->_size);
		self->priv->_size = _tmp10_;
	}
	_tmp11_ = position;
	if (_tmp11_ == NULL) {
		soyatomsPosition* _tmp12_;
		_tmp12_ = soy_atoms_position_new (0.0f, 0.0f, 0.0f);
		_g_object_unref0 (self->priv->_pos);
		self->priv->_pos = _tmp12_;
	} else {
		soyatomsPosition* _tmp13_;
		soyatomsPosition* _tmp14_;
		_tmp13_ = position;
		_tmp14_ = _g_object_ref0 (_tmp13_);
		_g_object_unref0 (self->priv->_pos);
		self->priv->_pos = _tmp14_;
	}
	self->priv->_updated = TRUE;
	_vala_clear_GMutex (&self->mutex);
	g_mutex_init (&self->mutex);
	return self;
}


soyscenesLandscape* soy_scenes_landscape_new (soytexturesTexture* heightmap, soymaterialsMaterial* mat, gint detail, soyatomsSize* size, soyatomsPosition* position) {
	return soy_scenes_landscape_construct (SOY_SCENES_TYPE_LANDSCAPE, heightmap, mat, detail, size, position);
}


static void _soy_scenes_landscape_update_landscape (soyscenesLandscape* self) {
	GLuint _tmp0_;
	gint i = 0;
	gint j = 0;
	gint l = 0;
	gint offset = 0;
	gint a = 0;
	gint b = 0;
	gint c = 0;
	gdouble* _tmp3_ = NULL;
	gdouble* v1;
	gint v1_length1;
	gint _v1_size_;
	gdouble* _tmp4_ = NULL;
	gdouble* v2;
	gint v2_length1;
	gint _v2_size_;
	gdouble* _tmp5_ = NULL;
	gdouble* normal;
	gint normal_length1;
	gint _normal_size_;
	gdouble* _tmp6_ = NULL;
	gdouble* normal2;
	gint normal2_length1;
	gint _normal2_size_;
	gdouble* _tmp7_ = NULL;
	gdouble* u;
	gint u_length1;
	gint _u_size_;
	gdouble length = 0.0;
	struct dxHeightfieldData* _tmp8_;
	soytexturesTexture* _tmp9_;
	soyatomsSize* _tmp10_;
	soyatomsSize* _tmp11_;
	soyatomsSize* _tmp12_;
	gfloat _tmp13_;
	gfloat _tmp14_;
	soytexturesTexture* _tmp15_;
	soyatomsSize* _tmp16_;
	soyatomsSize* _tmp17_;
	soyatomsSize* _tmp18_;
	gfloat _tmp19_;
	gfloat _tmp20_;
	GLfloat* _tmp21_ = NULL;
	soytexturesTexture* _tmp22_;
	soyatomsSize* _tmp23_;
	soyatomsSize* _tmp24_;
	soyatomsSize* _tmp25_;
	gfloat _tmp26_;
	gfloat _tmp27_;
	soytexturesTexture* _tmp28_;
	soyatomsSize* _tmp29_;
	soyatomsSize* _tmp30_;
	soyatomsSize* _tmp31_;
	gfloat _tmp32_;
	gfloat _tmp33_;
	GLushort* _tmp34_ = NULL;
	struct dxHeightfieldData* _tmp35_;
	soytexturesTexture* _tmp36_;
	guchar* _tmp37_;
	soyatomsSize* _tmp38_;
	gfloat _tmp39_;
	gfloat _tmp40_;
	soyatomsSize* _tmp41_;
	gfloat _tmp42_;
	gfloat _tmp43_;
	soytexturesTexture* _tmp44_;
	soyatomsSize* _tmp45_;
	soyatomsSize* _tmp46_;
	soyatomsSize* _tmp47_;
	gfloat _tmp48_;
	gfloat _tmp49_;
	soytexturesTexture* _tmp50_;
	soyatomsSize* _tmp51_;
	soyatomsSize* _tmp52_;
	soyatomsSize* _tmp53_;
	gfloat _tmp54_;
	gfloat _tmp55_;
	soyatomsSize* _tmp56_;
	gfloat _tmp57_;
	gfloat _tmp58_;
	struct dxSpace* _tmp59_;
	struct dxHeightfieldData* _tmp60_;
	struct dxGeom* _tmp61_;
	struct dxGeom* _tmp62_;
	soyatomsPosition* _tmp63_;
	gfloat _tmp64_;
	gfloat _tmp65_;
	soyatomsPosition* _tmp66_;
	gfloat _tmp67_;
	gfloat _tmp68_;
	soyatomsPosition* _tmp69_;
	gfloat _tmp70_;
	gfloat _tmp71_;
	GLuint _tmp579_;
	soytexturesTexture* _tmp580_;
	soyatomsSize* _tmp581_;
	soyatomsSize* _tmp582_;
	soyatomsSize* _tmp583_;
	gfloat _tmp584_;
	gfloat _tmp585_;
	soytexturesTexture* _tmp586_;
	soyatomsSize* _tmp587_;
	soyatomsSize* _tmp588_;
	soyatomsSize* _tmp589_;
	gfloat _tmp590_;
	gfloat _tmp591_;
	GLfloat* _tmp592_;
	gint _tmp592__length1;
	GLuint _tmp593_;
	soytexturesTexture* _tmp594_;
	soyatomsSize* _tmp595_;
	soyatomsSize* _tmp596_;
	soyatomsSize* _tmp597_;
	gfloat _tmp598_;
	gfloat _tmp599_;
	soytexturesTexture* _tmp600_;
	soyatomsSize* _tmp601_;
	soyatomsSize* _tmp602_;
	soyatomsSize* _tmp603_;
	gfloat _tmp604_;
	gfloat _tmp605_;
	GLushort* _tmp606_;
	gint _tmp606__length1;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_ebo;
	if (_tmp0_ == ((GLuint) 0)) {
		GLuint _tmp1_ = 0U;
		GLuint _tmp2_ = 0U;
		glGenBuffers ((GLsizei) 1, &_tmp1_);
		self->priv->_ebo = _tmp1_;
		glGenBuffers ((GLsizei) 1, &_tmp2_);
		self->priv->_vbo = _tmp2_;
	}
	_tmp3_ = g_new0 (gdouble, 3);
	v1 = _tmp3_;
	v1_length1 = 3;
	_v1_size_ = v1_length1;
	_tmp4_ = g_new0 (gdouble, 3);
	v2 = _tmp4_;
	v2_length1 = 3;
	_v2_size_ = v2_length1;
	_tmp5_ = g_new0 (gdouble, 3);
	normal = _tmp5_;
	normal_length1 = 3;
	_normal_size_ = normal_length1;
	_tmp6_ = g_new0 (gdouble, 3);
	normal2 = _tmp6_;
	normal2_length1 = 3;
	_normal2_size_ = normal2_length1;
	_tmp7_ = g_new0 (gdouble, 3);
	u = _tmp7_;
	u_length1 = 3;
	_u_size_ = u_length1;
	_tmp8_ = dGeomHeightfieldDataCreate ();
	_dGeomHeightfieldDataDestroy0 (self->priv->_heightfieldData);
	self->priv->_heightfieldData = _tmp8_;
	_tmp9_ = self->priv->_map;
	_tmp10_ = soy_textures_texture_get_size (_tmp9_);
	_tmp11_ = _tmp10_;
	_tmp12_ = _tmp11_;
	_tmp13_ = soy_atoms_size_get_width (_tmp12_);
	_tmp14_ = _tmp13_;
	_tmp15_ = self->priv->_map;
	_tmp16_ = soy_textures_texture_get_size (_tmp15_);
	_tmp17_ = _tmp16_;
	_tmp18_ = _tmp17_;
	_tmp19_ = soy_atoms_size_get_height (_tmp18_);
	_tmp20_ = _tmp19_;
	_tmp21_ = g_new0 (GLfloat, (((gint) _tmp14_) * ((gint) _tmp20_)) * 11);
	self->priv->_vertArray = (g_free (self->priv->_vertArray), NULL);
	self->priv->_vertArray = _tmp21_;
	self->priv->_vertArray_length1 = (((gint) _tmp14_) * ((gint) _tmp20_)) * 11;
	self->priv->__vertArray_size_ = self->priv->_vertArray_length1;
	_g_object_unref0 (_tmp18_);
	_g_object_unref0 (_tmp12_);
	_tmp22_ = self->priv->_map;
	_tmp23_ = soy_textures_texture_get_size (_tmp22_);
	_tmp24_ = _tmp23_;
	_tmp25_ = _tmp24_;
	_tmp26_ = soy_atoms_size_get_width (_tmp25_);
	_tmp27_ = _tmp26_;
	_tmp28_ = self->priv->_map;
	_tmp29_ = soy_textures_texture_get_size (_tmp28_);
	_tmp30_ = _tmp29_;
	_tmp31_ = _tmp30_;
	_tmp32_ = soy_atoms_size_get_height (_tmp31_);
	_tmp33_ = _tmp32_;
	_tmp34_ = g_new0 (GLushort, ((((gint) _tmp27_) - 1) * (((gint) _tmp33_) - 1)) * 6);
	self->priv->_faceArray = (g_free (self->priv->_faceArray), NULL);
	self->priv->_faceArray = _tmp34_;
	self->priv->_faceArray_length1 = ((((gint) _tmp27_) - 1) * (((gint) _tmp33_) - 1)) * 6;
	self->priv->__faceArray_size_ = self->priv->_faceArray_length1;
	_g_object_unref0 (_tmp31_);
	_g_object_unref0 (_tmp25_);
	_tmp35_ = self->priv->_heightfieldData;
	_tmp36_ = self->priv->_map;
	_tmp37_ = _tmp36_->texels;
	_tmp38_ = self->priv->_size;
	_tmp39_ = soy_atoms_size_get_width (_tmp38_);
	_tmp40_ = _tmp39_;
	_tmp41_ = self->priv->_size;
	_tmp42_ = soy_atoms_size_get_depth (_tmp41_);
	_tmp43_ = _tmp42_;
	_tmp44_ = self->priv->_map;
	_tmp45_ = soy_textures_texture_get_size (_tmp44_);
	_tmp46_ = _tmp45_;
	_tmp47_ = _tmp46_;
	_tmp48_ = soy_atoms_size_get_width (_tmp47_);
	_tmp49_ = _tmp48_;
	_tmp50_ = self->priv->_map;
	_tmp51_ = soy_textures_texture_get_size (_tmp50_);
	_tmp52_ = _tmp51_;
	_tmp53_ = _tmp52_;
	_tmp54_ = soy_atoms_size_get_height (_tmp53_);
	_tmp55_ = _tmp54_;
	_tmp56_ = self->priv->_size;
	_tmp57_ = soy_atoms_size_get_height (_tmp56_);
	_tmp58_ = _tmp57_;
	dGeomHeightfieldDataBuildByte (_tmp35_, _tmp37_, 0, (dReal) _tmp40_, (dReal) _tmp43_, (gint) _tmp49_, (gint) _tmp55_, (dReal) ((1.0f / 255.0f) * _tmp58_), (dReal) 0, (dReal) 4.0f, 0);
	_g_object_unref0 (_tmp53_);
	_g_object_unref0 (_tmp47_);
	_tmp59_ = ((soyscenesScene*) self)->space;
	_tmp60_ = self->priv->_heightfieldData;
	_tmp61_ = dCreateHeightfield (_tmp59_, _tmp60_, 1);
	_dGeomDestroy0 (self->priv->_geomID);
	self->priv->_geomID = _tmp61_;
	_tmp62_ = self->priv->_geomID;
	_tmp63_ = self->priv->_pos;
	_tmp64_ = soy_atoms_position_get_x (_tmp63_);
	_tmp65_ = _tmp64_;
	_tmp66_ = self->priv->_pos;
	_tmp67_ = soy_atoms_position_get_y (_tmp66_);
	_tmp68_ = _tmp67_;
	_tmp69_ = self->priv->_pos;
	_tmp70_ = soy_atoms_position_get_z (_tmp69_);
	_tmp71_ = _tmp70_;
	dGeomSetPosition (_tmp62_, (dReal) _tmp65_, (dReal) _tmp68_, (dReal) _tmp71_);
	{
		gboolean _tmp72_;
		i = 0;
		_tmp72_ = TRUE;
		while (TRUE) {
			gboolean _tmp73_;
			soytexturesTexture* _tmp75_;
			soyatomsSize* _tmp76_;
			soyatomsSize* _tmp77_;
			soyatomsSize* _tmp78_;
			gfloat _tmp79_;
			gfloat _tmp80_;
			gboolean _tmp81_;
			_tmp73_ = _tmp72_;
			if (!_tmp73_) {
				gint _tmp74_;
				_tmp74_ = i;
				i = _tmp74_ + 1;
			}
			_tmp72_ = FALSE;
			_tmp75_ = self->priv->_map;
			_tmp76_ = soy_textures_texture_get_size (_tmp75_);
			_tmp77_ = _tmp76_;
			_tmp78_ = _tmp77_;
			_tmp79_ = soy_atoms_size_get_height (_tmp78_);
			_tmp80_ = _tmp79_;
			_tmp81_ = !(i <= (_tmp80_ - 1));
			_g_object_unref0 (_tmp78_);
			if (_tmp81_) {
				break;
			}
			{
				gboolean _tmp82_;
				j = 0;
				_tmp82_ = TRUE;
				while (TRUE) {
					gboolean _tmp83_;
					soytexturesTexture* _tmp85_;
					soyatomsSize* _tmp86_;
					soyatomsSize* _tmp87_;
					soyatomsSize* _tmp88_;
					gfloat _tmp89_;
					gfloat _tmp90_;
					gboolean _tmp91_;
					soytexturesTexture* _tmp92_;
					soyatomsSize* _tmp93_;
					soyatomsSize* _tmp94_;
					soyatomsSize* _tmp95_;
					gfloat _tmp96_;
					gfloat _tmp97_;
					gint _tmp98_;
					gint _tmp99_;
					GLfloat* _tmp100_;
					gint _tmp100__length1;
					gint _tmp101_;
					gint _tmp102_;
					soytexturesTexture* _tmp103_;
					soyatomsSize* _tmp104_;
					soyatomsSize* _tmp105_;
					soyatomsSize* _tmp106_;
					gfloat _tmp107_;
					gfloat _tmp108_;
					soyatomsSize* _tmp109_;
					gfloat _tmp110_;
					gfloat _tmp111_;
					GLfloat _tmp112_;
					GLfloat* _tmp113_;
					gint _tmp113__length1;
					gint _tmp114_;
					soytexturesTexture* _tmp115_;
					guchar* _tmp116_;
					gint _tmp117_;
					guchar _tmp118_;
					soyatomsSize* _tmp119_;
					gfloat _tmp120_;
					gfloat _tmp121_;
					GLfloat _tmp122_;
					GLfloat* _tmp123_;
					gint _tmp123__length1;
					gint _tmp124_;
					gint _tmp125_;
					soytexturesTexture* _tmp126_;
					soyatomsSize* _tmp127_;
					soyatomsSize* _tmp128_;
					soyatomsSize* _tmp129_;
					gfloat _tmp130_;
					gfloat _tmp131_;
					soyatomsSize* _tmp132_;
					gfloat _tmp133_;
					gfloat _tmp134_;
					GLfloat _tmp135_;
					GLfloat* _tmp136_;
					gint _tmp136__length1;
					gint _tmp137_;
					gint _tmp138_;
					GLfloat _tmp139_;
					GLfloat* _tmp140_;
					gint _tmp140__length1;
					gint _tmp141_;
					gint _tmp142_;
					GLfloat _tmp143_;
					_tmp83_ = _tmp82_;
					if (!_tmp83_) {
						gint _tmp84_;
						_tmp84_ = j;
						j = _tmp84_ + 1;
					}
					_tmp82_ = FALSE;
					_tmp85_ = self->priv->_map;
					_tmp86_ = soy_textures_texture_get_size (_tmp85_);
					_tmp87_ = _tmp86_;
					_tmp88_ = _tmp87_;
					_tmp89_ = soy_atoms_size_get_width (_tmp88_);
					_tmp90_ = _tmp89_;
					_tmp91_ = !(j <= (_tmp90_ - 1));
					_g_object_unref0 (_tmp88_);
					if (_tmp91_) {
						break;
					}
					_tmp92_ = self->priv->_map;
					_tmp93_ = soy_textures_texture_get_size (_tmp92_);
					_tmp94_ = _tmp93_;
					_tmp95_ = _tmp94_;
					_tmp96_ = soy_atoms_size_get_width (_tmp95_);
					_tmp97_ = _tmp96_;
					_tmp98_ = i;
					_tmp99_ = j;
					l = (((gint) _tmp97_) * _tmp98_) + _tmp99_;
					_g_object_unref0 (_tmp95_);
					_tmp100_ = self->priv->_vertArray;
					_tmp100__length1 = self->priv->_vertArray_length1;
					_tmp101_ = l;
					_tmp102_ = j;
					_tmp103_ = self->priv->_map;
					_tmp104_ = soy_textures_texture_get_size (_tmp103_);
					_tmp105_ = _tmp104_;
					_tmp106_ = _tmp105_;
					_tmp107_ = soy_atoms_size_get_width (_tmp106_);
					_tmp108_ = _tmp107_;
					_tmp109_ = self->priv->_size;
					_tmp110_ = soy_atoms_size_get_width (_tmp109_);
					_tmp111_ = _tmp110_;
					_tmp100_[_tmp101_ * 11] = (GLfloat) (((_tmp102_ / (_tmp108_ - 1.0f)) - 0.5f) * _tmp111_);
					_tmp112_ = _tmp100_[_tmp101_ * 11];
					_g_object_unref0 (_tmp106_);
					_tmp113_ = self->priv->_vertArray;
					_tmp113__length1 = self->priv->_vertArray_length1;
					_tmp114_ = l;
					_tmp115_ = self->priv->_map;
					_tmp116_ = _tmp115_->texels;
					_tmp117_ = l;
					_tmp118_ = _tmp116_[_tmp117_];
					_tmp119_ = self->priv->_size;
					_tmp120_ = soy_atoms_size_get_height (_tmp119_);
					_tmp121_ = _tmp120_;
					_tmp113_[(_tmp114_ * 11) + 1] = (GLfloat) ((_tmp118_ / 255.0f) * _tmp121_);
					_tmp122_ = _tmp113_[(_tmp114_ * 11) + 1];
					_tmp123_ = self->priv->_vertArray;
					_tmp123__length1 = self->priv->_vertArray_length1;
					_tmp124_ = l;
					_tmp125_ = i;
					_tmp126_ = self->priv->_map;
					_tmp127_ = soy_textures_texture_get_size (_tmp126_);
					_tmp128_ = _tmp127_;
					_tmp129_ = _tmp128_;
					_tmp130_ = soy_atoms_size_get_height (_tmp129_);
					_tmp131_ = _tmp130_;
					_tmp132_ = self->priv->_size;
					_tmp133_ = soy_atoms_size_get_depth (_tmp132_);
					_tmp134_ = _tmp133_;
					_tmp123_[(_tmp124_ * 11) + 2] = (GLfloat) (((_tmp125_ / (_tmp131_ - 1.0f)) - 0.5f) * _tmp134_);
					_tmp135_ = _tmp123_[(_tmp124_ * 11) + 2];
					_g_object_unref0 (_tmp129_);
					_tmp136_ = self->priv->_vertArray;
					_tmp136__length1 = self->priv->_vertArray_length1;
					_tmp137_ = l;
					_tmp138_ = j;
					_tmp136_[(_tmp137_ * 11) + 6] = (GLfloat) _tmp138_;
					_tmp139_ = _tmp136_[(_tmp137_ * 11) + 6];
					_tmp140_ = self->priv->_vertArray;
					_tmp140__length1 = self->priv->_vertArray_length1;
					_tmp141_ = l;
					_tmp142_ = i;
					_tmp140_[(_tmp141_ * 11) + 7] = (GLfloat) _tmp142_;
					_tmp143_ = _tmp140_[(_tmp141_ * 11) + 7];
				}
			}
		}
	}
	{
		gboolean _tmp144_;
		i = 0;
		_tmp144_ = TRUE;
		while (TRUE) {
			gboolean _tmp145_;
			soytexturesTexture* _tmp147_;
			soyatomsSize* _tmp148_;
			soyatomsSize* _tmp149_;
			soyatomsSize* _tmp150_;
			gfloat _tmp151_;
			gfloat _tmp152_;
			gboolean _tmp153_;
			_tmp145_ = _tmp144_;
			if (!_tmp145_) {
				gint _tmp146_;
				_tmp146_ = i;
				i = _tmp146_ + 1;
			}
			_tmp144_ = FALSE;
			_tmp147_ = self->priv->_map;
			_tmp148_ = soy_textures_texture_get_size (_tmp147_);
			_tmp149_ = _tmp148_;
			_tmp150_ = _tmp149_;
			_tmp151_ = soy_atoms_size_get_height (_tmp150_);
			_tmp152_ = _tmp151_;
			_tmp153_ = !(i <= (_tmp152_ - 1));
			_g_object_unref0 (_tmp150_);
			if (_tmp153_) {
				break;
			}
			{
				gboolean _tmp154_;
				j = 0;
				_tmp154_ = TRUE;
				while (TRUE) {
					gboolean _tmp155_;
					soytexturesTexture* _tmp157_;
					soyatomsSize* _tmp158_;
					soyatomsSize* _tmp159_;
					soyatomsSize* _tmp160_;
					gfloat _tmp161_;
					gfloat _tmp162_;
					gboolean _tmp163_;
					gdouble* _tmp164_;
					gint _tmp164__length1;
					gdouble _tmp165_;
					gdouble* _tmp166_;
					gint _tmp166__length1;
					gdouble _tmp167_;
					gdouble* _tmp168_;
					gint _tmp168__length1;
					gdouble _tmp169_;
					gdouble* _tmp170_;
					gint _tmp170__length1;
					gdouble _tmp171_;
					gdouble* _tmp172_;
					gint _tmp172__length1;
					gdouble _tmp173_;
					gdouble* _tmp174_;
					gint _tmp174__length1;
					gdouble _tmp175_;
					soytexturesTexture* _tmp176_;
					soyatomsSize* _tmp177_;
					soyatomsSize* _tmp178_;
					soyatomsSize* _tmp179_;
					gfloat _tmp180_;
					gfloat _tmp181_;
					gint _tmp182_;
					gint _tmp183_;
					gint _tmp184_;
					soytexturesTexture* _tmp185_;
					soyatomsSize* _tmp186_;
					soyatomsSize* _tmp187_;
					soyatomsSize* _tmp188_;
					gfloat _tmp189_;
					gfloat _tmp190_;
					gint _tmp191_;
					gint _tmp192_;
					gdouble* _tmp193_;
					gint _tmp193__length1;
					soyatomsSize* _tmp194_;
					gfloat _tmp195_;
					gfloat _tmp196_;
					soytexturesTexture* _tmp197_;
					soyatomsSize* _tmp198_;
					soyatomsSize* _tmp199_;
					soyatomsSize* _tmp200_;
					gfloat _tmp201_;
					gfloat _tmp202_;
					gdouble _tmp203_;
					gdouble* _tmp204_;
					gint _tmp204__length1;
					gdouble _tmp205_;
					gint _tmp206_;
					soytexturesTexture* _tmp207_;
					soyatomsSize* _tmp208_;
					soyatomsSize* _tmp209_;
					soyatomsSize* _tmp210_;
					gfloat _tmp211_;
					gfloat _tmp212_;
					gboolean _tmp213_;
					gdouble* _tmp227_;
					gint _tmp227__length1;
					gdouble _tmp228_;
					gdouble* _tmp229_;
					gint _tmp229__length1;
					soyatomsSize* _tmp230_;
					gfloat _tmp231_;
					gfloat _tmp232_;
					soytexturesTexture* _tmp233_;
					soyatomsSize* _tmp234_;
					soyatomsSize* _tmp235_;
					soyatomsSize* _tmp236_;
					gfloat _tmp237_;
					gfloat _tmp238_;
					gdouble _tmp239_;
					gint _tmp240_;
					soytexturesTexture* _tmp241_;
					soyatomsSize* _tmp242_;
					soyatomsSize* _tmp243_;
					soyatomsSize* _tmp244_;
					gfloat _tmp245_;
					gfloat _tmp246_;
					gboolean _tmp247_;
					gdouble* _tmp261_;
					gint _tmp261__length1;
					gdouble* _tmp262_;
					gint _tmp262__length1;
					gdouble _tmp263_;
					gdouble* _tmp264_;
					gint _tmp264__length1;
					gdouble _tmp265_;
					gdouble* _tmp266_;
					gint _tmp266__length1;
					gdouble _tmp267_;
					gdouble* _tmp268_;
					gint _tmp268__length1;
					gdouble _tmp269_;
					gdouble _tmp270_;
					gdouble* _tmp271_;
					gint _tmp271__length1;
					gdouble* _tmp272_;
					gint _tmp272__length1;
					gdouble _tmp273_;
					gdouble* _tmp274_;
					gint _tmp274__length1;
					gdouble _tmp275_;
					gdouble* _tmp276_;
					gint _tmp276__length1;
					gdouble _tmp277_;
					gdouble* _tmp278_;
					gint _tmp278__length1;
					gdouble _tmp279_;
					gdouble _tmp280_;
					gdouble* _tmp281_;
					gint _tmp281__length1;
					gdouble* _tmp282_;
					gint _tmp282__length1;
					gdouble _tmp283_;
					gdouble* _tmp284_;
					gint _tmp284__length1;
					gdouble _tmp285_;
					gdouble* _tmp286_;
					gint _tmp286__length1;
					gdouble _tmp287_;
					gdouble* _tmp288_;
					gint _tmp288__length1;
					gdouble _tmp289_;
					gdouble _tmp290_;
					gint _tmp291_;
					soytexturesTexture* _tmp292_;
					soyatomsSize* _tmp293_;
					soyatomsSize* _tmp294_;
					soyatomsSize* _tmp295_;
					gfloat _tmp296_;
					gfloat _tmp297_;
					gint _tmp298_;
					gint _tmp299_;
					gdouble* _tmp300_;
					gint _tmp300__length1;
					soyatomsSize* _tmp301_;
					gfloat _tmp302_;
					gfloat _tmp303_;
					soytexturesTexture* _tmp304_;
					soyatomsSize* _tmp305_;
					soyatomsSize* _tmp306_;
					soyatomsSize* _tmp307_;
					gfloat _tmp308_;
					gfloat _tmp309_;
					gdouble _tmp310_;
					gdouble* _tmp311_;
					gint _tmp311__length1;
					gdouble _tmp312_;
					gint _tmp313_;
					soytexturesTexture* _tmp314_;
					soyatomsSize* _tmp315_;
					soyatomsSize* _tmp316_;
					soyatomsSize* _tmp317_;
					gfloat _tmp318_;
					gfloat _tmp319_;
					gboolean _tmp320_;
					gdouble* _tmp334_;
					gint _tmp334__length1;
					gdouble _tmp335_;
					gdouble* _tmp336_;
					gint _tmp336__length1;
					soyatomsSize* _tmp337_;
					gfloat _tmp338_;
					gfloat _tmp339_;
					soytexturesTexture* _tmp340_;
					soyatomsSize* _tmp341_;
					soyatomsSize* _tmp342_;
					soyatomsSize* _tmp343_;
					gfloat _tmp344_;
					gfloat _tmp345_;
					gdouble _tmp346_;
					gint _tmp347_;
					soytexturesTexture* _tmp348_;
					soyatomsSize* _tmp349_;
					soyatomsSize* _tmp350_;
					soyatomsSize* _tmp351_;
					gfloat _tmp352_;
					gfloat _tmp353_;
					gboolean _tmp354_;
					gdouble* _tmp368_;
					gint _tmp368__length1;
					gdouble* _tmp369_;
					gint _tmp369__length1;
					gdouble _tmp370_;
					gdouble* _tmp371_;
					gint _tmp371__length1;
					gdouble _tmp372_;
					gdouble* _tmp373_;
					gint _tmp373__length1;
					gdouble _tmp374_;
					gdouble* _tmp375_;
					gint _tmp375__length1;
					gdouble _tmp376_;
					gdouble _tmp377_;
					gdouble* _tmp378_;
					gint _tmp378__length1;
					gdouble* _tmp379_;
					gint _tmp379__length1;
					gdouble _tmp380_;
					gdouble* _tmp381_;
					gint _tmp381__length1;
					gdouble _tmp382_;
					gdouble* _tmp383_;
					gint _tmp383__length1;
					gdouble _tmp384_;
					gdouble* _tmp385_;
					gint _tmp385__length1;
					gdouble _tmp386_;
					gdouble _tmp387_;
					gdouble* _tmp388_;
					gint _tmp388__length1;
					gdouble* _tmp389_;
					gint _tmp389__length1;
					gdouble _tmp390_;
					gdouble* _tmp391_;
					gint _tmp391__length1;
					gdouble _tmp392_;
					gdouble* _tmp393_;
					gint _tmp393__length1;
					gdouble _tmp394_;
					gdouble* _tmp395_;
					gint _tmp395__length1;
					gdouble _tmp396_;
					gdouble _tmp397_;
					gdouble* _tmp398_;
					gint _tmp398__length1;
					gdouble* _tmp399_;
					gint _tmp399__length1;
					gdouble _tmp400_;
					gdouble _tmp401_;
					gdouble* _tmp402_;
					gint _tmp402__length1;
					gdouble* _tmp403_;
					gint _tmp403__length1;
					gdouble _tmp404_;
					gdouble _tmp405_;
					gdouble* _tmp406_;
					gint _tmp406__length1;
					gdouble* _tmp407_;
					gint _tmp407__length1;
					gdouble _tmp408_;
					gdouble _tmp409_;
					gdouble* _tmp410_;
					gint _tmp410__length1;
					gdouble _tmp411_;
					gdouble* _tmp412_;
					gint _tmp412__length1;
					gdouble _tmp413_;
					gdouble* _tmp414_;
					gint _tmp414__length1;
					gdouble _tmp415_;
					gdouble* _tmp416_;
					gint _tmp416__length1;
					gdouble _tmp417_;
					gdouble* _tmp418_;
					gint _tmp418__length1;
					gdouble _tmp419_;
					gdouble* _tmp420_;
					gint _tmp420__length1;
					gdouble _tmp421_;
					gdouble* _tmp422_;
					gint _tmp422__length1;
					gdouble _tmp423_;
					gdouble* _tmp424_;
					gint _tmp424__length1;
					gdouble _tmp425_;
					gdouble* _tmp426_;
					gint _tmp426__length1;
					gdouble _tmp427_;
					gdouble _tmp428_ = 0.0;
					gdouble* _tmp429_;
					gint _tmp429__length1;
					gdouble _tmp430_;
					gdouble _tmp431_;
					gdouble* _tmp432_;
					gint _tmp432__length1;
					gdouble _tmp433_;
					gdouble _tmp434_;
					gdouble* _tmp435_;
					gint _tmp435__length1;
					gdouble _tmp436_;
					gdouble _tmp437_;
					GLfloat* _tmp438_;
					gint _tmp438__length1;
					gint _tmp439_;
					gdouble* _tmp440_;
					gint _tmp440__length1;
					gdouble _tmp441_;
					GLfloat _tmp442_;
					GLfloat* _tmp443_;
					gint _tmp443__length1;
					gint _tmp444_;
					gdouble* _tmp445_;
					gint _tmp445__length1;
					gdouble _tmp446_;
					GLfloat _tmp447_;
					GLfloat* _tmp448_;
					gint _tmp448__length1;
					gint _tmp449_;
					gdouble* _tmp450_;
					gint _tmp450__length1;
					gdouble _tmp451_;
					GLfloat _tmp452_;
					gdouble* _tmp453_;
					gint _tmp453__length1;
					gdouble* _tmp454_;
					gint _tmp454__length1;
					gdouble _tmp455_;
					gdouble _tmp456_;
					gdouble* _tmp457_;
					gint _tmp457__length1;
					gdouble* _tmp458_;
					gint _tmp458__length1;
					gdouble _tmp459_;
					GLfloat* _tmp460_;
					gint _tmp460__length1;
					gint _tmp461_;
					GLfloat _tmp462_;
					GLfloat* _tmp463_;
					gint _tmp463__length1;
					gint _tmp464_;
					GLfloat _tmp465_;
					gdouble _tmp466_;
					gdouble* _tmp467_;
					gint _tmp467__length1;
					gdouble* _tmp468_;
					gint _tmp468__length1;
					gdouble _tmp469_;
					GLfloat* _tmp470_;
					gint _tmp470__length1;
					gint _tmp471_;
					GLfloat _tmp472_;
					GLfloat* _tmp473_;
					gint _tmp473__length1;
					gint _tmp474_;
					GLfloat _tmp475_;
					gdouble _tmp476_;
					GLfloat* _tmp477_;
					gint _tmp477__length1;
					gint _tmp478_;
					gdouble* _tmp479_;
					gint _tmp479__length1;
					gdouble _tmp480_;
					GLfloat _tmp481_;
					GLfloat* _tmp482_;
					gint _tmp482__length1;
					gint _tmp483_;
					gdouble* _tmp484_;
					gint _tmp484__length1;
					gdouble _tmp485_;
					GLfloat _tmp486_;
					GLfloat* _tmp487_;
					gint _tmp487__length1;
					gint _tmp488_;
					gdouble* _tmp489_;
					gint _tmp489__length1;
					gdouble _tmp490_;
					GLfloat _tmp491_;
					_tmp155_ = _tmp154_;
					if (!_tmp155_) {
						gint _tmp156_;
						_tmp156_ = j;
						j = _tmp156_ + 1;
					}
					_tmp154_ = FALSE;
					_tmp157_ = self->priv->_map;
					_tmp158_ = soy_textures_texture_get_size (_tmp157_);
					_tmp159_ = _tmp158_;
					_tmp160_ = _tmp159_;
					_tmp161_ = soy_atoms_size_get_width (_tmp160_);
					_tmp162_ = _tmp161_;
					_tmp163_ = !(j <= (_tmp162_ - 1));
					_g_object_unref0 (_tmp160_);
					if (_tmp163_) {
						break;
					}
					_tmp164_ = normal;
					_tmp164__length1 = normal_length1;
					_tmp164_[0] = 0.0;
					_tmp165_ = _tmp164_[0];
					_tmp166_ = normal;
					_tmp166__length1 = normal_length1;
					_tmp166_[1] = 0.0;
					_tmp167_ = _tmp166_[1];
					_tmp168_ = normal;
					_tmp168__length1 = normal_length1;
					_tmp168_[2] = 0.0;
					_tmp169_ = _tmp168_[2];
					_tmp170_ = normal2;
					_tmp170__length1 = normal2_length1;
					_tmp170_[0] = 0.0;
					_tmp171_ = _tmp170_[0];
					_tmp172_ = normal2;
					_tmp172__length1 = normal2_length1;
					_tmp172_[1] = 0.0;
					_tmp173_ = _tmp172_[1];
					_tmp174_ = normal2;
					_tmp174__length1 = normal2_length1;
					_tmp174_[2] = 0.0;
					_tmp175_ = _tmp174_[2];
					_tmp176_ = self->priv->_map;
					_tmp177_ = soy_textures_texture_get_size (_tmp176_);
					_tmp178_ = _tmp177_;
					_tmp179_ = _tmp178_;
					_tmp180_ = soy_atoms_size_get_width (_tmp179_);
					_tmp181_ = _tmp180_;
					_tmp182_ = i;
					_tmp183_ = j;
					offset = (((gint) _tmp181_) * _tmp182_) + _tmp183_;
					_g_object_unref0 (_tmp179_);
					_tmp184_ = offset;
					_tmp185_ = self->priv->_map;
					_tmp186_ = soy_textures_texture_get_size (_tmp185_);
					_tmp187_ = _tmp186_;
					_tmp188_ = _tmp187_;
					_tmp189_ = soy_atoms_size_get_width (_tmp188_);
					_tmp190_ = _tmp189_;
					a = _tmp184_ + ((gint) _tmp190_);
					_g_object_unref0 (_tmp188_);
					_tmp191_ = offset;
					b = _tmp191_ + 1;
					_tmp192_ = offset;
					c = _tmp192_;
					_tmp193_ = v1;
					_tmp193__length1 = v1_length1;
					_tmp194_ = self->priv->_size;
					_tmp195_ = soy_atoms_size_get_width (_tmp194_);
					_tmp196_ = _tmp195_;
					_tmp197_ = self->priv->_map;
					_tmp198_ = soy_textures_texture_get_size (_tmp197_);
					_tmp199_ = _tmp198_;
					_tmp200_ = _tmp199_;
					_tmp201_ = soy_atoms_size_get_width (_tmp200_);
					_tmp202_ = _tmp201_;
					_tmp193_[0] = (gdouble) (_tmp196_ / (_tmp202_ - 1.0f));
					_tmp203_ = _tmp193_[0];
					_g_object_unref0 (_tmp200_);
					_tmp204_ = v1;
					_tmp204__length1 = v1_length1;
					_tmp204_[2] = (gdouble) 0.0f;
					_tmp205_ = _tmp204_[2];
					_tmp206_ = j;
					_tmp207_ = self->priv->_map;
					_tmp208_ = soy_textures_texture_get_size (_tmp207_);
					_tmp209_ = _tmp208_;
					_tmp210_ = _tmp209_;
					_tmp211_ = soy_atoms_size_get_width (_tmp210_);
					_tmp212_ = _tmp211_;
					_tmp213_ = _tmp206_ != ((gint) (_tmp212_ - 1));
					_g_object_unref0 (_tmp210_);
					if (_tmp213_) {
						gdouble* _tmp214_;
						gint _tmp214__length1;
						GLfloat* _tmp215_;
						gint _tmp215__length1;
						gint _tmp216_;
						GLfloat _tmp217_;
						GLfloat* _tmp218_;
						gint _tmp218__length1;
						gint _tmp219_;
						GLfloat _tmp220_;
						gdouble _tmp221_;
						_tmp214_ = v1;
						_tmp214__length1 = v1_length1;
						_tmp215_ = self->priv->_vertArray;
						_tmp215__length1 = self->priv->_vertArray_length1;
						_tmp216_ = b;
						_tmp217_ = _tmp215_[(_tmp216_ * 11) + 1];
						_tmp218_ = self->priv->_vertArray;
						_tmp218__length1 = self->priv->_vertArray_length1;
						_tmp219_ = c;
						_tmp220_ = _tmp218_[(_tmp219_ * 11) + 1];
						_tmp214_[1] = (gdouble) (_tmp217_ - _tmp220_);
						_tmp221_ = _tmp214_[1];
					} else {
						gdouble* _tmp222_;
						gint _tmp222__length1;
						GLfloat* _tmp223_;
						gint _tmp223__length1;
						gint _tmp224_;
						GLfloat _tmp225_;
						gdouble _tmp226_;
						_tmp222_ = v1;
						_tmp222__length1 = v1_length1;
						_tmp223_ = self->priv->_vertArray;
						_tmp223__length1 = self->priv->_vertArray_length1;
						_tmp224_ = c;
						_tmp225_ = _tmp223_[(_tmp224_ * 11) + 1];
						_tmp222_[1] = (gdouble) (-_tmp225_);
						_tmp226_ = _tmp222_[1];
					}
					_tmp227_ = v2;
					_tmp227__length1 = v2_length1;
					_tmp227_[0] = (gdouble) 0.0f;
					_tmp228_ = _tmp227_[0];
					_tmp229_ = v2;
					_tmp229__length1 = v2_length1;
					_tmp230_ = self->priv->_size;
					_tmp231_ = soy_atoms_size_get_depth (_tmp230_);
					_tmp232_ = _tmp231_;
					_tmp233_ = self->priv->_map;
					_tmp234_ = soy_textures_texture_get_size (_tmp233_);
					_tmp235_ = _tmp234_;
					_tmp236_ = _tmp235_;
					_tmp237_ = soy_atoms_size_get_height (_tmp236_);
					_tmp238_ = _tmp237_;
					_tmp229_[2] = (gdouble) (_tmp232_ / (_tmp238_ - 1.0f));
					_tmp239_ = _tmp229_[2];
					_g_object_unref0 (_tmp236_);
					_tmp240_ = i;
					_tmp241_ = self->priv->_map;
					_tmp242_ = soy_textures_texture_get_size (_tmp241_);
					_tmp243_ = _tmp242_;
					_tmp244_ = _tmp243_;
					_tmp245_ = soy_atoms_size_get_height (_tmp244_);
					_tmp246_ = _tmp245_;
					_tmp247_ = _tmp240_ != ((gint) (_tmp246_ - 1));
					_g_object_unref0 (_tmp244_);
					if (_tmp247_) {
						gdouble* _tmp248_;
						gint _tmp248__length1;
						GLfloat* _tmp249_;
						gint _tmp249__length1;
						gint _tmp250_;
						GLfloat _tmp251_;
						GLfloat* _tmp252_;
						gint _tmp252__length1;
						gint _tmp253_;
						GLfloat _tmp254_;
						gdouble _tmp255_;
						_tmp248_ = v2;
						_tmp248__length1 = v2_length1;
						_tmp249_ = self->priv->_vertArray;
						_tmp249__length1 = self->priv->_vertArray_length1;
						_tmp250_ = a;
						_tmp251_ = _tmp249_[(_tmp250_ * 11) + 1];
						_tmp252_ = self->priv->_vertArray;
						_tmp252__length1 = self->priv->_vertArray_length1;
						_tmp253_ = c;
						_tmp254_ = _tmp252_[(_tmp253_ * 11) + 1];
						_tmp248_[1] = (gdouble) (_tmp251_ - _tmp254_);
						_tmp255_ = _tmp248_[1];
					} else {
						gdouble* _tmp256_;
						gint _tmp256__length1;
						GLfloat* _tmp257_;
						gint _tmp257__length1;
						gint _tmp258_;
						GLfloat _tmp259_;
						gdouble _tmp260_;
						_tmp256_ = v2;
						_tmp256__length1 = v2_length1;
						_tmp257_ = self->priv->_vertArray;
						_tmp257__length1 = self->priv->_vertArray_length1;
						_tmp258_ = c;
						_tmp259_ = _tmp257_[(_tmp258_ * 11) + 1];
						_tmp256_[1] = (gdouble) (-_tmp259_);
						_tmp260_ = _tmp256_[1];
					}
					_tmp261_ = normal;
					_tmp261__length1 = normal_length1;
					_tmp262_ = v2;
					_tmp262__length1 = v2_length1;
					_tmp263_ = _tmp262_[1];
					_tmp264_ = v1;
					_tmp264__length1 = v1_length1;
					_tmp265_ = _tmp264_[2];
					_tmp266_ = v2;
					_tmp266__length1 = v2_length1;
					_tmp267_ = _tmp266_[2];
					_tmp268_ = v1;
					_tmp268__length1 = v1_length1;
					_tmp269_ = _tmp268_[1];
					_tmp261_[0] = (_tmp263_ * _tmp265_) - (_tmp267_ * _tmp269_);
					_tmp270_ = _tmp261_[0];
					_tmp271_ = normal;
					_tmp271__length1 = normal_length1;
					_tmp272_ = v2;
					_tmp272__length1 = v2_length1;
					_tmp273_ = _tmp272_[2];
					_tmp274_ = v1;
					_tmp274__length1 = v1_length1;
					_tmp275_ = _tmp274_[0];
					_tmp276_ = v2;
					_tmp276__length1 = v2_length1;
					_tmp277_ = _tmp276_[0];
					_tmp278_ = v1;
					_tmp278__length1 = v1_length1;
					_tmp279_ = _tmp278_[2];
					_tmp271_[1] = (_tmp273_ * _tmp275_) - (_tmp277_ * _tmp279_);
					_tmp280_ = _tmp271_[1];
					_tmp281_ = normal;
					_tmp281__length1 = normal_length1;
					_tmp282_ = v2;
					_tmp282__length1 = v2_length1;
					_tmp283_ = _tmp282_[0];
					_tmp284_ = v1;
					_tmp284__length1 = v1_length1;
					_tmp285_ = _tmp284_[1];
					_tmp286_ = v2;
					_tmp286__length1 = v2_length1;
					_tmp287_ = _tmp286_[1];
					_tmp288_ = v1;
					_tmp288__length1 = v1_length1;
					_tmp289_ = _tmp288_[0];
					_tmp281_[2] = (_tmp283_ * _tmp285_) - (_tmp287_ * _tmp289_);
					_tmp290_ = _tmp281_[2];
					_tmp291_ = offset;
					_tmp292_ = self->priv->_map;
					_tmp293_ = soy_textures_texture_get_size (_tmp292_);
					_tmp294_ = _tmp293_;
					_tmp295_ = _tmp294_;
					_tmp296_ = soy_atoms_size_get_width (_tmp295_);
					_tmp297_ = _tmp296_;
					a = _tmp291_ - ((gint) _tmp297_);
					_g_object_unref0 (_tmp295_);
					_tmp298_ = offset;
					b = _tmp298_ - 1;
					_tmp299_ = offset;
					c = _tmp299_;
					_tmp300_ = v1;
					_tmp300__length1 = v1_length1;
					_tmp301_ = self->priv->_size;
					_tmp302_ = soy_atoms_size_get_width (_tmp301_);
					_tmp303_ = _tmp302_;
					_tmp304_ = self->priv->_map;
					_tmp305_ = soy_textures_texture_get_size (_tmp304_);
					_tmp306_ = _tmp305_;
					_tmp307_ = _tmp306_;
					_tmp308_ = soy_atoms_size_get_width (_tmp307_);
					_tmp309_ = _tmp308_;
					_tmp300_[0] = (gdouble) ((-_tmp303_) / (_tmp309_ - 1.0f));
					_tmp310_ = _tmp300_[0];
					_g_object_unref0 (_tmp307_);
					_tmp311_ = v1;
					_tmp311__length1 = v1_length1;
					_tmp311_[2] = (gdouble) 0.0f;
					_tmp312_ = _tmp311_[2];
					_tmp313_ = j;
					_tmp314_ = self->priv->_map;
					_tmp315_ = soy_textures_texture_get_size (_tmp314_);
					_tmp316_ = _tmp315_;
					_tmp317_ = _tmp316_;
					_tmp318_ = soy_atoms_size_get_width (_tmp317_);
					_tmp319_ = _tmp318_;
					_tmp320_ = _tmp313_ != ((gint) (_tmp319_ - 1));
					_g_object_unref0 (_tmp317_);
					if (_tmp320_) {
						gdouble* _tmp321_;
						gint _tmp321__length1;
						GLfloat* _tmp322_;
						gint _tmp322__length1;
						gint _tmp323_;
						GLfloat _tmp324_;
						GLfloat* _tmp325_;
						gint _tmp325__length1;
						gint _tmp326_;
						GLfloat _tmp327_;
						gdouble _tmp328_;
						_tmp321_ = v1;
						_tmp321__length1 = v1_length1;
						_tmp322_ = self->priv->_vertArray;
						_tmp322__length1 = self->priv->_vertArray_length1;
						_tmp323_ = b;
						_tmp324_ = _tmp322_[(_tmp323_ * 11) + 1];
						_tmp325_ = self->priv->_vertArray;
						_tmp325__length1 = self->priv->_vertArray_length1;
						_tmp326_ = c;
						_tmp327_ = _tmp325_[(_tmp326_ * 11) + 1];
						_tmp321_[1] = (gdouble) (_tmp324_ - _tmp327_);
						_tmp328_ = _tmp321_[1];
					} else {
						gdouble* _tmp329_;
						gint _tmp329__length1;
						GLfloat* _tmp330_;
						gint _tmp330__length1;
						gint _tmp331_;
						GLfloat _tmp332_;
						gdouble _tmp333_;
						_tmp329_ = v1;
						_tmp329__length1 = v1_length1;
						_tmp330_ = self->priv->_vertArray;
						_tmp330__length1 = self->priv->_vertArray_length1;
						_tmp331_ = c;
						_tmp332_ = _tmp330_[(_tmp331_ * 11) + 1];
						_tmp329_[1] = (gdouble) (-_tmp332_);
						_tmp333_ = _tmp329_[1];
					}
					_tmp334_ = v2;
					_tmp334__length1 = v2_length1;
					_tmp334_[0] = (gdouble) 0.0f;
					_tmp335_ = _tmp334_[0];
					_tmp336_ = v2;
					_tmp336__length1 = v2_length1;
					_tmp337_ = self->priv->_size;
					_tmp338_ = soy_atoms_size_get_depth (_tmp337_);
					_tmp339_ = _tmp338_;
					_tmp340_ = self->priv->_map;
					_tmp341_ = soy_textures_texture_get_size (_tmp340_);
					_tmp342_ = _tmp341_;
					_tmp343_ = _tmp342_;
					_tmp344_ = soy_atoms_size_get_height (_tmp343_);
					_tmp345_ = _tmp344_;
					_tmp336_[2] = (gdouble) ((-_tmp339_) / (_tmp345_ - 1.0f));
					_tmp346_ = _tmp336_[2];
					_g_object_unref0 (_tmp343_);
					_tmp347_ = i;
					_tmp348_ = self->priv->_map;
					_tmp349_ = soy_textures_texture_get_size (_tmp348_);
					_tmp350_ = _tmp349_;
					_tmp351_ = _tmp350_;
					_tmp352_ = soy_atoms_size_get_height (_tmp351_);
					_tmp353_ = _tmp352_;
					_tmp354_ = _tmp347_ != ((gint) (_tmp353_ - 1));
					_g_object_unref0 (_tmp351_);
					if (_tmp354_) {
						gdouble* _tmp355_;
						gint _tmp355__length1;
						GLfloat* _tmp356_;
						gint _tmp356__length1;
						gint _tmp357_;
						GLfloat _tmp358_;
						GLfloat* _tmp359_;
						gint _tmp359__length1;
						gint _tmp360_;
						GLfloat _tmp361_;
						gdouble _tmp362_;
						_tmp355_ = v2;
						_tmp355__length1 = v2_length1;
						_tmp356_ = self->priv->_vertArray;
						_tmp356__length1 = self->priv->_vertArray_length1;
						_tmp357_ = a;
						_tmp358_ = _tmp356_[(_tmp357_ * 11) + 1];
						_tmp359_ = self->priv->_vertArray;
						_tmp359__length1 = self->priv->_vertArray_length1;
						_tmp360_ = c;
						_tmp361_ = _tmp359_[(_tmp360_ * 11) + 1];
						_tmp355_[1] = (gdouble) (_tmp358_ - _tmp361_);
						_tmp362_ = _tmp355_[1];
					} else {
						gdouble* _tmp363_;
						gint _tmp363__length1;
						GLfloat* _tmp364_;
						gint _tmp364__length1;
						gint _tmp365_;
						GLfloat _tmp366_;
						gdouble _tmp367_;
						_tmp363_ = v2;
						_tmp363__length1 = v2_length1;
						_tmp364_ = self->priv->_vertArray;
						_tmp364__length1 = self->priv->_vertArray_length1;
						_tmp365_ = c;
						_tmp366_ = _tmp364_[(_tmp365_ * 11) + 1];
						_tmp363_[1] = (gdouble) (-_tmp366_);
						_tmp367_ = _tmp363_[1];
					}
					_tmp368_ = normal2;
					_tmp368__length1 = normal2_length1;
					_tmp369_ = v2;
					_tmp369__length1 = v2_length1;
					_tmp370_ = _tmp369_[1];
					_tmp371_ = v1;
					_tmp371__length1 = v1_length1;
					_tmp372_ = _tmp371_[2];
					_tmp373_ = v2;
					_tmp373__length1 = v2_length1;
					_tmp374_ = _tmp373_[2];
					_tmp375_ = v1;
					_tmp375__length1 = v1_length1;
					_tmp376_ = _tmp375_[1];
					_tmp368_[0] = (_tmp370_ * _tmp372_) - (_tmp374_ * _tmp376_);
					_tmp377_ = _tmp368_[0];
					_tmp378_ = normal2;
					_tmp378__length1 = normal2_length1;
					_tmp379_ = v2;
					_tmp379__length1 = v2_length1;
					_tmp380_ = _tmp379_[2];
					_tmp381_ = v1;
					_tmp381__length1 = v1_length1;
					_tmp382_ = _tmp381_[0];
					_tmp383_ = v2;
					_tmp383__length1 = v2_length1;
					_tmp384_ = _tmp383_[0];
					_tmp385_ = v1;
					_tmp385__length1 = v1_length1;
					_tmp386_ = _tmp385_[2];
					_tmp378_[1] = (_tmp380_ * _tmp382_) - (_tmp384_ * _tmp386_);
					_tmp387_ = _tmp378_[1];
					_tmp388_ = normal2;
					_tmp388__length1 = normal2_length1;
					_tmp389_ = v2;
					_tmp389__length1 = v2_length1;
					_tmp390_ = _tmp389_[0];
					_tmp391_ = v1;
					_tmp391__length1 = v1_length1;
					_tmp392_ = _tmp391_[1];
					_tmp393_ = v2;
					_tmp393__length1 = v2_length1;
					_tmp394_ = _tmp393_[1];
					_tmp395_ = v1;
					_tmp395__length1 = v1_length1;
					_tmp396_ = _tmp395_[0];
					_tmp388_[2] = (_tmp390_ * _tmp392_) - (_tmp394_ * _tmp396_);
					_tmp397_ = _tmp388_[2];
					_tmp398_ = normal;
					_tmp398__length1 = normal_length1;
					_tmp399_ = normal2;
					_tmp399__length1 = normal2_length1;
					_tmp400_ = _tmp399_[0];
					_tmp398_[0] += _tmp400_;
					_tmp401_ = _tmp398_[0];
					_tmp402_ = normal;
					_tmp402__length1 = normal_length1;
					_tmp403_ = normal2;
					_tmp403__length1 = normal2_length1;
					_tmp404_ = _tmp403_[1];
					_tmp402_[1] += _tmp404_;
					_tmp405_ = _tmp402_[1];
					_tmp406_ = normal;
					_tmp406__length1 = normal_length1;
					_tmp407_ = normal2;
					_tmp407__length1 = normal2_length1;
					_tmp408_ = _tmp407_[2];
					_tmp406_[2] += _tmp408_;
					_tmp409_ = _tmp406_[2];
					_tmp410_ = normal;
					_tmp410__length1 = normal_length1;
					_tmp410_[0] /= (gdouble) 2;
					_tmp411_ = _tmp410_[0];
					_tmp412_ = normal;
					_tmp412__length1 = normal_length1;
					_tmp412_[1] /= (gdouble) 2;
					_tmp413_ = _tmp412_[1];
					_tmp414_ = normal;
					_tmp414__length1 = normal_length1;
					_tmp414_[2] /= (gdouble) 2;
					_tmp415_ = _tmp414_[2];
					_tmp416_ = normal;
					_tmp416__length1 = normal_length1;
					_tmp417_ = _tmp416_[0];
					_tmp418_ = normal;
					_tmp418__length1 = normal_length1;
					_tmp419_ = _tmp418_[0];
					_tmp420_ = normal;
					_tmp420__length1 = normal_length1;
					_tmp421_ = _tmp420_[1];
					_tmp422_ = normal;
					_tmp422__length1 = normal_length1;
					_tmp423_ = _tmp422_[1];
					_tmp424_ = normal;
					_tmp424__length1 = normal_length1;
					_tmp425_ = _tmp424_[2];
					_tmp426_ = normal;
					_tmp426__length1 = normal_length1;
					_tmp427_ = _tmp426_[2];
					_tmp428_ = sqrt (((_tmp417_ * _tmp419_) + (_tmp421_ * _tmp423_)) + (_tmp425_ * _tmp427_));
					length = _tmp428_;
					_tmp429_ = normal;
					_tmp429__length1 = normal_length1;
					_tmp430_ = length;
					_tmp429_[0] /= _tmp430_;
					_tmp431_ = _tmp429_[0];
					_tmp432_ = normal;
					_tmp432__length1 = normal_length1;
					_tmp433_ = length;
					_tmp432_[1] /= _tmp433_;
					_tmp434_ = _tmp432_[1];
					_tmp435_ = normal;
					_tmp435__length1 = normal_length1;
					_tmp436_ = length;
					_tmp435_[2] /= _tmp436_;
					_tmp437_ = _tmp435_[2];
					_tmp438_ = self->priv->_vertArray;
					_tmp438__length1 = self->priv->_vertArray_length1;
					_tmp439_ = offset;
					_tmp440_ = normal;
					_tmp440__length1 = normal_length1;
					_tmp441_ = _tmp440_[0];
					_tmp438_[(_tmp439_ * 11) + 3] = (GLfloat) ((gfloat) _tmp441_);
					_tmp442_ = _tmp438_[(_tmp439_ * 11) + 3];
					_tmp443_ = self->priv->_vertArray;
					_tmp443__length1 = self->priv->_vertArray_length1;
					_tmp444_ = offset;
					_tmp445_ = normal;
					_tmp445__length1 = normal_length1;
					_tmp446_ = _tmp445_[1];
					_tmp443_[(_tmp444_ * 11) + 4] = (GLfloat) ((gfloat) _tmp446_);
					_tmp447_ = _tmp443_[(_tmp444_ * 11) + 4];
					_tmp448_ = self->priv->_vertArray;
					_tmp448__length1 = self->priv->_vertArray_length1;
					_tmp449_ = offset;
					_tmp450_ = normal;
					_tmp450__length1 = normal_length1;
					_tmp451_ = _tmp450_[2];
					_tmp448_[(_tmp449_ * 11) + 5] = (GLfloat) ((gfloat) _tmp451_);
					_tmp452_ = _tmp448_[(_tmp449_ * 11) + 5];
					_tmp453_ = u;
					_tmp453__length1 = u_length1;
					_tmp454_ = normal;
					_tmp454__length1 = normal_length1;
					_tmp455_ = _tmp454_[0];
					_tmp453_[0] = _tmp455_;
					_tmp456_ = _tmp453_[0];
					_tmp457_ = u;
					_tmp457__length1 = u_length1;
					_tmp458_ = normal;
					_tmp458__length1 = normal_length1;
					_tmp459_ = _tmp458_[2];
					_tmp460_ = self->priv->_vertArray;
					_tmp460__length1 = self->priv->_vertArray_length1;
					_tmp461_ = offset;
					_tmp462_ = _tmp460_[(_tmp461_ * 11) + 2];
					_tmp463_ = self->priv->_vertArray;
					_tmp463__length1 = self->priv->_vertArray_length1;
					_tmp464_ = offset;
					_tmp465_ = _tmp463_[(_tmp464_ * 11) + 1];
					_tmp457_[1] = (-(_tmp459_ - _tmp462_)) + _tmp465_;
					_tmp466_ = _tmp457_[1];
					_tmp467_ = u;
					_tmp467__length1 = u_length1;
					_tmp468_ = normal;
					_tmp468__length1 = normal_length1;
					_tmp469_ = _tmp468_[1];
					_tmp470_ = self->priv->_vertArray;
					_tmp470__length1 = self->priv->_vertArray_length1;
					_tmp471_ = offset;
					_tmp472_ = _tmp470_[(_tmp471_ * 11) + 1];
					_tmp473_ = self->priv->_vertArray;
					_tmp473__length1 = self->priv->_vertArray_length1;
					_tmp474_ = offset;
					_tmp475_ = _tmp473_[(_tmp474_ * 11) + 2];
					_tmp467_[2] = (_tmp469_ - _tmp472_) + _tmp475_;
					_tmp476_ = _tmp467_[2];
					_tmp477_ = self->priv->_vertArray;
					_tmp477__length1 = self->priv->_vertArray_length1;
					_tmp478_ = offset;
					_tmp479_ = u;
					_tmp479__length1 = u_length1;
					_tmp480_ = _tmp479_[0];
					_tmp477_[(_tmp478_ * 11) + 8] = (GLfloat) ((gfloat) _tmp480_);
					_tmp481_ = _tmp477_[(_tmp478_ * 11) + 8];
					_tmp482_ = self->priv->_vertArray;
					_tmp482__length1 = self->priv->_vertArray_length1;
					_tmp483_ = offset;
					_tmp484_ = u;
					_tmp484__length1 = u_length1;
					_tmp485_ = _tmp484_[1];
					_tmp482_[(_tmp483_ * 11) + 9] = (GLfloat) ((gfloat) _tmp485_);
					_tmp486_ = _tmp482_[(_tmp483_ * 11) + 9];
					_tmp487_ = self->priv->_vertArray;
					_tmp487__length1 = self->priv->_vertArray_length1;
					_tmp488_ = offset;
					_tmp489_ = u;
					_tmp489__length1 = u_length1;
					_tmp490_ = _tmp489_[2];
					_tmp487_[(_tmp488_ * 11) + 10] = (GLfloat) ((gfloat) _tmp490_);
					_tmp491_ = _tmp487_[(_tmp488_ * 11) + 10];
				}
			}
		}
	}
	l = 0;
	{
		gboolean _tmp492_;
		i = 0;
		_tmp492_ = TRUE;
		while (TRUE) {
			gboolean _tmp493_;
			soytexturesTexture* _tmp495_;
			soyatomsSize* _tmp496_;
			soyatomsSize* _tmp497_;
			soyatomsSize* _tmp498_;
			gfloat _tmp499_;
			gfloat _tmp500_;
			gboolean _tmp501_;
			_tmp493_ = _tmp492_;
			if (!_tmp493_) {
				gint _tmp494_;
				_tmp494_ = i;
				i = _tmp494_ + 1;
			}
			_tmp492_ = FALSE;
			_tmp495_ = self->priv->_map;
			_tmp496_ = soy_textures_texture_get_size (_tmp495_);
			_tmp497_ = _tmp496_;
			_tmp498_ = _tmp497_;
			_tmp499_ = soy_atoms_size_get_height (_tmp498_);
			_tmp500_ = _tmp499_;
			_tmp501_ = !(i <= (((gint) _tmp500_) - 2));
			_g_object_unref0 (_tmp498_);
			if (_tmp501_) {
				break;
			}
			{
				gboolean _tmp502_;
				j = 0;
				_tmp502_ = TRUE;
				while (TRUE) {
					gboolean _tmp503_;
					soytexturesTexture* _tmp505_;
					soyatomsSize* _tmp506_;
					soyatomsSize* _tmp507_;
					soyatomsSize* _tmp508_;
					gfloat _tmp509_;
					gfloat _tmp510_;
					gboolean _tmp511_;
					GLushort* _tmp512_;
					gint _tmp512__length1;
					gint _tmp513_;
					gint _tmp514_;
					gint _tmp515_;
					soytexturesTexture* _tmp516_;
					soyatomsSize* _tmp517_;
					soyatomsSize* _tmp518_;
					soyatomsSize* _tmp519_;
					gfloat _tmp520_;
					gfloat _tmp521_;
					GLushort _tmp522_;
					GLushort* _tmp523_;
					gint _tmp523__length1;
					gint _tmp524_;
					gint _tmp525_;
					gint _tmp526_;
					soytexturesTexture* _tmp527_;
					soyatomsSize* _tmp528_;
					soyatomsSize* _tmp529_;
					soyatomsSize* _tmp530_;
					gfloat _tmp531_;
					gfloat _tmp532_;
					GLushort _tmp533_;
					GLushort* _tmp534_;
					gint _tmp534__length1;
					gint _tmp535_;
					gint _tmp536_;
					gint _tmp537_;
					soytexturesTexture* _tmp538_;
					soyatomsSize* _tmp539_;
					soyatomsSize* _tmp540_;
					soyatomsSize* _tmp541_;
					gfloat _tmp542_;
					gfloat _tmp543_;
					GLushort _tmp544_;
					GLushort* _tmp545_;
					gint _tmp545__length1;
					gint _tmp546_;
					gint _tmp547_;
					gint _tmp548_;
					soytexturesTexture* _tmp549_;
					soyatomsSize* _tmp550_;
					soyatomsSize* _tmp551_;
					soyatomsSize* _tmp552_;
					gfloat _tmp553_;
					gfloat _tmp554_;
					GLushort _tmp555_;
					GLushort* _tmp556_;
					gint _tmp556__length1;
					gint _tmp557_;
					gint _tmp558_;
					gint _tmp559_;
					soytexturesTexture* _tmp560_;
					soyatomsSize* _tmp561_;
					soyatomsSize* _tmp562_;
					soyatomsSize* _tmp563_;
					gfloat _tmp564_;
					gfloat _tmp565_;
					GLushort _tmp566_;
					GLushort* _tmp567_;
					gint _tmp567__length1;
					gint _tmp568_;
					gint _tmp569_;
					gint _tmp570_;
					soytexturesTexture* _tmp571_;
					soyatomsSize* _tmp572_;
					soyatomsSize* _tmp573_;
					soyatomsSize* _tmp574_;
					gfloat _tmp575_;
					gfloat _tmp576_;
					GLushort _tmp577_;
					gint _tmp578_;
					_tmp503_ = _tmp502_;
					if (!_tmp503_) {
						gint _tmp504_;
						_tmp504_ = j;
						j = _tmp504_ + 1;
					}
					_tmp502_ = FALSE;
					_tmp505_ = self->priv->_map;
					_tmp506_ = soy_textures_texture_get_size (_tmp505_);
					_tmp507_ = _tmp506_;
					_tmp508_ = _tmp507_;
					_tmp509_ = soy_atoms_size_get_width (_tmp508_);
					_tmp510_ = _tmp509_;
					_tmp511_ = !(j <= (((gint) _tmp510_) - 2));
					_g_object_unref0 (_tmp508_);
					if (_tmp511_) {
						break;
					}
					_tmp512_ = self->priv->_faceArray;
					_tmp512__length1 = self->priv->_faceArray_length1;
					_tmp513_ = l;
					_tmp514_ = j;
					_tmp515_ = i;
					_tmp516_ = self->priv->_map;
					_tmp517_ = soy_textures_texture_get_size (_tmp516_);
					_tmp518_ = _tmp517_;
					_tmp519_ = _tmp518_;
					_tmp520_ = soy_atoms_size_get_width (_tmp519_);
					_tmp521_ = _tmp520_;
					_tmp512_[_tmp513_] = (GLushort) (_tmp514_ + (_tmp515_ * ((gint) _tmp521_)));
					_tmp522_ = _tmp512_[_tmp513_];
					_g_object_unref0 (_tmp519_);
					_tmp523_ = self->priv->_faceArray;
					_tmp523__length1 = self->priv->_faceArray_length1;
					_tmp524_ = l;
					_tmp525_ = j;
					_tmp526_ = i;
					_tmp527_ = self->priv->_map;
					_tmp528_ = soy_textures_texture_get_size (_tmp527_);
					_tmp529_ = _tmp528_;
					_tmp530_ = _tmp529_;
					_tmp531_ = soy_atoms_size_get_width (_tmp530_);
					_tmp532_ = _tmp531_;
					_tmp523_[_tmp524_ + 1] = (GLushort) (_tmp525_ + ((_tmp526_ + 1) * ((gint) _tmp532_)));
					_tmp533_ = _tmp523_[_tmp524_ + 1];
					_g_object_unref0 (_tmp530_);
					_tmp534_ = self->priv->_faceArray;
					_tmp534__length1 = self->priv->_faceArray_length1;
					_tmp535_ = l;
					_tmp536_ = j;
					_tmp537_ = i;
					_tmp538_ = self->priv->_map;
					_tmp539_ = soy_textures_texture_get_size (_tmp538_);
					_tmp540_ = _tmp539_;
					_tmp541_ = _tmp540_;
					_tmp542_ = soy_atoms_size_get_width (_tmp541_);
					_tmp543_ = _tmp542_;
					_tmp534_[_tmp535_ + 2] = (GLushort) ((_tmp536_ + (_tmp537_ * ((gint) _tmp543_))) + 1);
					_tmp544_ = _tmp534_[_tmp535_ + 2];
					_g_object_unref0 (_tmp541_);
					_tmp545_ = self->priv->_faceArray;
					_tmp545__length1 = self->priv->_faceArray_length1;
					_tmp546_ = l;
					_tmp547_ = j;
					_tmp548_ = i;
					_tmp549_ = self->priv->_map;
					_tmp550_ = soy_textures_texture_get_size (_tmp549_);
					_tmp551_ = _tmp550_;
					_tmp552_ = _tmp551_;
					_tmp553_ = soy_atoms_size_get_width (_tmp552_);
					_tmp554_ = _tmp553_;
					_tmp545_[_tmp546_ + 3] = (GLushort) ((_tmp547_ + (_tmp548_ * ((gint) _tmp554_))) + 1);
					_tmp555_ = _tmp545_[_tmp546_ + 3];
					_g_object_unref0 (_tmp552_);
					_tmp556_ = self->priv->_faceArray;
					_tmp556__length1 = self->priv->_faceArray_length1;
					_tmp557_ = l;
					_tmp558_ = j;
					_tmp559_ = i;
					_tmp560_ = self->priv->_map;
					_tmp561_ = soy_textures_texture_get_size (_tmp560_);
					_tmp562_ = _tmp561_;
					_tmp563_ = _tmp562_;
					_tmp564_ = soy_atoms_size_get_width (_tmp563_);
					_tmp565_ = _tmp564_;
					_tmp556_[_tmp557_ + 4] = (GLushort) (_tmp558_ + ((_tmp559_ + 1) * ((gint) _tmp565_)));
					_tmp566_ = _tmp556_[_tmp557_ + 4];
					_g_object_unref0 (_tmp563_);
					_tmp567_ = self->priv->_faceArray;
					_tmp567__length1 = self->priv->_faceArray_length1;
					_tmp568_ = l;
					_tmp569_ = j;
					_tmp570_ = i;
					_tmp571_ = self->priv->_map;
					_tmp572_ = soy_textures_texture_get_size (_tmp571_);
					_tmp573_ = _tmp572_;
					_tmp574_ = _tmp573_;
					_tmp575_ = soy_atoms_size_get_width (_tmp574_);
					_tmp576_ = _tmp575_;
					_tmp567_[_tmp568_ + 5] = (GLushort) ((_tmp569_ + ((_tmp570_ + 1) * ((gint) _tmp576_))) + 1);
					_tmp577_ = _tmp567_[_tmp568_ + 5];
					_g_object_unref0 (_tmp574_);
					_tmp578_ = l;
					l = _tmp578_ + 6;
				}
			}
		}
	}
	_tmp579_ = self->priv->_vbo;
	glBindBuffer (GL_ARRAY_BUFFER, _tmp579_);
	_tmp580_ = self->priv->_map;
	_tmp581_ = soy_textures_texture_get_size (_tmp580_);
	_tmp582_ = _tmp581_;
	_tmp583_ = _tmp582_;
	_tmp584_ = soy_atoms_size_get_width (_tmp583_);
	_tmp585_ = _tmp584_;
	_tmp586_ = self->priv->_map;
	_tmp587_ = soy_textures_texture_get_size (_tmp586_);
	_tmp588_ = _tmp587_;
	_tmp589_ = _tmp588_;
	_tmp590_ = soy_atoms_size_get_height (_tmp589_);
	_tmp591_ = _tmp590_;
	_tmp592_ = self->priv->_vertArray;
	_tmp592__length1 = self->priv->_vertArray_length1;
	glBufferData (GL_ARRAY_BUFFER, (GLsizei) (((((gint) _tmp585_) * ((gint) _tmp591_)) * 11) * sizeof (GLfloat)), _tmp592_, GL_STATIC_DRAW);
	_g_object_unref0 (_tmp589_);
	_g_object_unref0 (_tmp583_);
	_tmp593_ = self->priv->_ebo;
	glBindBuffer (GL_ELEMENT_ARRAY_BUFFER, _tmp593_);
	_tmp594_ = self->priv->_map;
	_tmp595_ = soy_textures_texture_get_size (_tmp594_);
	_tmp596_ = _tmp595_;
	_tmp597_ = _tmp596_;
	_tmp598_ = soy_atoms_size_get_width (_tmp597_);
	_tmp599_ = _tmp598_;
	_tmp600_ = self->priv->_map;
	_tmp601_ = soy_textures_texture_get_size (_tmp600_);
	_tmp602_ = _tmp601_;
	_tmp603_ = _tmp602_;
	_tmp604_ = soy_atoms_size_get_height (_tmp603_);
	_tmp605_ = _tmp604_;
	_tmp606_ = self->priv->_faceArray;
	_tmp606__length1 = self->priv->_faceArray_length1;
	glBufferData (GL_ELEMENT_ARRAY_BUFFER, (GLsizei) ((((((gint) _tmp599_) - 1) * (((gint) _tmp605_) - 1)) * 6) * sizeof (GLushort)), _tmp606_, GL_STATIC_DRAW);
	_g_object_unref0 (_tmp603_);
	_g_object_unref0 (_tmp597_);
	self->priv->_updated = FALSE;
	u = (g_free (u), NULL);
	normal2 = (g_free (normal2), NULL);
	normal = (g_free (normal), NULL);
	v2 = (g_free (v2), NULL);
	v1 = (g_free (v1), NULL);
}


static void soy_scenes_landscape_real_render_extra (soyscenesScene* base) {
	soyscenesLandscape * self;
	soyatomsPosition* _tmp0_;
	gfloat _tmp1_;
	gfloat _tmp2_;
	soyatomsPosition* _tmp3_;
	gfloat _tmp4_;
	gfloat _tmp5_;
	soyatomsPosition* _tmp6_;
	gfloat _tmp7_;
	gfloat _tmp8_;
	gboolean _tmp9_;
	GLenum j;
	gint i;
	self = (soyscenesLandscape*) base;
	g_mutex_lock (&self->mutex);
	glMatrixMode (GL_MODELVIEW);
	glPushMatrix ();
	_tmp0_ = self->priv->_pos;
	_tmp1_ = soy_atoms_position_get_x (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = self->priv->_pos;
	_tmp4_ = soy_atoms_position_get_y (_tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = self->priv->_pos;
	_tmp7_ = soy_atoms_position_get_z (_tmp6_);
	_tmp8_ = _tmp7_;
	glTranslatef ((GLfloat) _tmp2_, (GLfloat) _tmp5_, (GLfloat) _tmp8_);
	_tmp9_ = self->priv->_updated;
	if (_tmp9_) {
		_soy_scenes_landscape_update_landscape (self);
	} else {
		GLuint _tmp10_;
		GLuint _tmp11_;
		_tmp10_ = self->priv->_ebo;
		glBindBuffer (GL_ELEMENT_ARRAY_BUFFER, _tmp10_);
		_tmp11_ = self->priv->_vbo;
		glBindBuffer (GL_ARRAY_BUFFER, _tmp11_);
	}
	glVertexPointer ((GLint) 3, GL_FLOAT, (GLsizei) (sizeof (GLfloat) * 11), NULL);
	glNormalPointer (GL_FLOAT, (GLsizei) (sizeof (GLfloat) * 11), (GLvoid*) (sizeof (GLfloat) * 3));
	j = GL_LIGHT0;
	{
		GeeHashSet* _tmp12_;
		GeeIterator* _tmp13_ = NULL;
		GeeIterator* _light_it;
		_tmp12_ = ((soyscenesScene*) self)->lights;
		_tmp13_ = gee_abstract_collection_iterator ((GeeAbstractCollection*) _tmp12_);
		_light_it = _tmp13_;
		while (TRUE) {
			GeeIterator* _tmp14_;
			gboolean _tmp15_ = FALSE;
			GeeIterator* _tmp16_;
			gpointer _tmp17_ = NULL;
			soybodiesLight* light;
			soybodiesLight* _tmp18_;
			GLenum _tmp19_;
			GLenum _tmp20_;
			_tmp14_ = _light_it;
			_tmp15_ = gee_iterator_next (_tmp14_);
			if (!_tmp15_) {
				break;
			}
			_tmp16_ = _light_it;
			_tmp17_ = gee_iterator_get (_tmp16_);
			light = (soybodiesLight*) _tmp17_;
			_tmp18_ = light;
			_tmp19_ = j;
			soy_bodies_light_on (_tmp18_, _tmp19_);
			_tmp20_ = j;
			j = _tmp20_ + 1;
			_g_object_unref0 (light);
		}
		_g_object_unref0 (_light_it);
	}
	i = 0;
	while (TRUE) {
		soymaterialsMaterial* _tmp21_;
		gint _tmp22_;
		gboolean _tmp23_ = FALSE;
		soytexturesTexture* _tmp24_;
		soyatomsSize* _tmp25_;
		soyatomsSize* _tmp26_;
		soyatomsSize* _tmp27_;
		gfloat _tmp28_;
		gfloat _tmp29_;
		soytexturesTexture* _tmp30_;
		soyatomsSize* _tmp31_;
		soyatomsSize* _tmp32_;
		soyatomsSize* _tmp33_;
		gfloat _tmp34_;
		gfloat _tmp35_;
		gint _tmp36_;
		_tmp21_ = self->priv->_material;
		_tmp22_ = i;
		_tmp23_ = soy_materials_material_render (_tmp21_, _tmp22_, NULL, NULL);
		if (!_tmp23_) {
			break;
		}
		_tmp24_ = self->priv->_map;
		_tmp25_ = soy_textures_texture_get_size (_tmp24_);
		_tmp26_ = _tmp25_;
		_tmp27_ = _tmp26_;
		_tmp28_ = soy_atoms_size_get_width (_tmp27_);
		_tmp29_ = _tmp28_;
		_tmp30_ = self->priv->_map;
		_tmp31_ = soy_textures_texture_get_size (_tmp30_);
		_tmp32_ = _tmp31_;
		_tmp33_ = _tmp32_;
		_tmp34_ = soy_atoms_size_get_height (_tmp33_);
		_tmp35_ = _tmp34_;
		glDrawElements (GL_TRIANGLES, (GLsizei) (((((gint) _tmp29_) - 1) * (((gint) _tmp35_) - 1)) * 6), GL_UNSIGNED_SHORT, (GLvoid*) 0);
		_g_object_unref0 (_tmp33_);
		_g_object_unref0 (_tmp27_);
		_tmp36_ = i;
		i = _tmp36_ + 1;
	}
	glMatrixMode (GL_MODELVIEW);
	glPopMatrix ();
	g_mutex_unlock (&self->mutex);
}


soymaterialsMaterial* soy_scenes_landscape_get_material (soyscenesLandscape* self) {
	soymaterialsMaterial* result;
	soymaterialsMaterial* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_material;
	result = _tmp0_;
	return result;
}


void soy_scenes_landscape_set_material (soyscenesLandscape* self, soymaterialsMaterial* value) {
	soymaterialsMaterial* _tmp0_;
	soymaterialsMaterial* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_material);
	self->priv->_material = _tmp1_;
	g_object_notify ((GObject *) self, "material");
}


soyatomsPosition* soy_scenes_landscape_get_position (soyscenesLandscape* self) {
	soyatomsPosition* result;
	soyatomsPosition* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_pos;
	result = _tmp0_;
	return result;
}


void soy_scenes_landscape_set_position (soyscenesLandscape* self, soyatomsPosition* value) {
	soyatomsPosition* _tmp0_;
	soyatomsPosition* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_pos);
	self->priv->_pos = _tmp1_;
	g_object_notify ((GObject *) self, "position");
}


soyatomsSize* soy_scenes_landscape_get_size (soyscenesLandscape* self) {
	soyatomsSize* result;
	soyatomsSize* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_size;
	result = _tmp0_;
	return result;
}


void soy_scenes_landscape_set_size (soyscenesLandscape* self, soyatomsSize* value) {
	soyatomsSize* _tmp0_;
	soyatomsSize* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_size);
	self->priv->_size = _tmp1_;
	g_object_notify ((GObject *) self, "size");
}


soytexturesTexture* soy_scenes_landscape_get_heightmap (soyscenesLandscape* self) {
	soytexturesTexture* result;
	soytexturesTexture* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_map;
	result = _tmp0_;
	return result;
}


void soy_scenes_landscape_set_heightmap (soyscenesLandscape* self, soytexturesTexture* value) {
	soytexturesTexture* _tmp0_;
	soytexturesTexture* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_map);
	self->priv->_map = _tmp1_;
	self->priv->_updated = TRUE;
	g_object_notify ((GObject *) self, "heightmap");
}


static void soy_scenes_landscape_class_init (soyscenesLandscapeClass * klass) {
	soy_scenes_landscape_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (soyscenesLandscapePrivate));
	SOY_SCENES_SCENE_CLASS (klass)->render_extra = soy_scenes_landscape_real_render_extra;
	G_OBJECT_CLASS (klass)->get_property = _vala_soy_scenes_landscape_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_soy_scenes_landscape_set_property;
	G_OBJECT_CLASS (klass)->finalize = soy_scenes_landscape_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_SCENES_LANDSCAPE_MATERIAL, g_param_spec_object ("material", "material", "material", SOY_MATERIALS_TYPE_MATERIAL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_SCENES_LANDSCAPE_POSITION, g_param_spec_object ("position", "position", "position", SOY_ATOMS_TYPE_POSITION, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_SCENES_LANDSCAPE_SIZE, g_param_spec_object ("size", "size", "size", SOY_ATOMS_TYPE_SIZE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_SCENES_LANDSCAPE_HEIGHTMAP, g_param_spec_object ("heightmap", "heightmap", "heightmap", SOY_TEXTURES_TYPE_TEXTURE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
}


static void soy_scenes_landscape_instance_init (soyscenesLandscape * self) {
	self->priv = SOY_SCENES_LANDSCAPE_GET_PRIVATE (self);
}


static void soy_scenes_landscape_finalize (GObject* obj) {
	soyscenesLandscape * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_SCENES_TYPE_LANDSCAPE, soyscenesLandscape);
	_vala_clear_GMutex (&self->mutex);
	self->priv->_vertArray = (g_free (self->priv->_vertArray), NULL);
	self->priv->_faceArray = (g_free (self->priv->_faceArray), NULL);
	_dGeomHeightfieldDataDestroy0 (self->priv->_heightfieldData);
	_dGeomDestroy0 (self->priv->_geomID);
	_g_object_unref0 (self->priv->_material);
	_g_object_unref0 (self->priv->_pos);
	_g_object_unref0 (self->priv->_size);
	_g_object_unref0 (self->priv->_map);
	G_OBJECT_CLASS (soy_scenes_landscape_parent_class)->finalize (obj);
}


GType soy_scenes_landscape_get_type (void) {
	static volatile gsize soy_scenes_landscape_type_id__volatile = 0;
	if (g_once_init_enter (&soy_scenes_landscape_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soyscenesLandscapeClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_scenes_landscape_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soyscenesLandscape), 0, (GInstanceInitFunc) soy_scenes_landscape_instance_init, NULL };
		GType soy_scenes_landscape_type_id;
		soy_scenes_landscape_type_id = g_type_register_static (SOY_SCENES_TYPE_SCENE, "soyscenesLandscape", &g_define_type_info, 0);
		g_once_init_leave (&soy_scenes_landscape_type_id__volatile, soy_scenes_landscape_type_id);
	}
	return soy_scenes_landscape_type_id__volatile;
}


static void _vala_soy_scenes_landscape_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	soyscenesLandscape * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_SCENES_TYPE_LANDSCAPE, soyscenesLandscape);
	switch (property_id) {
		case SOY_SCENES_LANDSCAPE_MATERIAL:
		g_value_set_object (value, soy_scenes_landscape_get_material (self));
		break;
		case SOY_SCENES_LANDSCAPE_POSITION:
		g_value_set_object (value, soy_scenes_landscape_get_position (self));
		break;
		case SOY_SCENES_LANDSCAPE_SIZE:
		g_value_set_object (value, soy_scenes_landscape_get_size (self));
		break;
		case SOY_SCENES_LANDSCAPE_HEIGHTMAP:
		g_value_set_object (value, soy_scenes_landscape_get_heightmap (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_soy_scenes_landscape_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	soyscenesLandscape * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_SCENES_TYPE_LANDSCAPE, soyscenesLandscape);
	switch (property_id) {
		case SOY_SCENES_LANDSCAPE_MATERIAL:
		soy_scenes_landscape_set_material (self, g_value_get_object (value));
		break;
		case SOY_SCENES_LANDSCAPE_POSITION:
		soy_scenes_landscape_set_position (self, g_value_get_object (value));
		break;
		case SOY_SCENES_LANDSCAPE_SIZE:
		soy_scenes_landscape_set_size (self, g_value_get_object (value));
		break;
		case SOY_SCENES_LANDSCAPE_HEIGHTMAP:
		soy_scenes_landscape_set_heightmap (self, g_value_get_object (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_clear_GMutex (GMutex * mutex) {
	GMutex zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GMutex))) {
		g_mutex_clear (mutex);
		memset (mutex, 0, sizeof (GMutex));
	}
}


static void _vala_clear_GRecMutex (GRecMutex * mutex) {
	GRecMutex zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GRecMutex))) {
		g_rec_mutex_clear (mutex);
		memset (mutex, 0, sizeof (GRecMutex));
	}
}


static void _vala_clear_GRWLock (GRWLock * mutex) {
	GRWLock zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GRWLock))) {
		g_rw_lock_clear (mutex);
		memset (mutex, 0, sizeof (GRWLock));
	}
}


static void _vala_clear_GCond (GCond * mutex) {
	GCond zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GCond))) {
		g_cond_clear (mutex);
		memset (mutex, 0, sizeof (GCond));
	}
}




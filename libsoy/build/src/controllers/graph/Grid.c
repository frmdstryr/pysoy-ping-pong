/* Grid.c generated by valac 0.20.1, the Vala compiler
 * generated from Grid.gs, do not modify */

/*
 *  libsoy - soy.controllers.graph.Grid
 *  Copyright (C) 2006,2007,2008,2009,2010,2011,2012,2013 Copyleft Games Group
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published
 *  by the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program; if not, see http://www.gnu.org/licenses
 *
 */

#include <glib.h>
#include <glib-object.h>
#include <gee.h>
#include <float.h>
#include <math.h>


#define SOY_CONTROLLERS_GRAPH_TYPE_ABSTRACT_GRAPH (soy_controllers_graph_abstract_graph_get_type ())
#define SOY_CONTROLLERS_GRAPH_ABSTRACT_GRAPH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_GRAPH_TYPE_ABSTRACT_GRAPH, soycontrollersgraphAbstractGraph))
#define SOY_CONTROLLERS_GRAPH_ABSTRACT_GRAPH_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_GRAPH_TYPE_ABSTRACT_GRAPH, soycontrollersgraphAbstractGraphClass))
#define SOY_CONTROLLERS_GRAPH_IS_ABSTRACT_GRAPH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_GRAPH_TYPE_ABSTRACT_GRAPH))
#define SOY_CONTROLLERS_GRAPH_IS_ABSTRACT_GRAPH_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_GRAPH_TYPE_ABSTRACT_GRAPH))
#define SOY_CONTROLLERS_GRAPH_ABSTRACT_GRAPH_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_GRAPH_TYPE_ABSTRACT_GRAPH, soycontrollersgraphAbstractGraphClass))

typedef struct _soycontrollersgraphAbstractGraph soycontrollersgraphAbstractGraph;
typedef struct _soycontrollersgraphAbstractGraphClass soycontrollersgraphAbstractGraphClass;
typedef struct _soycontrollersgraphAbstractGraphPrivate soycontrollersgraphAbstractGraphPrivate;

#define SOY_ATOMS_TYPE_POSITION (soy_atoms_position_get_type ())
#define SOY_ATOMS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPosition))
#define SOY_ATOMS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))
#define SOY_ATOMS_IS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_IS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_POSITION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))

typedef struct _soyatomsPosition soyatomsPosition;
typedef struct _soyatomsPositionClass soyatomsPositionClass;

#define SOY_CONTROLLERS_GRAPH_TYPE_IGRAPH (soy_controllers_graph_igraph_get_type ())
#define SOY_CONTROLLERS_GRAPH_IGRAPH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_GRAPH_TYPE_IGRAPH, soycontrollersgraphIGraph))
#define SOY_CONTROLLERS_GRAPH_IS_IGRAPH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_GRAPH_TYPE_IGRAPH))
#define SOY_CONTROLLERS_GRAPH_IGRAPH_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SOY_CONTROLLERS_GRAPH_TYPE_IGRAPH, soycontrollersgraphIGraphIface))

typedef struct _soycontrollersgraphIGraph soycontrollersgraphIGraph;
typedef struct _soycontrollersgraphIGraphIface soycontrollersgraphIGraphIface;

#define SOY_CONTROLLERS_GRAPH_TYPE_INODE (soy_controllers_graph_inode_get_type ())
#define SOY_CONTROLLERS_GRAPH_INODE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_GRAPH_TYPE_INODE, soycontrollersgraphINode))
#define SOY_CONTROLLERS_GRAPH_IS_INODE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_GRAPH_TYPE_INODE))
#define SOY_CONTROLLERS_GRAPH_INODE_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SOY_CONTROLLERS_GRAPH_TYPE_INODE, soycontrollersgraphINodeIface))

typedef struct _soycontrollersgraphINode soycontrollersgraphINode;
typedef struct _soycontrollersgraphINodeIface soycontrollersgraphINodeIface;

#define SOY_CONTROLLERS_GRAPH_TYPE_EDGE (soy_controllers_graph_edge_get_type ())
#define SOY_CONTROLLERS_GRAPH_EDGE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_GRAPH_TYPE_EDGE, soycontrollersgraphEdge))
#define SOY_CONTROLLERS_GRAPH_EDGE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_GRAPH_TYPE_EDGE, soycontrollersgraphEdgeClass))
#define SOY_CONTROLLERS_GRAPH_IS_EDGE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_GRAPH_TYPE_EDGE))
#define SOY_CONTROLLERS_GRAPH_IS_EDGE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_GRAPH_TYPE_EDGE))
#define SOY_CONTROLLERS_GRAPH_EDGE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_GRAPH_TYPE_EDGE, soycontrollersgraphEdgeClass))

typedef struct _soycontrollersgraphEdge soycontrollersgraphEdge;
typedef struct _soycontrollersgraphEdgeClass soycontrollersgraphEdgeClass;

#define SOY_CONTROLLERS_GRAPH_TYPE_GRID (soy_controllers_graph_grid_get_type ())
#define SOY_CONTROLLERS_GRAPH_GRID(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_GRAPH_TYPE_GRID, soycontrollersgraphGrid))
#define SOY_CONTROLLERS_GRAPH_GRID_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_GRAPH_TYPE_GRID, soycontrollersgraphGridClass))
#define SOY_CONTROLLERS_GRAPH_IS_GRID(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_GRAPH_TYPE_GRID))
#define SOY_CONTROLLERS_GRAPH_IS_GRID_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_GRAPH_TYPE_GRID))
#define SOY_CONTROLLERS_GRAPH_GRID_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_GRAPH_TYPE_GRID, soycontrollersgraphGridClass))

typedef struct _soycontrollersgraphGrid soycontrollersgraphGrid;
typedef struct _soycontrollersgraphGridClass soycontrollersgraphGridClass;
typedef struct _soycontrollersgraphGridPrivate soycontrollersgraphGridPrivate;

#define SOY_CONTROLLERS_GRAPH__GRID_TYPE_OFFSET_PAIR (soy_controllers_graph__grid_offset_pair_get_type ())
#define SOY_CONTROLLERS_GRAPH__GRID_OFFSET_PAIR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_GRAPH__GRID_TYPE_OFFSET_PAIR, soycontrollersgraph_gridOffsetPair))
#define SOY_CONTROLLERS_GRAPH__GRID_OFFSET_PAIR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_GRAPH__GRID_TYPE_OFFSET_PAIR, soycontrollersgraph_gridOffsetPairClass))
#define SOY_CONTROLLERS_GRAPH__GRID_IS_OFFSET_PAIR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_GRAPH__GRID_TYPE_OFFSET_PAIR))
#define SOY_CONTROLLERS_GRAPH__GRID_IS_OFFSET_PAIR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_GRAPH__GRID_TYPE_OFFSET_PAIR))
#define SOY_CONTROLLERS_GRAPH__GRID_OFFSET_PAIR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_GRAPH__GRID_TYPE_OFFSET_PAIR, soycontrollersgraph_gridOffsetPairClass))

typedef struct _soycontrollersgraph_gridOffsetPair soycontrollersgraph_gridOffsetPair;
typedef struct _soycontrollersgraph_gridOffsetPairClass soycontrollersgraph_gridOffsetPairClass;

#define SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE (soy_controllers_graph__grid_int_node_get_type ())
#define SOY_CONTROLLERS_GRAPH__GRID_INT_NODE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE, soycontrollersgraph_gridIntNode))
#define SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE, soycontrollersgraph_gridIntNodeClass))
#define SOY_CONTROLLERS_GRAPH__GRID_IS_INT_NODE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE))
#define SOY_CONTROLLERS_GRAPH__GRID_IS_INT_NODE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE))
#define SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE, soycontrollersgraph_gridIntNodeClass))

typedef struct _soycontrollersgraph_gridIntNode soycontrollersgraph_gridIntNode;
typedef struct _soycontrollersgraph_gridIntNodeClass soycontrollersgraph_gridIntNodeClass;

#define SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE (soy_controllers_graph__grid_terminal_node_get_type ())
#define SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE, soycontrollersgraph_gridTerminalNode))
#define SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE, soycontrollersgraph_gridTerminalNodeClass))
#define SOY_CONTROLLERS_GRAPH__GRID_IS_TERMINAL_NODE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE))
#define SOY_CONTROLLERS_GRAPH__GRID_IS_TERMINAL_NODE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE))
#define SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE, soycontrollersgraph_gridTerminalNodeClass))

typedef struct _soycontrollersgraph_gridTerminalNode soycontrollersgraph_gridTerminalNode;
typedef struct _soycontrollersgraph_gridTerminalNodeClass soycontrollersgraph_gridTerminalNodeClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define SOY_SCENES_TYPE_SCENE (soy_scenes_scene_get_type ())
#define SOY_SCENES_SCENE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE_SCENE, soyscenesScene))
#define SOY_SCENES_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))
#define SOY_SCENES_IS_SCENE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_IS_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_SCENE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))

typedef struct _soyscenesScene soyscenesScene;
typedef struct _soyscenesSceneClass soyscenesSceneClass;

#define SOY_ATOMS_TYPE_SIZE (soy_atoms_size_get_type ())
#define SOY_ATOMS_SIZE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_SIZE, soyatomsSize))
#define SOY_ATOMS_SIZE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_SIZE, soyatomsSizeClass))
#define SOY_ATOMS_IS_SIZE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_SIZE))
#define SOY_ATOMS_IS_SIZE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_SIZE))
#define SOY_ATOMS_SIZE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_SIZE, soyatomsSizeClass))

typedef struct _soyatomsSize soyatomsSize;
typedef struct _soyatomsSizeClass soyatomsSizeClass;
typedef struct _soycontrollersgraph_gridOffsetPairPrivate soycontrollersgraph_gridOffsetPairPrivate;
typedef struct _soycontrollersgraph_gridIntNodePrivate soycontrollersgraph_gridIntNodePrivate;
#define _soy_controllers_graph_edge_unref0(var) ((var == NULL) ? NULL : (var = (soy_controllers_graph_edge_unref (var), NULL)))
typedef struct _soycontrollersgraph_gridTerminalNodePrivate soycontrollersgraph_gridTerminalNodePrivate;
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _soycontrollersgraphAbstractGraph {
	GObject parent_instance;
	soycontrollersgraphAbstractGraphPrivate * priv;
};

struct _soycontrollersgraphAbstractGraphClass {
	GObjectClass parent_class;
	gboolean* (*check_collisions) (soycontrollersgraphAbstractGraph* self, soyatomsPosition* start, soyatomsPosition** ends, int ends_length1, int* result_length1);
};

struct _soycontrollersgraphINodeIface {
	GTypeInterface parent_iface;
	GeeList* (*get_edges) (soycontrollersgraphINode* self);
	soyatomsPosition* (*get_position) (soycontrollersgraphINode* self);
};

struct _soycontrollersgraphIGraphIface {
	GTypeInterface parent_iface;
	soycontrollersgraphINode* (*get_node) (soycontrollersgraphIGraph* self, soyatomsPosition* pos);
	soycontrollersgraphINode* (*add_terminal_node) (soycontrollersgraphIGraph* self, soyatomsPosition* pos);
	gboolean* (*check_collisions) (soycontrollersgraphIGraph* self, soyatomsPosition* start, soyatomsPosition** ends, int ends_length1, int* result_length1);
};

struct _soycontrollersgraphGrid {
	soycontrollersgraphAbstractGraph parent_instance;
	soycontrollersgraphGridPrivate * priv;
};

struct _soycontrollersgraphGridClass {
	soycontrollersgraphAbstractGraphClass parent_class;
	soycontrollersgraphINode* (*add_terminal_node) (soycontrollersgraphGrid* self, soyatomsPosition* pos);
};

struct _soycontrollersgraphGridPrivate {
	gfloat _granularity;
	soyatomsPosition* _center;
	GeeHashMap* _memoizer;
	GeeHashMultiMap* _terminals;
};

struct _soycontrollersgraph_gridOffsetPair {
	GObject parent_instance;
	soycontrollersgraph_gridOffsetPairPrivate * priv;
	gint x;
	gint y;
};

struct _soycontrollersgraph_gridOffsetPairClass {
	GObjectClass parent_class;
};

struct _soycontrollersgraph_gridIntNode {
	GObject parent_instance;
	soycontrollersgraph_gridIntNodePrivate * priv;
};

struct _soycontrollersgraph_gridIntNodeClass {
	GObjectClass parent_class;
	void (*add_connection) (soycontrollersgraph_gridIntNode* self, soycontrollersgraphINode* other);
	GeeList* (*get_edges) (soycontrollersgraph_gridIntNode* self);
	guint (*hash) (soycontrollersgraph_gridIntNode* self);
};

struct _soycontrollersgraph_gridIntNodePrivate {
	gint _x;
	gint _y;
	soyatomsPosition* _position;
	soycontrollersgraphGrid* _graph;
	GeeHashSet* _connections;
};

struct _soycontrollersgraph_gridTerminalNode {
	GObject parent_instance;
	soycontrollersgraph_gridTerminalNodePrivate * priv;
};

struct _soycontrollersgraph_gridTerminalNodeClass {
	GObjectClass parent_class;
	GeeList* (*get_edges) (soycontrollersgraph_gridTerminalNode* self);
	void (*add_connection) (soycontrollersgraph_gridTerminalNode* self, soycontrollersgraphINode* other);
};

struct _soycontrollersgraph_gridTerminalNodePrivate {
	soycontrollersgraphGrid* _graph;
	soyatomsPosition* _position;
	soycontrollersgraph_gridOffsetPair** _grid_nodes;
	gint _grid_nodes_length1;
	gint __grid_nodes_size_;
	GeeHashSet* _connections;
};


static gpointer soy_controllers_graph_grid_parent_class = NULL;
static soycontrollersgraphIGraphIface* soy_controllers_graph_grid_soy_controllers_graph_igraph_parent_iface = NULL;
static gpointer soy_controllers_graph__grid_offset_pair_parent_class = NULL;
static gpointer soy_controllers_graph__grid_int_node_parent_class = NULL;
static soycontrollersgraphINodeIface* soy_controllers_graph__grid_int_node_soy_controllers_graph_inode_parent_iface = NULL;
static gpointer soy_controllers_graph__grid_terminal_node_parent_class = NULL;
static soycontrollersgraphINodeIface* soy_controllers_graph__grid_terminal_node_soy_controllers_graph_inode_parent_iface = NULL;

GType soy_controllers_graph_abstract_graph_get_type (void) G_GNUC_CONST;
GType soy_atoms_position_get_type (void) G_GNUC_CONST;
gpointer soy_controllers_graph_edge_ref (gpointer instance);
void soy_controllers_graph_edge_unref (gpointer instance);
GParamSpec* soy_controllers_graph_param_spec_edge (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void soy_controllers_graph_value_set_edge (GValue* value, gpointer v_object);
void soy_controllers_graph_value_take_edge (GValue* value, gpointer v_object);
gpointer soy_controllers_graph_value_get_edge (const GValue* value);
GType soy_controllers_graph_edge_get_type (void) G_GNUC_CONST;
GType soy_controllers_graph_inode_get_type (void) G_GNUC_CONST;
GType soy_controllers_graph_igraph_get_type (void) G_GNUC_CONST;
GType soy_controllers_graph_grid_get_type (void) G_GNUC_CONST;
GType soy_controllers_graph__grid_offset_pair_get_type (void) G_GNUC_CONST;
GType soy_controllers_graph__grid_int_node_get_type (void) G_GNUC_CONST;
GType soy_controllers_graph__grid_terminal_node_get_type (void) G_GNUC_CONST;
#define SOY_CONTROLLERS_GRAPH_GRID_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SOY_CONTROLLERS_GRAPH_TYPE_GRID, soycontrollersgraphGridPrivate))
enum  {
	SOY_CONTROLLERS_GRAPH_GRID_DUMMY_PROPERTY,
	SOY_CONTROLLERS_GRAPH_GRID_CENTER,
	SOY_CONTROLLERS_GRAPH_GRID_GRANULARITY
};
GType soy_scenes_scene_get_type (void) G_GNUC_CONST;
soycontrollersgraphGrid* soy_controllers_graph_grid_new (soyscenesScene* scene, gfloat granularity, soyatomsPosition* center);
soycontrollersgraphGrid* soy_controllers_graph_grid_construct (GType object_type, soyscenesScene* scene, gfloat granularity, soyatomsPosition* center);
GType soy_atoms_size_get_type (void) G_GNUC_CONST;
soycontrollersgraphGrid* soy_controllers_graph_grid_new__default (soyscenesScene* scene, gfloat granularity, gfloat radius, soyatomsSize* size, soyatomsPosition* center);
soycontrollersgraphGrid* soy_controllers_graph_grid_construct__default (GType object_type, soyscenesScene* scene, gfloat granularity, gfloat radius, soyatomsSize* size, soyatomsPosition* center);
soycontrollersgraphAbstractGraph* soy_controllers_graph_abstract_graph_new (soyscenesScene* scene, gfloat radius, soyatomsSize* size);
soycontrollersgraphAbstractGraph* soy_controllers_graph_abstract_graph_construct (GType object_type, soyscenesScene* scene, gfloat radius, soyatomsSize* size);
soyatomsPosition* soy_atoms_position_new (gfloat x, gfloat y, gfloat z);
soyatomsPosition* soy_atoms_position_construct (GType object_type, gfloat x, gfloat y, gfloat z);
soycontrollersgraphGrid* soy_controllers_graph_grid_new_with_radius (soyscenesScene* scene, gfloat granularity, gfloat radius, soyatomsPosition* center);
soycontrollersgraphGrid* soy_controllers_graph_grid_construct_with_radius (GType object_type, soyscenesScene* scene, gfloat granularity, gfloat radius, soyatomsPosition* center);
soycontrollersgraphGrid* soy_controllers_graph_grid_new_with_size (soyscenesScene* scene, gfloat granularity, soyatomsSize* size, soyatomsPosition* center);
soycontrollersgraphGrid* soy_controllers_graph_grid_construct_with_size (GType object_type, soyscenesScene* scene, gfloat granularity, soyatomsSize* size, soyatomsPosition* center);
gfloat soy_atoms_size_get_depth (soyatomsSize* self);
soycontrollersgraphINode* soy_controllers_graph_grid_add_terminal_node (soycontrollersgraphGrid* self, soyatomsPosition* pos);
static soycontrollersgraphINode* soy_controllers_graph_grid_real_add_terminal_node (soycontrollersgraphGrid* self, soyatomsPosition* pos);
gfloat soy_atoms_position_get_x (soyatomsPosition* self);
soyatomsPosition* soy_controllers_graph_grid_get_center (soycontrollersgraphGrid* self);
gfloat soy_controllers_graph_grid_get_granularity (soycontrollersgraphGrid* self);
gfloat soy_atoms_position_get_y (soyatomsPosition* self);
soycontrollersgraph_gridIntNode* soy_controllers_graph_grid_get_node_with_offset (soycontrollersgraphGrid* self, gint x_offset, gint y_offset);
soycontrollersgraph_gridOffsetPair* soy_controllers_graph__grid_offset_pair_new (gint x, gint y);
soycontrollersgraph_gridOffsetPair* soy_controllers_graph__grid_offset_pair_construct (GType object_type, gint x, gint y);
soycontrollersgraph_gridTerminalNode* soy_controllers_graph__grid_terminal_node_new (soycontrollersgraphGrid* graph, soyatomsPosition* pos, soycontrollersgraph_gridOffsetPair** connected, int connected_length1);
soycontrollersgraph_gridTerminalNode* soy_controllers_graph__grid_terminal_node_construct (GType object_type, soycontrollersgraphGrid* graph, soyatomsPosition* pos, soycontrollersgraph_gridOffsetPair** connected, int connected_length1);
void soy_controllers_graph__grid_terminal_node_add_connection (soycontrollersgraph_gridTerminalNode* self, soycontrollersgraphINode* other);
static soycontrollersgraphINode* soy_controllers_graph_grid_real_get_node (soycontrollersgraphIGraph* base, soyatomsPosition* pos);
static soycontrollersgraph_gridIntNode* _soy_controllers_graph_grid_do_get_node_with_offset (soycontrollersgraphGrid* self, soycontrollersgraph_gridOffsetPair* key);
soycontrollersgraph_gridOffsetPair* soy_controllers_graph_grid_convert_to_offset (soycontrollersgraphGrid* self, soyatomsPosition* pos);
soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_new_with_OffsetPair (soycontrollersgraphGrid* graph, soycontrollersgraph_gridOffsetPair* offset);
soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_construct_with_OffsetPair (GType object_type, soycontrollersgraphGrid* graph, soycontrollersgraph_gridOffsetPair* offset);
void soy_controllers_graph__grid_int_node_add_connection (soycontrollersgraph_gridIntNode* self, soycontrollersgraphINode* other);
static guint _soy_controllers_graph_grid_memo_key_hash (soycontrollersgraph_gridOffsetPair* key);
gint soy_controllers_graph__grid_offset_pair_offset_hash (gint x, gint y);
static gboolean _soy_controllers_graph_grid_memo_key_eq (soycontrollersgraph_gridOffsetPair* k1, soycontrollersgraph_gridOffsetPair* k2);
static gboolean _soy_controllers_graph_grid_memo_value_eq (void* val1, void* val2);
gint soy_controllers_graph__grid_int_node_get_x (soycontrollersgraph_gridIntNode* self);
gint soy_controllers_graph__grid_int_node_get_y (soycontrollersgraph_gridIntNode* self);
static GObject * soy_controllers_graph_grid_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
static guint __soy_controllers_graph_grid_memo_key_hash_ghash_func (gconstpointer key);
static gboolean __soy_controllers_graph_grid_memo_key_eq_gequal_func (gconstpointer a, gconstpointer b);
static gboolean __soy_controllers_graph_grid_memo_value_eq_gequal_func (gconstpointer a, gconstpointer b);
gboolean* soy_controllers_graph_abstract_graph_check_collisions (soycontrollersgraphAbstractGraph* self, soyatomsPosition* start, soyatomsPosition** ends, int ends_length1, int* result_length1);
static void soy_controllers_graph_grid_finalize (GObject* obj);
static void _vala_soy_controllers_graph_grid_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
enum  {
	SOY_CONTROLLERS_GRAPH__GRID_OFFSET_PAIR_DUMMY_PROPERTY
};
guint soy_controllers_graph__grid_offset_pair_hash (soycontrollersgraph_gridOffsetPair* self);
static void soy_controllers_graph__grid_offset_pair_finalize (GObject* obj);
#define SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE, soycontrollersgraph_gridIntNodePrivate))
enum  {
	SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_DUMMY_PROPERTY,
	SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_X,
	SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_Y,
	SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_POSITION
};
soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_new (soycontrollersgraphGrid* graph, soyatomsPosition* pos);
soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_construct (GType object_type, soycontrollersgraphGrid* graph, soyatomsPosition* pos);
soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_new_with_int_offset (soycontrollersgraphGrid* graph, gint x_offset, gint y_offset);
soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_construct_with_int_offset (GType object_type, soycontrollersgraphGrid* graph, gint x_offset, gint y_offset);
gfloat soy_atoms_position_get_z (soyatomsPosition* self);
static void soy_controllers_graph__grid_int_node_real_add_connection (soycontrollersgraph_gridIntNode* self, soycontrollersgraphINode* other);
GeeList* soy_controllers_graph__grid_int_node_get_edges (soycontrollersgraph_gridIntNode* self);
static GeeList* soy_controllers_graph__grid_int_node_real_get_edges (soycontrollersgraph_gridIntNode* self);
soyatomsPosition* soy_controllers_graph_inode_get_position (soycontrollersgraphINode* self);
soycontrollersgraphEdge* soy_controllers_graph_edge_new (gfloat dist, soycontrollersgraphINode* begin, soycontrollersgraphINode* end);
soycontrollersgraphEdge* soy_controllers_graph_edge_construct (GType object_type, gfloat dist, soycontrollersgraphINode* begin, soycontrollersgraphINode* end);
gboolean* soy_controllers_graph_igraph_check_collisions (soycontrollersgraphIGraph* self, soyatomsPosition* start, soyatomsPosition** ends, int ends_length1, int* result_length1);
guint soy_controllers_graph__grid_int_node_hash (soycontrollersgraph_gridIntNode* self);
static inline guint soy_controllers_graph__grid_int_node_real_hash (soycontrollersgraph_gridIntNode* self);
static void soy_controllers_graph__grid_int_node_finalize (GObject* obj);
static void _vala_soy_controllers_graph__grid_int_node_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
#define SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE, soycontrollersgraph_gridTerminalNodePrivate))
enum  {
	SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_DUMMY_PROPERTY,
	SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_POSITION
};
static soycontrollersgraph_gridOffsetPair** _vala_array_dup5 (soycontrollersgraph_gridOffsetPair** self, int length);
GeeList* soy_controllers_graph__grid_terminal_node_get_edges (soycontrollersgraph_gridTerminalNode* self);
static GeeList* soy_controllers_graph__grid_terminal_node_real_get_edges (soycontrollersgraph_gridTerminalNode* self);
static void soy_controllers_graph__grid_terminal_node_real_add_connection (soycontrollersgraph_gridTerminalNode* self, soycontrollersgraphINode* other);
static void soy_controllers_graph__grid_terminal_node_finalize (GObject* obj);
static void _vala_soy_controllers_graph__grid_terminal_node_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);


soycontrollersgraphGrid* soy_controllers_graph_grid_construct (GType object_type, soyscenesScene* scene, gfloat granularity, soyatomsPosition* center) {
	soycontrollersgraphGrid * self = NULL;
	soyscenesScene* _tmp0_;
	gfloat _tmp1_;
	soyatomsPosition* _tmp2_;
	g_return_val_if_fail (scene != NULL, NULL);
	_tmp0_ = scene;
	_tmp1_ = granularity;
	_tmp2_ = center;
	self = (soycontrollersgraphGrid*) soy_controllers_graph_grid_construct__default (object_type, _tmp0_, _tmp1_, -1.0f, NULL, _tmp2_);
	return self;
}


soycontrollersgraphGrid* soy_controllers_graph_grid_new (soyscenesScene* scene, gfloat granularity, soyatomsPosition* center) {
	return soy_controllers_graph_grid_construct (SOY_CONTROLLERS_GRAPH_TYPE_GRID, scene, granularity, center);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


soycontrollersgraphGrid* soy_controllers_graph_grid_construct__default (GType object_type, soyscenesScene* scene, gfloat granularity, gfloat radius, soyatomsSize* size, soyatomsPosition* center) {
	soycontrollersgraphGrid * self = NULL;
	gfloat _tmp0_;
	soyscenesScene* _tmp1_;
	gfloat _tmp2_;
	soyatomsSize* _tmp3_;
	gfloat _tmp4_;
	soyatomsPosition* _tmp5_ = NULL;
	soyatomsPosition* _tmp6_;
	soyatomsPosition* _tmp10_;
	soyatomsPosition* _tmp11_;
	g_return_val_if_fail (scene != NULL, NULL);
	_tmp0_ = granularity;
	_vala_assert (_tmp0_ > ((gfloat) 0), "granularity > 0");
	_tmp1_ = scene;
	_tmp2_ = radius;
	_tmp3_ = size;
	self = (soycontrollersgraphGrid*) soy_controllers_graph_abstract_graph_construct (object_type, _tmp1_, _tmp2_, _tmp3_);
	_tmp4_ = granularity;
	self->priv->_granularity = _tmp4_;
	_tmp6_ = center;
	if (_tmp6_ == NULL) {
		soyatomsPosition* _tmp7_;
		_tmp7_ = soy_atoms_position_new (0.0f, 0.0f, 1.0f);
		_g_object_unref0 (_tmp5_);
		_tmp5_ = _tmp7_;
	} else {
		soyatomsPosition* _tmp8_;
		soyatomsPosition* _tmp9_;
		_tmp8_ = center;
		_tmp9_ = _g_object_ref0 (_tmp8_);
		_g_object_unref0 (_tmp5_);
		_tmp5_ = _tmp9_;
	}
	_tmp10_ = _tmp5_;
	_tmp11_ = _g_object_ref0 (_tmp10_);
	_g_object_unref0 (self->priv->_center);
	self->priv->_center = _tmp11_;
	_g_object_unref0 (_tmp5_);
	return self;
}


soycontrollersgraphGrid* soy_controllers_graph_grid_new__default (soyscenesScene* scene, gfloat granularity, gfloat radius, soyatomsSize* size, soyatomsPosition* center) {
	return soy_controllers_graph_grid_construct__default (SOY_CONTROLLERS_GRAPH_TYPE_GRID, scene, granularity, radius, size, center);
}


soycontrollersgraphGrid* soy_controllers_graph_grid_construct_with_radius (GType object_type, soyscenesScene* scene, gfloat granularity, gfloat radius, soyatomsPosition* center) {
	soycontrollersgraphGrid * self = NULL;
	soyatomsPosition* _tmp0_ = NULL;
	soyatomsPosition* _tmp1_;
	soyscenesScene* _tmp9_;
	gfloat _tmp10_;
	gfloat _tmp11_;
	soyatomsPosition* _tmp12_;
	g_return_val_if_fail (scene != NULL, NULL);
	_tmp1_ = center;
	if (_tmp1_ == NULL) {
		gfloat _tmp2_ = 0.0F;
		gfloat _tmp3_;
		gfloat _tmp5_;
		soyatomsPosition* _tmp6_;
		_tmp3_ = radius;
		if (_tmp3_ > ((gfloat) 0)) {
			gfloat _tmp4_;
			_tmp4_ = radius;
			_tmp2_ = _tmp4_;
		} else {
			_tmp2_ = 1.0f;
		}
		_tmp5_ = _tmp2_;
		_tmp6_ = soy_atoms_position_new (0.0f, 0.0f, _tmp5_);
		_g_object_unref0 (_tmp0_);
		_tmp0_ = _tmp6_;
	} else {
		soyatomsPosition* _tmp7_;
		soyatomsPosition* _tmp8_;
		_tmp7_ = center;
		_tmp8_ = _g_object_ref0 (_tmp7_);
		_g_object_unref0 (_tmp0_);
		_tmp0_ = _tmp8_;
	}
	_tmp9_ = scene;
	_tmp10_ = granularity;
	_tmp11_ = radius;
	_tmp12_ = _tmp0_;
	self = (soycontrollersgraphGrid*) soy_controllers_graph_grid_construct__default (object_type, _tmp9_, _tmp10_, _tmp11_, NULL, _tmp12_);
	_g_object_unref0 (_tmp0_);
	return self;
}


soycontrollersgraphGrid* soy_controllers_graph_grid_new_with_radius (soyscenesScene* scene, gfloat granularity, gfloat radius, soyatomsPosition* center) {
	return soy_controllers_graph_grid_construct_with_radius (SOY_CONTROLLERS_GRAPH_TYPE_GRID, scene, granularity, radius, center);
}


soycontrollersgraphGrid* soy_controllers_graph_grid_construct_with_size (GType object_type, soyscenesScene* scene, gfloat granularity, soyatomsSize* size, soyatomsPosition* center) {
	soycontrollersgraphGrid * self = NULL;
	soyatomsPosition* _tmp0_ = NULL;
	soyatomsPosition* _tmp1_;
	soyscenesScene* _tmp8_;
	gfloat _tmp9_;
	soyatomsSize* _tmp10_;
	soyatomsPosition* _tmp11_;
	g_return_val_if_fail (scene != NULL, NULL);
	g_return_val_if_fail (size != NULL, NULL);
	_tmp1_ = center;
	if (_tmp1_ == NULL) {
		soyatomsSize* _tmp2_;
		gfloat _tmp3_;
		gfloat _tmp4_;
		soyatomsPosition* _tmp5_;
		_tmp2_ = size;
		_tmp3_ = soy_atoms_size_get_depth (_tmp2_);
		_tmp4_ = _tmp3_;
		_tmp5_ = soy_atoms_position_new (0.0f, 0.0f, _tmp4_ / 2.0f);
		_g_object_unref0 (_tmp0_);
		_tmp0_ = _tmp5_;
	} else {
		soyatomsPosition* _tmp6_;
		soyatomsPosition* _tmp7_;
		_tmp6_ = center;
		_tmp7_ = _g_object_ref0 (_tmp6_);
		_g_object_unref0 (_tmp0_);
		_tmp0_ = _tmp7_;
	}
	_tmp8_ = scene;
	_tmp9_ = granularity;
	_tmp10_ = size;
	_tmp11_ = _tmp0_;
	self = (soycontrollersgraphGrid*) soy_controllers_graph_grid_construct__default (object_type, _tmp8_, _tmp9_, -1.0f, _tmp10_, _tmp11_);
	_g_object_unref0 (_tmp0_);
	return self;
}


soycontrollersgraphGrid* soy_controllers_graph_grid_new_with_size (soyscenesScene* scene, gfloat granularity, soyatomsSize* size, soyatomsPosition* center) {
	return soy_controllers_graph_grid_construct_with_size (SOY_CONTROLLERS_GRAPH_TYPE_GRID, scene, granularity, size, center);
}


static soycontrollersgraphINode* soy_controllers_graph_grid_real_add_terminal_node (soycontrollersgraphGrid* self, soyatomsPosition* pos) {
	soycontrollersgraphINode* result = NULL;
	soyatomsPosition* _tmp0_;
	gfloat _tmp1_;
	gfloat _tmp2_;
	soyatomsPosition* _tmp3_;
	soyatomsPosition* _tmp4_;
	gfloat _tmp5_;
	gfloat _tmp6_;
	gfloat _tmp7_;
	gfloat _tmp8_;
	gfloat tmp_x;
	soyatomsPosition* _tmp9_;
	gfloat _tmp10_;
	gfloat _tmp11_;
	soyatomsPosition* _tmp12_;
	soyatomsPosition* _tmp13_;
	gfloat _tmp14_;
	gfloat _tmp15_;
	gfloat _tmp16_;
	gfloat _tmp17_;
	gfloat tmp_y;
	gfloat _tmp18_;
	gfloat _tmp19_ = 0.0F;
	gint x_floor;
	gfloat _tmp20_;
	gfloat _tmp21_ = 0.0F;
	gint y_floor;
	gboolean _tmp22_ = FALSE;
	gint _tmp23_;
	gfloat _tmp24_;
	gboolean _tmp27_;
	gint _tmp31_;
	gint _tmp32_;
	soycontrollersgraph_gridOffsetPair* _tmp33_;
	gint _tmp34_;
	gint _tmp35_;
	soycontrollersgraph_gridOffsetPair* _tmp36_;
	gint _tmp37_;
	gint _tmp38_;
	soycontrollersgraph_gridOffsetPair* _tmp39_;
	gint _tmp40_;
	gint _tmp41_;
	soycontrollersgraph_gridOffsetPair* _tmp42_;
	soycontrollersgraph_gridOffsetPair** _tmp43_ = NULL;
	soycontrollersgraph_gridOffsetPair** connected;
	gint connected_length1;
	gint _connected_size_;
	soyatomsPosition* _tmp44_;
	soycontrollersgraph_gridOffsetPair** _tmp45_;
	gint _tmp45__length1;
	soycontrollersgraph_gridTerminalNode* _tmp46_;
	soycontrollersgraph_gridTerminalNode* node;
	gboolean maybe_other_terms;
	gboolean other_terminals_populated;
	GeeHashSet* _tmp47_;
	GeeCollection* other_terminals;
	soycontrollersgraph_gridOffsetPair** _tmp48_;
	gint _tmp48__length1;
	gboolean _tmp71_ = FALSE;
	gboolean _tmp72_;
	gboolean _tmp76_;
	g_return_val_if_fail (pos != NULL, NULL);
	_tmp0_ = pos;
	_tmp1_ = soy_atoms_position_get_x (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = soy_controllers_graph_grid_get_center (self);
	_tmp4_ = _tmp3_;
	_tmp5_ = soy_atoms_position_get_x (_tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = soy_controllers_graph_grid_get_granularity (self);
	_tmp8_ = _tmp7_;
	tmp_x = (_tmp2_ - _tmp6_) / _tmp8_;
	_tmp9_ = pos;
	_tmp10_ = soy_atoms_position_get_y (_tmp9_);
	_tmp11_ = _tmp10_;
	_tmp12_ = soy_controllers_graph_grid_get_center (self);
	_tmp13_ = _tmp12_;
	_tmp14_ = soy_atoms_position_get_y (_tmp13_);
	_tmp15_ = _tmp14_;
	_tmp16_ = soy_controllers_graph_grid_get_granularity (self);
	_tmp17_ = _tmp16_;
	tmp_y = (_tmp11_ - _tmp15_) / _tmp17_;
	_tmp18_ = tmp_x;
	_tmp19_ = floorf (_tmp18_);
	x_floor = (gint) _tmp19_;
	_tmp20_ = tmp_y;
	_tmp21_ = floorf (_tmp20_);
	y_floor = (gint) _tmp21_;
	_tmp23_ = x_floor;
	_tmp24_ = tmp_x;
	if (((gfloat) _tmp23_) == _tmp24_) {
		gint _tmp25_;
		gfloat _tmp26_;
		_tmp25_ = y_floor;
		_tmp26_ = tmp_y;
		_tmp22_ = ((gfloat) _tmp25_) == _tmp26_;
	} else {
		_tmp22_ = FALSE;
	}
	_tmp27_ = _tmp22_;
	if (_tmp27_) {
		gint _tmp28_;
		gint _tmp29_;
		soycontrollersgraph_gridIntNode* _tmp30_ = NULL;
		_tmp28_ = x_floor;
		_tmp29_ = y_floor;
		_tmp30_ = soy_controllers_graph_grid_get_node_with_offset (self, _tmp28_, _tmp29_);
		result = (soycontrollersgraphINode*) _tmp30_;
		return result;
	}
	_tmp31_ = x_floor;
	_tmp32_ = y_floor;
	_tmp33_ = soy_controllers_graph__grid_offset_pair_new (_tmp31_, _tmp32_);
	_tmp34_ = x_floor;
	_tmp35_ = y_floor;
	_tmp36_ = soy_controllers_graph__grid_offset_pair_new (_tmp34_ + 1, _tmp35_);
	_tmp37_ = x_floor;
	_tmp38_ = y_floor;
	_tmp39_ = soy_controllers_graph__grid_offset_pair_new (_tmp37_, _tmp38_ + 1);
	_tmp40_ = x_floor;
	_tmp41_ = y_floor;
	_tmp42_ = soy_controllers_graph__grid_offset_pair_new (_tmp40_ + 1, _tmp41_ + 1);
	_tmp43_ = g_new0 (soycontrollersgraph_gridOffsetPair*, 4 + 1);
	_tmp43_[0] = _tmp33_;
	_tmp43_[1] = _tmp36_;
	_tmp43_[2] = _tmp39_;
	_tmp43_[3] = _tmp42_;
	connected = _tmp43_;
	connected_length1 = 4;
	_connected_size_ = connected_length1;
	_tmp44_ = pos;
	_tmp45_ = connected;
	_tmp45__length1 = connected_length1;
	_tmp46_ = soy_controllers_graph__grid_terminal_node_new (self, _tmp44_, _tmp45_, _tmp45__length1);
	node = _tmp46_;
	maybe_other_terms = TRUE;
	other_terminals_populated = FALSE;
	_tmp47_ = gee_hash_set_new (SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL, NULL);
	other_terminals = (GeeCollection*) _tmp47_;
	_tmp48_ = connected;
	_tmp48__length1 = connected_length1;
	{
		soycontrollersgraph_gridOffsetPair** offset_collection = NULL;
		gint offset_collection_length1 = 0;
		gint _offset_collection_size_ = 0;
		gint offset_it = 0;
		offset_collection = _tmp48_;
		offset_collection_length1 = _tmp48__length1;
		for (offset_it = 0; offset_it < _tmp48__length1; offset_it = offset_it + 1) {
			soycontrollersgraph_gridOffsetPair* _tmp49_;
			soycontrollersgraph_gridOffsetPair* offset = NULL;
			_tmp49_ = _g_object_ref0 (offset_collection[offset_it]);
			offset = _tmp49_;
			{
				gboolean _tmp50_;
				GeeHashMultiMap* _tmp68_;
				soycontrollersgraph_gridOffsetPair* _tmp69_;
				soycontrollersgraph_gridTerminalNode* _tmp70_;
				_tmp50_ = maybe_other_terms;
				if (_tmp50_) {
					GeeHashMultiMap* _tmp51_;
					soycontrollersgraph_gridOffsetPair* _tmp52_;
					gboolean _tmp53_ = FALSE;
					_tmp51_ = self->priv->_terminals;
					_tmp52_ = offset;
					_tmp53_ = gee_multi_map_contains ((GeeMultiMap*) _tmp51_, _tmp52_);
					if (!_tmp53_) {
						maybe_other_terms = FALSE;
					} else {
						gboolean _tmp54_;
						_tmp54_ = other_terminals_populated;
						if (!_tmp54_) {
							GeeCollection* _tmp55_;
							GeeHashMultiMap* _tmp56_;
							soycontrollersgraph_gridOffsetPair* _tmp57_;
							GeeCollection* _tmp58_ = NULL;
							GeeCollection* _tmp59_;
							_tmp55_ = other_terminals;
							_tmp56_ = self->priv->_terminals;
							_tmp57_ = offset;
							_tmp58_ = gee_multi_map_get ((GeeMultiMap*) _tmp56_, _tmp57_);
							_tmp59_ = _tmp58_;
							gee_collection_add_all (_tmp55_, _tmp59_);
							_g_object_unref0 (_tmp59_);
							other_terminals_populated = TRUE;
						} else {
							GeeCollection* _tmp60_;
							gboolean _tmp61_;
							gboolean _tmp62_;
							_tmp60_ = other_terminals;
							_tmp61_ = gee_collection_get_is_empty (_tmp60_);
							_tmp62_ = _tmp61_;
							if (_tmp62_) {
								maybe_other_terms = FALSE;
							} else {
								GeeCollection* _tmp63_;
								GeeHashMultiMap* _tmp64_;
								soycontrollersgraph_gridOffsetPair* _tmp65_;
								GeeCollection* _tmp66_ = NULL;
								GeeCollection* _tmp67_;
								_tmp63_ = other_terminals;
								_tmp64_ = self->priv->_terminals;
								_tmp65_ = offset;
								_tmp66_ = gee_multi_map_get ((GeeMultiMap*) _tmp64_, _tmp65_);
								_tmp67_ = _tmp66_;
								gee_collection_retain_all (_tmp63_, _tmp67_);
								_g_object_unref0 (_tmp67_);
							}
						}
					}
				}
				_tmp68_ = self->priv->_terminals;
				_tmp69_ = offset;
				_tmp70_ = node;
				gee_multi_map_set ((GeeMultiMap*) _tmp68_, _tmp69_, _tmp70_);
				_g_object_unref0 (offset);
			}
		}
	}
	_tmp72_ = maybe_other_terms;
	if (_tmp72_) {
		GeeCollection* _tmp73_;
		gboolean _tmp74_;
		gboolean _tmp75_;
		_tmp73_ = other_terminals;
		_tmp74_ = gee_collection_get_is_empty (_tmp73_);
		_tmp75_ = _tmp74_;
		_tmp71_ = !_tmp75_;
	} else {
		_tmp71_ = FALSE;
	}
	_tmp76_ = _tmp71_;
	if (_tmp76_) {
		{
			GeeCollection* _tmp77_;
			GeeIterator* _tmp78_ = NULL;
			GeeIterator* _nd2_it;
			_tmp77_ = other_terminals;
			_tmp78_ = gee_iterable_iterator ((GeeIterable*) _tmp77_);
			_nd2_it = _tmp78_;
			while (TRUE) {
				GeeIterator* _tmp79_;
				gboolean _tmp80_ = FALSE;
				GeeIterator* _tmp81_;
				gpointer _tmp82_ = NULL;
				soycontrollersgraph_gridTerminalNode* nd2;
				soycontrollersgraph_gridTerminalNode* _tmp83_;
				soycontrollersgraph_gridTerminalNode* _tmp84_;
				soycontrollersgraph_gridTerminalNode* _tmp85_;
				soycontrollersgraph_gridTerminalNode* _tmp86_;
				_tmp79_ = _nd2_it;
				_tmp80_ = gee_iterator_next (_tmp79_);
				if (!_tmp80_) {
					break;
				}
				_tmp81_ = _nd2_it;
				_tmp82_ = gee_iterator_get (_tmp81_);
				nd2 = (soycontrollersgraph_gridTerminalNode*) _tmp82_;
				_tmp83_ = nd2;
				_tmp84_ = node;
				soy_controllers_graph__grid_terminal_node_add_connection (_tmp83_, (soycontrollersgraphINode*) _tmp84_);
				_tmp85_ = node;
				_tmp86_ = nd2;
				soy_controllers_graph__grid_terminal_node_add_connection (_tmp85_, (soycontrollersgraphINode*) _tmp86_);
				_g_object_unref0 (nd2);
			}
			_g_object_unref0 (_nd2_it);
		}
	}
	result = (soycontrollersgraphINode*) node;
	_g_object_unref0 (other_terminals);
	connected = (_vala_array_free (connected, connected_length1, (GDestroyNotify) g_object_unref), NULL);
	return result;
}


soycontrollersgraphINode* soy_controllers_graph_grid_add_terminal_node (soycontrollersgraphGrid* self, soyatomsPosition* pos) {
	g_return_val_if_fail (self != NULL, NULL);
	return SOY_CONTROLLERS_GRAPH_GRID_GET_CLASS (self)->add_terminal_node (self, pos);
}


static soycontrollersgraphINode* soy_controllers_graph_grid_real_get_node (soycontrollersgraphIGraph* base, soyatomsPosition* pos) {
	soycontrollersgraphGrid * self;
	soycontrollersgraphINode* result = NULL;
	soyatomsPosition* _tmp0_;
	soycontrollersgraph_gridOffsetPair* _tmp1_ = NULL;
	soycontrollersgraph_gridOffsetPair* _tmp2_;
	soycontrollersgraph_gridIntNode* _tmp3_ = NULL;
	soycontrollersgraphINode* _tmp4_;
	self = (soycontrollersgraphGrid*) base;
	g_return_val_if_fail (pos != NULL, NULL);
	_tmp0_ = pos;
	_tmp1_ = soy_controllers_graph_grid_convert_to_offset (self, _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = _soy_controllers_graph_grid_do_get_node_with_offset (self, _tmp2_);
	_tmp4_ = (soycontrollersgraphINode*) _tmp3_;
	_g_object_unref0 (_tmp2_);
	result = _tmp4_;
	return result;
}


soycontrollersgraph_gridIntNode* soy_controllers_graph_grid_get_node_with_offset (soycontrollersgraphGrid* self, gint x_offset, gint y_offset) {
	soycontrollersgraph_gridIntNode* result = NULL;
	gint _tmp0_;
	gint _tmp1_;
	soycontrollersgraph_gridOffsetPair* _tmp2_;
	soycontrollersgraph_gridOffsetPair* key;
	soycontrollersgraph_gridIntNode* _tmp3_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = x_offset;
	_tmp1_ = y_offset;
	_tmp2_ = soy_controllers_graph__grid_offset_pair_new (_tmp0_, _tmp1_);
	key = _tmp2_;
	_tmp3_ = _soy_controllers_graph_grid_do_get_node_with_offset (self, key);
	result = _tmp3_;
	_g_object_unref0 (key);
	return result;
}


static soycontrollersgraph_gridIntNode* _soy_controllers_graph_grid_do_get_node_with_offset (soycontrollersgraphGrid* self, soycontrollersgraph_gridOffsetPair* key) {
	soycontrollersgraph_gridIntNode* result = NULL;
	soycontrollersgraph_gridIntNode* nd = NULL;
	GeeHashMap* _tmp0_;
	soycontrollersgraph_gridOffsetPair* _tmp1_;
	gboolean _tmp2_ = FALSE;
	GeeHashMultiMap* _tmp11_;
	soycontrollersgraph_gridOffsetPair* _tmp12_;
	GeeCollection* _tmp13_ = NULL;
	GeeCollection* terminals;
	GeeCollection* _tmp14_;
	gint _tmp15_;
	gint _tmp16_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (key != NULL, NULL);
	_tmp0_ = self->priv->_memoizer;
	_tmp1_ = key;
	_tmp2_ = gee_abstract_map_has_key ((GeeAbstractMap*) _tmp0_, _tmp1_);
	if (_tmp2_) {
		GeeHashMap* _tmp3_;
		soycontrollersgraph_gridOffsetPair* _tmp4_;
		gpointer _tmp5_ = NULL;
		_tmp3_ = self->priv->_memoizer;
		_tmp4_ = key;
		_tmp5_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp3_, _tmp4_);
		_g_object_unref0 (nd);
		nd = (soycontrollersgraph_gridIntNode*) _tmp5_;
	} else {
		soycontrollersgraph_gridOffsetPair* _tmp6_;
		soycontrollersgraph_gridIntNode* _tmp7_;
		GeeHashMap* _tmp8_;
		soycontrollersgraph_gridOffsetPair* _tmp9_;
		soycontrollersgraph_gridIntNode* _tmp10_;
		_tmp6_ = key;
		_tmp7_ = soy_controllers_graph__grid_int_node_new_with_OffsetPair (self, _tmp6_);
		_g_object_unref0 (nd);
		nd = _tmp7_;
		_tmp8_ = self->priv->_memoizer;
		_tmp9_ = key;
		_tmp10_ = nd;
		gee_abstract_map_set ((GeeAbstractMap*) _tmp8_, _tmp9_, _tmp10_);
	}
	_tmp11_ = self->priv->_terminals;
	_tmp12_ = key;
	_tmp13_ = gee_multi_map_get ((GeeMultiMap*) _tmp11_, _tmp12_);
	terminals = _tmp13_;
	_tmp14_ = terminals;
	_tmp15_ = gee_collection_get_size (_tmp14_);
	_tmp16_ = _tmp15_;
	if (_tmp16_ == 0) {
		result = nd;
		_g_object_unref0 (terminals);
		return result;
	} else {
		{
			GeeCollection* _tmp17_;
			GeeIterator* _tmp18_ = NULL;
			GeeIterator* _term_it;
			_tmp17_ = terminals;
			_tmp18_ = gee_iterable_iterator ((GeeIterable*) _tmp17_);
			_term_it = _tmp18_;
			while (TRUE) {
				GeeIterator* _tmp19_;
				gboolean _tmp20_ = FALSE;
				GeeIterator* _tmp21_;
				gpointer _tmp22_ = NULL;
				soycontrollersgraph_gridTerminalNode* term;
				soycontrollersgraph_gridIntNode* _tmp23_;
				soycontrollersgraph_gridTerminalNode* _tmp24_;
				_tmp19_ = _term_it;
				_tmp20_ = gee_iterator_next (_tmp19_);
				if (!_tmp20_) {
					break;
				}
				_tmp21_ = _term_it;
				_tmp22_ = gee_iterator_get (_tmp21_);
				term = (soycontrollersgraph_gridTerminalNode*) _tmp22_;
				_tmp23_ = nd;
				_tmp24_ = term;
				soy_controllers_graph__grid_int_node_add_connection (_tmp23_, (soycontrollersgraphINode*) _tmp24_);
				_g_object_unref0 (term);
			}
			_g_object_unref0 (_term_it);
		}
		result = nd;
		_g_object_unref0 (terminals);
		return result;
	}
	_g_object_unref0 (terminals);
	_g_object_unref0 (nd);
}


soycontrollersgraph_gridOffsetPair* soy_controllers_graph_grid_convert_to_offset (soycontrollersgraphGrid* self, soyatomsPosition* pos) {
	soycontrollersgraph_gridOffsetPair* result = NULL;
	soyatomsPosition* _tmp0_;
	gfloat _tmp1_;
	gfloat _tmp2_;
	soyatomsPosition* _tmp3_;
	soyatomsPosition* _tmp4_;
	gfloat _tmp5_;
	gfloat _tmp6_;
	gfloat _tmp7_;
	gfloat _tmp8_;
	gfloat tmp_x;
	soyatomsPosition* _tmp9_;
	gfloat _tmp10_;
	gfloat _tmp11_;
	soyatomsPosition* _tmp12_;
	soyatomsPosition* _tmp13_;
	gfloat _tmp14_;
	gfloat _tmp15_;
	gfloat _tmp16_;
	gfloat _tmp17_;
	gfloat tmp_y;
	gfloat _tmp18_ = 0.0F;
	gfloat _tmp19_ = 0.0F;
	soycontrollersgraph_gridOffsetPair* _tmp20_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (pos != NULL, NULL);
	_tmp0_ = pos;
	_tmp1_ = soy_atoms_position_get_x (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = soy_controllers_graph_grid_get_center (self);
	_tmp4_ = _tmp3_;
	_tmp5_ = soy_atoms_position_get_x (_tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = soy_controllers_graph_grid_get_granularity (self);
	_tmp8_ = _tmp7_;
	tmp_x = (_tmp2_ - _tmp6_) / _tmp8_;
	_tmp9_ = pos;
	_tmp10_ = soy_atoms_position_get_y (_tmp9_);
	_tmp11_ = _tmp10_;
	_tmp12_ = soy_controllers_graph_grid_get_center (self);
	_tmp13_ = _tmp12_;
	_tmp14_ = soy_atoms_position_get_y (_tmp13_);
	_tmp15_ = _tmp14_;
	_tmp16_ = soy_controllers_graph_grid_get_granularity (self);
	_tmp17_ = _tmp16_;
	tmp_y = (_tmp11_ - _tmp15_) / _tmp17_;
	_tmp18_ = roundf (tmp_x);
	_tmp19_ = roundf (tmp_y);
	_tmp20_ = soy_controllers_graph__grid_offset_pair_new ((gint) _tmp18_, (gint) _tmp19_);
	result = _tmp20_;
	return result;
}


static guint _soy_controllers_graph_grid_memo_key_hash (soycontrollersgraph_gridOffsetPair* key) {
	guint result = 0U;
	soycontrollersgraph_gridOffsetPair* _tmp0_;
	soycontrollersgraph_gridOffsetPair* k;
	gint _tmp1_;
	gint _tmp2_;
	gint _tmp3_ = 0;
	_tmp0_ = key;
	k = (soycontrollersgraph_gridOffsetPair*) _tmp0_;
	_tmp1_ = k->x;
	_tmp2_ = k->y;
	_tmp3_ = soy_controllers_graph__grid_offset_pair_offset_hash (_tmp1_, _tmp2_);
	result = (guint) _tmp3_;
	return result;
}


static gboolean _soy_controllers_graph_grid_memo_key_eq (soycontrollersgraph_gridOffsetPair* k1, soycontrollersgraph_gridOffsetPair* k2) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	soycontrollersgraph_gridOffsetPair* _tmp1_;
	gint _tmp2_;
	soycontrollersgraph_gridOffsetPair* _tmp3_;
	gint _tmp4_;
	gboolean _tmp9_;
	_tmp1_ = k1;
	_tmp2_ = _tmp1_->x;
	_tmp3_ = k2;
	_tmp4_ = _tmp3_->x;
	if (_tmp2_ == _tmp4_) {
		soycontrollersgraph_gridOffsetPair* _tmp5_;
		gint _tmp6_;
		soycontrollersgraph_gridOffsetPair* _tmp7_;
		gint _tmp8_;
		_tmp5_ = k1;
		_tmp6_ = _tmp5_->y;
		_tmp7_ = k2;
		_tmp8_ = _tmp7_->y;
		_tmp0_ = _tmp6_ == _tmp8_;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp9_ = _tmp0_;
	result = _tmp9_;
	return result;
}


static gboolean _soy_controllers_graph_grid_memo_value_eq (void* val1, void* val2) {
	gboolean result = FALSE;
	void* _tmp0_;
	soycontrollersgraph_gridIntNode* v1;
	void* _tmp1_;
	soycontrollersgraph_gridIntNode* v2;
	gboolean _tmp2_ = FALSE;
	soycontrollersgraph_gridIntNode* _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	soycontrollersgraph_gridIntNode* _tmp6_;
	gint _tmp7_;
	gint _tmp8_;
	gboolean _tmp15_;
	_tmp0_ = val1;
	v1 = (soycontrollersgraph_gridIntNode*) _tmp0_;
	_tmp1_ = val2;
	v2 = (soycontrollersgraph_gridIntNode*) _tmp1_;
	_tmp3_ = v1;
	_tmp4_ = soy_controllers_graph__grid_int_node_get_x (_tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = v2;
	_tmp7_ = soy_controllers_graph__grid_int_node_get_x (_tmp6_);
	_tmp8_ = _tmp7_;
	if (_tmp5_ == _tmp8_) {
		soycontrollersgraph_gridIntNode* _tmp9_;
		gint _tmp10_;
		gint _tmp11_;
		soycontrollersgraph_gridIntNode* _tmp12_;
		gint _tmp13_;
		gint _tmp14_;
		_tmp9_ = v1;
		_tmp10_ = soy_controllers_graph__grid_int_node_get_y (_tmp9_);
		_tmp11_ = _tmp10_;
		_tmp12_ = v2;
		_tmp13_ = soy_controllers_graph__grid_int_node_get_y (_tmp12_);
		_tmp14_ = _tmp13_;
		_tmp2_ = _tmp11_ == _tmp14_;
	} else {
		_tmp2_ = FALSE;
	}
	_tmp15_ = _tmp2_;
	result = _tmp15_;
	return result;
}


soyatomsPosition* soy_controllers_graph_grid_get_center (soycontrollersgraphGrid* self) {
	soyatomsPosition* result;
	soyatomsPosition* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_center;
	result = _tmp0_;
	return result;
}


gfloat soy_controllers_graph_grid_get_granularity (soycontrollersgraphGrid* self) {
	gfloat result;
	gfloat _tmp0_;
	g_return_val_if_fail (self != NULL, 0.0F);
	_tmp0_ = self->priv->_granularity;
	result = _tmp0_;
	return result;
}


static guint __soy_controllers_graph_grid_memo_key_hash_ghash_func (gconstpointer key) {
	guint result;
	result = _soy_controllers_graph_grid_memo_key_hash (key);
	return result;
}


static gboolean __soy_controllers_graph_grid_memo_key_eq_gequal_func (gconstpointer a, gconstpointer b) {
	gboolean result;
	result = _soy_controllers_graph_grid_memo_key_eq (a, b);
	return result;
}


static gboolean __soy_controllers_graph_grid_memo_value_eq_gequal_func (gconstpointer a, gconstpointer b) {
	gboolean result;
	result = _soy_controllers_graph_grid_memo_value_eq (a, b);
	return result;
}


static GObject * soy_controllers_graph_grid_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties) {
	GObject * obj;
	GObjectClass * parent_class;
	soycontrollersgraphGrid * self;
	GeeHashMap* _tmp0_;
	GeeHashMultiMap* _tmp1_;
	parent_class = G_OBJECT_CLASS (soy_controllers_graph_grid_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_CONTROLLERS_GRAPH_TYPE_GRID, soycontrollersgraphGrid);
	_tmp0_ = gee_hash_map_new (SOY_CONTROLLERS_GRAPH__GRID_TYPE_OFFSET_PAIR, (GBoxedCopyFunc) g_object_ref, g_object_unref, SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE, (GBoxedCopyFunc) g_object_ref, g_object_unref, __soy_controllers_graph_grid_memo_key_hash_ghash_func, __soy_controllers_graph_grid_memo_key_eq_gequal_func, __soy_controllers_graph_grid_memo_value_eq_gequal_func);
	_g_object_unref0 (self->priv->_memoizer);
	self->priv->_memoizer = _tmp0_;
	_tmp1_ = gee_hash_multi_map_new (SOY_CONTROLLERS_GRAPH__GRID_TYPE_OFFSET_PAIR, (GBoxedCopyFunc) g_object_ref, g_object_unref, SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE, (GBoxedCopyFunc) g_object_ref, g_object_unref, __soy_controllers_graph_grid_memo_key_hash_ghash_func, __soy_controllers_graph_grid_memo_key_eq_gequal_func, NULL, NULL);
	_g_object_unref0 (self->priv->_terminals);
	self->priv->_terminals = _tmp1_;
	return obj;
}


static void soy_controllers_graph_grid_class_init (soycontrollersgraphGridClass * klass) {
	soy_controllers_graph_grid_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (soycontrollersgraphGridPrivate));
	SOY_CONTROLLERS_GRAPH_GRID_CLASS (klass)->add_terminal_node = soy_controllers_graph_grid_real_add_terminal_node;
	G_OBJECT_CLASS (klass)->get_property = _vala_soy_controllers_graph_grid_get_property;
	G_OBJECT_CLASS (klass)->constructor = soy_controllers_graph_grid_constructor;
	G_OBJECT_CLASS (klass)->finalize = soy_controllers_graph_grid_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_CONTROLLERS_GRAPH_GRID_CENTER, g_param_spec_object ("center", "center", "center", SOY_ATOMS_TYPE_POSITION, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_CONTROLLERS_GRAPH_GRID_GRANULARITY, g_param_spec_float ("granularity", "granularity", "granularity", -G_MAXFLOAT, G_MAXFLOAT, 0.0F, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
}


static void soy_controllers_graph_grid_soy_controllers_graph_igraph_interface_init (soycontrollersgraphIGraphIface * iface) {
	soy_controllers_graph_grid_soy_controllers_graph_igraph_parent_iface = g_type_interface_peek_parent (iface);
	iface->add_terminal_node = (soycontrollersgraphINode* (*)(soycontrollersgraphIGraph*, soyatomsPosition*)) soy_controllers_graph_grid_add_terminal_node;
	iface->get_node = (soycontrollersgraphINode* (*)(soycontrollersgraphIGraph*, soyatomsPosition*)) soy_controllers_graph_grid_real_get_node;
	iface->check_collisions = (gboolean* (*)(soycontrollersgraphIGraph*, soyatomsPosition*, soyatomsPosition**, int, int*)) soy_controllers_graph_abstract_graph_check_collisions;
}


static void soy_controllers_graph_grid_instance_init (soycontrollersgraphGrid * self) {
	self->priv = SOY_CONTROLLERS_GRAPH_GRID_GET_PRIVATE (self);
}


static void soy_controllers_graph_grid_finalize (GObject* obj) {
	soycontrollersgraphGrid * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_CONTROLLERS_GRAPH_TYPE_GRID, soycontrollersgraphGrid);
	_g_object_unref0 (self->priv->_center);
	_g_object_unref0 (self->priv->_memoizer);
	_g_object_unref0 (self->priv->_terminals);
	G_OBJECT_CLASS (soy_controllers_graph_grid_parent_class)->finalize (obj);
}


GType soy_controllers_graph_grid_get_type (void) {
	static volatile gsize soy_controllers_graph_grid_type_id__volatile = 0;
	if (g_once_init_enter (&soy_controllers_graph_grid_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soycontrollersgraphGridClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_controllers_graph_grid_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soycontrollersgraphGrid), 0, (GInstanceInitFunc) soy_controllers_graph_grid_instance_init, NULL };
		static const GInterfaceInfo soy_controllers_graph_igraph_info = { (GInterfaceInitFunc) soy_controllers_graph_grid_soy_controllers_graph_igraph_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType soy_controllers_graph_grid_type_id;
		soy_controllers_graph_grid_type_id = g_type_register_static (SOY_CONTROLLERS_GRAPH_TYPE_ABSTRACT_GRAPH, "soycontrollersgraphGrid", &g_define_type_info, 0);
		g_type_add_interface_static (soy_controllers_graph_grid_type_id, SOY_CONTROLLERS_GRAPH_TYPE_IGRAPH, &soy_controllers_graph_igraph_info);
		g_once_init_leave (&soy_controllers_graph_grid_type_id__volatile, soy_controllers_graph_grid_type_id);
	}
	return soy_controllers_graph_grid_type_id__volatile;
}


static void _vala_soy_controllers_graph_grid_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	soycontrollersgraphGrid * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_CONTROLLERS_GRAPH_TYPE_GRID, soycontrollersgraphGrid);
	switch (property_id) {
		case SOY_CONTROLLERS_GRAPH_GRID_CENTER:
		g_value_set_object (value, soy_controllers_graph_grid_get_center (self));
		break;
		case SOY_CONTROLLERS_GRAPH_GRID_GRANULARITY:
		g_value_set_float (value, soy_controllers_graph_grid_get_granularity (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


soycontrollersgraph_gridOffsetPair* soy_controllers_graph__grid_offset_pair_construct (GType object_type, gint x, gint y) {
	soycontrollersgraph_gridOffsetPair * self = NULL;
	gint _tmp0_;
	gint _tmp1_;
	self = (soycontrollersgraph_gridOffsetPair*) g_object_new (object_type, NULL);
	_tmp0_ = x;
	self->x = _tmp0_;
	_tmp1_ = y;
	self->y = _tmp1_;
	return self;
}


soycontrollersgraph_gridOffsetPair* soy_controllers_graph__grid_offset_pair_new (gint x, gint y) {
	return soy_controllers_graph__grid_offset_pair_construct (SOY_CONTROLLERS_GRAPH__GRID_TYPE_OFFSET_PAIR, x, y);
}


guint soy_controllers_graph__grid_offset_pair_hash (soycontrollersgraph_gridOffsetPair* self) {
	guint result = 0U;
	gint _tmp0_;
	gint _tmp1_;
	gint _tmp2_ = 0;
	g_return_val_if_fail (self != NULL, 0U);
	_tmp0_ = self->x;
	_tmp1_ = self->y;
	_tmp2_ = soy_controllers_graph__grid_offset_pair_offset_hash (_tmp0_, _tmp1_);
	result = (guint) _tmp2_;
	return result;
}


gint soy_controllers_graph__grid_offset_pair_offset_hash (gint x, gint y) {
	gint result = 0;
	gint p1;
	gint _tmp0_;
	gint _tmp1_;
	p1 = 3571;
	_tmp0_ = x;
	_tmp1_ = y;
	result = (p1 * _tmp0_) + _tmp1_;
	return result;
}


static void soy_controllers_graph__grid_offset_pair_class_init (soycontrollersgraph_gridOffsetPairClass * klass) {
	soy_controllers_graph__grid_offset_pair_parent_class = g_type_class_peek_parent (klass);
	G_OBJECT_CLASS (klass)->finalize = soy_controllers_graph__grid_offset_pair_finalize;
}


static void soy_controllers_graph__grid_offset_pair_instance_init (soycontrollersgraph_gridOffsetPair * self) {
}


static void soy_controllers_graph__grid_offset_pair_finalize (GObject* obj) {
	soycontrollersgraph_gridOffsetPair * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_CONTROLLERS_GRAPH__GRID_TYPE_OFFSET_PAIR, soycontrollersgraph_gridOffsetPair);
	G_OBJECT_CLASS (soy_controllers_graph__grid_offset_pair_parent_class)->finalize (obj);
}


GType soy_controllers_graph__grid_offset_pair_get_type (void) {
	static volatile gsize soy_controllers_graph__grid_offset_pair_type_id__volatile = 0;
	if (g_once_init_enter (&soy_controllers_graph__grid_offset_pair_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soycontrollersgraph_gridOffsetPairClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_controllers_graph__grid_offset_pair_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soycontrollersgraph_gridOffsetPair), 0, (GInstanceInitFunc) soy_controllers_graph__grid_offset_pair_instance_init, NULL };
		GType soy_controllers_graph__grid_offset_pair_type_id;
		soy_controllers_graph__grid_offset_pair_type_id = g_type_register_static (G_TYPE_OBJECT, "soycontrollersgraph_gridOffsetPair", &g_define_type_info, 0);
		g_once_init_leave (&soy_controllers_graph__grid_offset_pair_type_id__volatile, soy_controllers_graph__grid_offset_pair_type_id);
	}
	return soy_controllers_graph__grid_offset_pair_type_id__volatile;
}


soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_construct (GType object_type, soycontrollersgraphGrid* graph, soyatomsPosition* pos) {
	soycontrollersgraph_gridIntNode * self = NULL;
	soycontrollersgraphGrid* _tmp0_;
	soycontrollersgraphGrid* _tmp1_;
	soyatomsPosition* _tmp2_;
	soycontrollersgraph_gridOffsetPair* _tmp3_ = NULL;
	soycontrollersgraph_gridOffsetPair* _tmp4_;
	g_return_val_if_fail (graph != NULL, NULL);
	g_return_val_if_fail (pos != NULL, NULL);
	_tmp0_ = graph;
	_tmp1_ = graph;
	_tmp2_ = pos;
	_tmp3_ = soy_controllers_graph_grid_convert_to_offset (_tmp1_, _tmp2_);
	_tmp4_ = _tmp3_;
	self = (soycontrollersgraph_gridIntNode*) soy_controllers_graph__grid_int_node_construct_with_OffsetPair (object_type, _tmp0_, _tmp4_);
	_g_object_unref0 (_tmp4_);
	return self;
}


soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_new (soycontrollersgraphGrid* graph, soyatomsPosition* pos) {
	return soy_controllers_graph__grid_int_node_construct (SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE, graph, pos);
}


soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_construct_with_OffsetPair (GType object_type, soycontrollersgraphGrid* graph, soycontrollersgraph_gridOffsetPair* offset) {
	soycontrollersgraph_gridIntNode * self = NULL;
	soycontrollersgraphGrid* _tmp0_;
	soycontrollersgraph_gridOffsetPair* _tmp1_;
	gint _tmp2_;
	soycontrollersgraph_gridOffsetPair* _tmp3_;
	gint _tmp4_;
	g_return_val_if_fail (graph != NULL, NULL);
	g_return_val_if_fail (offset != NULL, NULL);
	_tmp0_ = graph;
	_tmp1_ = offset;
	_tmp2_ = _tmp1_->x;
	_tmp3_ = offset;
	_tmp4_ = _tmp3_->y;
	self = (soycontrollersgraph_gridIntNode*) soy_controllers_graph__grid_int_node_construct_with_int_offset (object_type, _tmp0_, _tmp2_, _tmp4_);
	return self;
}


soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_new_with_OffsetPair (soycontrollersgraphGrid* graph, soycontrollersgraph_gridOffsetPair* offset) {
	return soy_controllers_graph__grid_int_node_construct_with_OffsetPair (SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE, graph, offset);
}


soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_construct_with_int_offset (GType object_type, soycontrollersgraphGrid* graph, gint x_offset, gint y_offset) {
	soycontrollersgraph_gridIntNode * self = NULL;
	gint _tmp0_;
	gint _tmp1_;
	soycontrollersgraphGrid* _tmp2_;
	GeeHashSet* _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	soycontrollersgraphGrid* _tmp6_;
	gfloat _tmp7_;
	gfloat _tmp8_;
	soycontrollersgraphGrid* _tmp9_;
	soyatomsPosition* _tmp10_;
	soyatomsPosition* _tmp11_;
	gfloat _tmp12_;
	gfloat _tmp13_;
	gint _tmp14_;
	gint _tmp15_;
	soycontrollersgraphGrid* _tmp16_;
	gfloat _tmp17_;
	gfloat _tmp18_;
	soycontrollersgraphGrid* _tmp19_;
	soyatomsPosition* _tmp20_;
	soyatomsPosition* _tmp21_;
	gfloat _tmp22_;
	gfloat _tmp23_;
	soycontrollersgraphGrid* _tmp24_;
	soyatomsPosition* _tmp25_;
	soyatomsPosition* _tmp26_;
	gfloat _tmp27_;
	gfloat _tmp28_;
	soyatomsPosition* _tmp29_;
	g_return_val_if_fail (graph != NULL, NULL);
	self = (soycontrollersgraph_gridIntNode*) g_object_new (object_type, NULL);
	_tmp0_ = x_offset;
	self->priv->_x = _tmp0_;
	_tmp1_ = y_offset;
	self->priv->_y = _tmp1_;
	_tmp2_ = graph;
	self->priv->_graph = _tmp2_;
	_tmp3_ = gee_hash_set_new (SOY_CONTROLLERS_GRAPH_TYPE_INODE, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->_connections);
	self->priv->_connections = _tmp3_;
	_tmp4_ = soy_controllers_graph__grid_int_node_get_x (self);
	_tmp5_ = _tmp4_;
	_tmp6_ = self->priv->_graph;
	_tmp7_ = soy_controllers_graph_grid_get_granularity (_tmp6_);
	_tmp8_ = _tmp7_;
	_tmp9_ = self->priv->_graph;
	_tmp10_ = soy_controllers_graph_grid_get_center (_tmp9_);
	_tmp11_ = _tmp10_;
	_tmp12_ = soy_atoms_position_get_x (_tmp11_);
	_tmp13_ = _tmp12_;
	_tmp14_ = soy_controllers_graph__grid_int_node_get_y (self);
	_tmp15_ = _tmp14_;
	_tmp16_ = self->priv->_graph;
	_tmp17_ = soy_controllers_graph_grid_get_granularity (_tmp16_);
	_tmp18_ = _tmp17_;
	_tmp19_ = self->priv->_graph;
	_tmp20_ = soy_controllers_graph_grid_get_center (_tmp19_);
	_tmp21_ = _tmp20_;
	_tmp22_ = soy_atoms_position_get_y (_tmp21_);
	_tmp23_ = _tmp22_;
	_tmp24_ = self->priv->_graph;
	_tmp25_ = soy_controllers_graph_grid_get_center (_tmp24_);
	_tmp26_ = _tmp25_;
	_tmp27_ = soy_atoms_position_get_z (_tmp26_);
	_tmp28_ = _tmp27_;
	_tmp29_ = soy_atoms_position_new ((((gfloat) _tmp5_) * ((gfloat) _tmp8_)) + _tmp13_, (((gfloat) _tmp15_) * ((gfloat) _tmp18_)) + _tmp23_, _tmp28_);
	_g_object_unref0 (self->priv->_position);
	self->priv->_position = _tmp29_;
	return self;
}


soycontrollersgraph_gridIntNode* soy_controllers_graph__grid_int_node_new_with_int_offset (soycontrollersgraphGrid* graph, gint x_offset, gint y_offset) {
	return soy_controllers_graph__grid_int_node_construct_with_int_offset (SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE, graph, x_offset, y_offset);
}


static void soy_controllers_graph__grid_int_node_real_add_connection (soycontrollersgraph_gridIntNode* self, soycontrollersgraphINode* other) {
	GeeHashSet* _tmp0_;
	soycontrollersgraphINode* _tmp1_;
	gboolean _tmp2_ = FALSE;
	g_return_if_fail (other != NULL);
	_tmp0_ = self->priv->_connections;
	_tmp1_ = other;
	_tmp2_ = gee_abstract_collection_contains ((GeeAbstractCollection*) _tmp0_, _tmp1_);
	if (!_tmp2_) {
		GeeHashSet* _tmp3_;
		soycontrollersgraphINode* _tmp4_;
		_tmp3_ = self->priv->_connections;
		_tmp4_ = other;
		gee_abstract_collection_add ((GeeAbstractCollection*) _tmp3_, _tmp4_);
	}
}


void soy_controllers_graph__grid_int_node_add_connection (soycontrollersgraph_gridIntNode* self, soycontrollersgraphINode* other) {
	g_return_if_fail (self != NULL);
	SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_GET_CLASS (self)->add_connection (self, other);
}


static GeeList* soy_controllers_graph__grid_int_node_real_get_edges (soycontrollersgraph_gridIntNode* self) {
	GeeList* result = NULL;
	soycontrollersgraphGrid* _tmp0_;
	gfloat _tmp1_;
	gfloat _tmp2_;
	soycontrollersgraphGrid* _tmp3_;
	gfloat _tmp4_;
	gfloat _tmp5_;
	gfloat _tmp6_ = 0.0F;
	gfloat diag;
	soycontrollersgraphGrid* _tmp7_;
	gfloat _tmp8_;
	gfloat _tmp9_;
	gfloat flat;
	GeeLinkedList* _tmp10_;
	GeeLinkedList* lst;
	GeeHashSet* _tmp11_;
	gint _tmp12_;
	gint _tmp13_;
	soyatomsPosition** _tmp14_ = NULL;
	soyatomsPosition** poss;
	gint poss_length1;
	gint _poss_size_;
	gint cnt;
	soycontrollersgraphGrid* _tmp95_;
	soyatomsPosition* _tmp96_;
	soyatomsPosition** _tmp97_;
	gint _tmp97__length1;
	gint _tmp98_ = 0;
	gboolean* _tmp99_ = NULL;
	gboolean* blocked;
	gint blocked_length1;
	gint _blocked_size_;
	gint _tmp100_;
	_tmp0_ = self->priv->_graph;
	_tmp1_ = soy_controllers_graph_grid_get_granularity (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = self->priv->_graph;
	_tmp4_ = soy_controllers_graph_grid_get_granularity (_tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = hypotf (_tmp2_, _tmp5_);
	diag = _tmp6_;
	_tmp7_ = self->priv->_graph;
	_tmp8_ = soy_controllers_graph_grid_get_granularity (_tmp7_);
	_tmp9_ = _tmp8_;
	flat = _tmp9_;
	_tmp10_ = gee_linked_list_new (SOY_CONTROLLERS_GRAPH_TYPE_EDGE, (GBoxedCopyFunc) soy_controllers_graph_edge_ref, soy_controllers_graph_edge_unref, NULL);
	lst = _tmp10_;
	_tmp11_ = self->priv->_connections;
	_tmp12_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp11_);
	_tmp13_ = _tmp12_;
	_tmp14_ = g_new0 (soyatomsPosition*, (8 + _tmp13_) + 1);
	poss = _tmp14_;
	poss_length1 = 8 + _tmp13_;
	_poss_size_ = poss_length1;
	cnt = 0;
	{
		gint i;
		i = -1;
		{
			gboolean _tmp15_;
			_tmp15_ = TRUE;
			while (TRUE) {
				gboolean _tmp16_;
				_tmp16_ = _tmp15_;
				if (!_tmp16_) {
					gint _tmp17_;
					_tmp17_ = i;
					i = _tmp17_ + 1;
				}
				_tmp15_ = FALSE;
				if (!(i <= 1)) {
					break;
				}
				{
					gint j;
					j = -1;
					{
						gboolean _tmp18_;
						_tmp18_ = TRUE;
						while (TRUE) {
							gboolean _tmp19_;
							gfloat dist = 0.0F;
							gboolean _tmp21_ = FALSE;
							gint _tmp22_;
							gboolean _tmp24_;
							soycontrollersgraphGrid* _tmp29_;
							gint _tmp30_;
							gint _tmp31_;
							gint _tmp32_;
							gint _tmp33_;
							gint _tmp34_;
							gint _tmp35_;
							soycontrollersgraph_gridIntNode* _tmp36_ = NULL;
							soycontrollersgraph_gridIntNode* node;
							soyatomsPosition** _tmp37_;
							gint _tmp37__length1;
							gint _tmp38_;
							soycontrollersgraph_gridIntNode* _tmp39_;
							soyatomsPosition* _tmp40_;
							soyatomsPosition* _tmp41_;
							soyatomsPosition* _tmp42_;
							soyatomsPosition* _tmp43_;
							gint _tmp44_;
							GeeLinkedList* _tmp45_;
							gfloat _tmp46_;
							soycontrollersgraph_gridIntNode* _tmp47_;
							soycontrollersgraphEdge* _tmp48_;
							soycontrollersgraphEdge* _tmp49_;
							_tmp19_ = _tmp18_;
							if (!_tmp19_) {
								gint _tmp20_;
								_tmp20_ = j;
								j = _tmp20_ + 1;
							}
							_tmp18_ = FALSE;
							if (!(j <= 1)) {
								break;
							}
							_tmp22_ = i;
							if (_tmp22_ == 0) {
								_tmp21_ = TRUE;
							} else {
								gint _tmp23_;
								_tmp23_ = j;
								_tmp21_ = _tmp23_ == 0;
							}
							_tmp24_ = _tmp21_;
							if (_tmp24_) {
								gint _tmp25_;
								gint _tmp26_;
								_tmp25_ = i;
								_tmp26_ = j;
								if (_tmp25_ == _tmp26_) {
									continue;
								} else {
									gfloat _tmp27_;
									_tmp27_ = flat;
									dist = _tmp27_;
								}
							} else {
								gfloat _tmp28_;
								_tmp28_ = diag;
								dist = _tmp28_;
							}
							_tmp29_ = self->priv->_graph;
							_tmp30_ = soy_controllers_graph__grid_int_node_get_x (self);
							_tmp31_ = _tmp30_;
							_tmp32_ = i;
							_tmp33_ = soy_controllers_graph__grid_int_node_get_y (self);
							_tmp34_ = _tmp33_;
							_tmp35_ = j;
							_tmp36_ = soy_controllers_graph_grid_get_node_with_offset (_tmp29_, _tmp31_ + _tmp32_, _tmp34_ + _tmp35_);
							node = _tmp36_;
							_tmp37_ = poss;
							_tmp37__length1 = poss_length1;
							_tmp38_ = cnt;
							_tmp39_ = node;
							_tmp40_ = soy_controllers_graph_inode_get_position ((soycontrollersgraphINode*) _tmp39_);
							_tmp41_ = _tmp40_;
							_tmp42_ = _g_object_ref0 (_tmp41_);
							_g_object_unref0 (_tmp37_[_tmp38_]);
							_tmp37_[_tmp38_] = _tmp42_;
							_tmp43_ = _tmp37_[_tmp38_];
							_tmp44_ = cnt;
							cnt = _tmp44_ + 1;
							_tmp45_ = lst;
							_tmp46_ = dist;
							_tmp47_ = node;
							_tmp48_ = soy_controllers_graph_edge_new (_tmp46_, (soycontrollersgraphINode*) self, (soycontrollersgraphINode*) _tmp47_);
							_tmp49_ = _tmp48_;
							gee_abstract_collection_add ((GeeAbstractCollection*) _tmp45_, _tmp49_);
							_soy_controllers_graph_edge_unref0 (_tmp49_);
							_g_object_unref0 (node);
						}
					}
				}
			}
		}
	}
	{
		GeeHashSet* _tmp50_;
		GeeIterator* _tmp51_ = NULL;
		GeeIterator* _node_it;
		_tmp50_ = self->priv->_connections;
		_tmp51_ = gee_abstract_collection_iterator ((GeeAbstractCollection*) _tmp50_);
		_node_it = _tmp51_;
		while (TRUE) {
			GeeIterator* _tmp52_;
			gboolean _tmp53_ = FALSE;
			GeeIterator* _tmp54_;
			gpointer _tmp55_ = NULL;
			soycontrollersgraphINode* node;
			soyatomsPosition** _tmp56_;
			gint _tmp56__length1;
			gint _tmp57_;
			soycontrollersgraphINode* _tmp58_;
			soyatomsPosition* _tmp59_;
			soyatomsPosition* _tmp60_;
			soyatomsPosition* _tmp61_;
			soyatomsPosition* _tmp62_;
			soyatomsPosition* _tmp63_;
			gfloat _tmp64_;
			gfloat _tmp65_;
			soycontrollersgraphINode* _tmp66_;
			soyatomsPosition* _tmp67_;
			soyatomsPosition* _tmp68_;
			gfloat _tmp69_;
			gfloat _tmp70_;
			soyatomsPosition* _tmp71_;
			gfloat _tmp72_;
			gfloat _tmp73_;
			soycontrollersgraphINode* _tmp74_;
			soyatomsPosition* _tmp75_;
			soyatomsPosition* _tmp76_;
			gfloat _tmp77_;
			gfloat _tmp78_;
			gfloat _tmp79_ = 0.0F;
			soyatomsPosition* _tmp80_;
			gfloat _tmp81_;
			gfloat _tmp82_;
			soycontrollersgraphINode* _tmp83_;
			soyatomsPosition* _tmp84_;
			soyatomsPosition* _tmp85_;
			gfloat _tmp86_;
			gfloat _tmp87_;
			gfloat _tmp88_ = 0.0F;
			gfloat dist;
			GeeLinkedList* _tmp89_;
			gfloat _tmp90_;
			soycontrollersgraphINode* _tmp91_;
			soycontrollersgraphEdge* _tmp92_;
			soycontrollersgraphEdge* _tmp93_;
			gint _tmp94_;
			_tmp52_ = _node_it;
			_tmp53_ = gee_iterator_next (_tmp52_);
			if (!_tmp53_) {
				break;
			}
			_tmp54_ = _node_it;
			_tmp55_ = gee_iterator_get (_tmp54_);
			node = (soycontrollersgraphINode*) _tmp55_;
			_tmp56_ = poss;
			_tmp56__length1 = poss_length1;
			_tmp57_ = cnt;
			_tmp58_ = node;
			_tmp59_ = soy_controllers_graph_inode_get_position (_tmp58_);
			_tmp60_ = _tmp59_;
			_tmp61_ = _g_object_ref0 (_tmp60_);
			_g_object_unref0 (_tmp56_[_tmp57_]);
			_tmp56_[_tmp57_] = _tmp61_;
			_tmp62_ = _tmp56_[_tmp57_];
			_tmp63_ = self->priv->_position;
			_tmp64_ = soy_atoms_position_get_x (_tmp63_);
			_tmp65_ = _tmp64_;
			_tmp66_ = node;
			_tmp67_ = soy_controllers_graph_inode_get_position (_tmp66_);
			_tmp68_ = _tmp67_;
			_tmp69_ = soy_atoms_position_get_x (_tmp68_);
			_tmp70_ = _tmp69_;
			_tmp71_ = self->priv->_position;
			_tmp72_ = soy_atoms_position_get_y (_tmp71_);
			_tmp73_ = _tmp72_;
			_tmp74_ = node;
			_tmp75_ = soy_controllers_graph_inode_get_position (_tmp74_);
			_tmp76_ = _tmp75_;
			_tmp77_ = soy_atoms_position_get_y (_tmp76_);
			_tmp78_ = _tmp77_;
			_tmp79_ = hypotf (_tmp65_ - _tmp70_, _tmp73_ - _tmp78_);
			_tmp80_ = self->priv->_position;
			_tmp81_ = soy_atoms_position_get_z (_tmp80_);
			_tmp82_ = _tmp81_;
			_tmp83_ = node;
			_tmp84_ = soy_controllers_graph_inode_get_position (_tmp83_);
			_tmp85_ = _tmp84_;
			_tmp86_ = soy_atoms_position_get_z (_tmp85_);
			_tmp87_ = _tmp86_;
			_tmp88_ = hypotf (_tmp79_, _tmp82_ - _tmp87_);
			dist = _tmp88_;
			_tmp89_ = lst;
			_tmp90_ = dist;
			_tmp91_ = node;
			_tmp92_ = soy_controllers_graph_edge_new (_tmp90_, (soycontrollersgraphINode*) self, _tmp91_);
			_tmp93_ = _tmp92_;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp89_, _tmp93_);
			_soy_controllers_graph_edge_unref0 (_tmp93_);
			_tmp94_ = cnt;
			cnt = _tmp94_ + 1;
		}
		_g_object_unref0 (_node_it);
	}
	_tmp95_ = self->priv->_graph;
	_tmp96_ = self->priv->_position;
	_tmp97_ = poss;
	_tmp97__length1 = poss_length1;
	_tmp99_ = soy_controllers_graph_igraph_check_collisions ((soycontrollersgraphIGraph*) _tmp95_, _tmp96_, _tmp97_, _tmp97__length1, &_tmp98_);
	blocked = _tmp99_;
	blocked_length1 = _tmp98_;
	_blocked_size_ = blocked_length1;
	_tmp100_ = cnt;
	cnt = _tmp100_ - 1;
	while (TRUE) {
		gint _tmp101_;
		gboolean* _tmp102_;
		gint _tmp102__length1;
		gint _tmp103_;
		gboolean _tmp104_;
		gint _tmp109_;
		_tmp101_ = cnt;
		if (!(_tmp101_ >= 0)) {
			break;
		}
		_tmp102_ = blocked;
		_tmp102__length1 = blocked_length1;
		_tmp103_ = cnt;
		_tmp104_ = _tmp102_[_tmp103_];
		if (_tmp104_) {
			GeeLinkedList* _tmp105_;
			gint _tmp106_;
			gpointer _tmp107_ = NULL;
			soycontrollersgraphEdge* _tmp108_;
			_tmp105_ = lst;
			_tmp106_ = cnt;
			_tmp107_ = gee_abstract_list_remove_at ((GeeAbstractList*) _tmp105_, _tmp106_);
			_tmp108_ = (soycontrollersgraphEdge*) _tmp107_;
			_soy_controllers_graph_edge_unref0 (_tmp108_);
		}
		_tmp109_ = cnt;
		cnt = _tmp109_ - 1;
	}
	result = (GeeList*) lst;
	blocked = (g_free (blocked), NULL);
	poss = (_vala_array_free (poss, poss_length1, (GDestroyNotify) g_object_unref), NULL);
	return result;
}


GeeList* soy_controllers_graph__grid_int_node_get_edges (soycontrollersgraph_gridIntNode* self) {
	g_return_val_if_fail (self != NULL, NULL);
	return SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_GET_CLASS (self)->get_edges (self);
}


static inline guint soy_controllers_graph__grid_int_node_real_hash (soycontrollersgraph_gridIntNode* self) {
	guint result = 0U;
	gint _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	gint _tmp4_ = 0;
	_tmp0_ = soy_controllers_graph__grid_int_node_get_x (self);
	_tmp1_ = _tmp0_;
	_tmp2_ = soy_controllers_graph__grid_int_node_get_y (self);
	_tmp3_ = _tmp2_;
	_tmp4_ = soy_controllers_graph__grid_offset_pair_offset_hash (_tmp1_, _tmp3_);
	result = (guint) _tmp4_;
	return result;
}


guint soy_controllers_graph__grid_int_node_hash (soycontrollersgraph_gridIntNode* self) {
	g_return_val_if_fail (self != NULL, 0U);
	return SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_GET_CLASS (self)->hash (self);
}


gint soy_controllers_graph__grid_int_node_get_x (soycontrollersgraph_gridIntNode* self) {
	gint result;
	gint _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->priv->_x;
	result = _tmp0_;
	return result;
}


gint soy_controllers_graph__grid_int_node_get_y (soycontrollersgraph_gridIntNode* self) {
	gint result;
	gint _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->priv->_y;
	result = _tmp0_;
	return result;
}


static soyatomsPosition* soy_controllers_graph__grid_int_node_real_get_position (soycontrollersgraphINode* base) {
	soyatomsPosition* result;
	soycontrollersgraph_gridIntNode* self;
	soyatomsPosition* _tmp0_;
	self = (soycontrollersgraph_gridIntNode*) base;
	_tmp0_ = self->priv->_position;
	result = _tmp0_;
	return result;
}


static void soy_controllers_graph__grid_int_node_class_init (soycontrollersgraph_gridIntNodeClass * klass) {
	soy_controllers_graph__grid_int_node_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (soycontrollersgraph_gridIntNodePrivate));
	SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_CLASS (klass)->add_connection = soy_controllers_graph__grid_int_node_real_add_connection;
	SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_CLASS (klass)->get_edges = soy_controllers_graph__grid_int_node_real_get_edges;
	SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_CLASS (klass)->hash = soy_controllers_graph__grid_int_node_real_hash;
	G_OBJECT_CLASS (klass)->get_property = _vala_soy_controllers_graph__grid_int_node_get_property;
	G_OBJECT_CLASS (klass)->finalize = soy_controllers_graph__grid_int_node_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_X, g_param_spec_int ("x", "x", "x", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_Y, g_param_spec_int ("y", "y", "y", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_POSITION, g_param_spec_object ("position", "position", "position", SOY_ATOMS_TYPE_POSITION, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
}


static void soy_controllers_graph__grid_int_node_soy_controllers_graph_inode_interface_init (soycontrollersgraphINodeIface * iface) {
	soy_controllers_graph__grid_int_node_soy_controllers_graph_inode_parent_iface = g_type_interface_peek_parent (iface);
	iface->get_edges = (GeeList* (*)(soycontrollersgraphINode*)) soy_controllers_graph__grid_int_node_get_edges;
	iface->get_position = soy_controllers_graph__grid_int_node_real_get_position;
}


static void soy_controllers_graph__grid_int_node_instance_init (soycontrollersgraph_gridIntNode * self) {
	self->priv = SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_GET_PRIVATE (self);
}


static void soy_controllers_graph__grid_int_node_finalize (GObject* obj) {
	soycontrollersgraph_gridIntNode * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE, soycontrollersgraph_gridIntNode);
	_g_object_unref0 (self->priv->_position);
	_g_object_unref0 (self->priv->_connections);
	G_OBJECT_CLASS (soy_controllers_graph__grid_int_node_parent_class)->finalize (obj);
}


GType soy_controllers_graph__grid_int_node_get_type (void) {
	static volatile gsize soy_controllers_graph__grid_int_node_type_id__volatile = 0;
	if (g_once_init_enter (&soy_controllers_graph__grid_int_node_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soycontrollersgraph_gridIntNodeClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_controllers_graph__grid_int_node_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soycontrollersgraph_gridIntNode), 0, (GInstanceInitFunc) soy_controllers_graph__grid_int_node_instance_init, NULL };
		static const GInterfaceInfo soy_controllers_graph_inode_info = { (GInterfaceInitFunc) soy_controllers_graph__grid_int_node_soy_controllers_graph_inode_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType soy_controllers_graph__grid_int_node_type_id;
		soy_controllers_graph__grid_int_node_type_id = g_type_register_static (G_TYPE_OBJECT, "soycontrollersgraph_gridIntNode", &g_define_type_info, 0);
		g_type_add_interface_static (soy_controllers_graph__grid_int_node_type_id, SOY_CONTROLLERS_GRAPH_TYPE_INODE, &soy_controllers_graph_inode_info);
		g_once_init_leave (&soy_controllers_graph__grid_int_node_type_id__volatile, soy_controllers_graph__grid_int_node_type_id);
	}
	return soy_controllers_graph__grid_int_node_type_id__volatile;
}


static void _vala_soy_controllers_graph__grid_int_node_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	soycontrollersgraph_gridIntNode * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_CONTROLLERS_GRAPH__GRID_TYPE_INT_NODE, soycontrollersgraph_gridIntNode);
	switch (property_id) {
		case SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_X:
		g_value_set_int (value, soy_controllers_graph__grid_int_node_get_x (self));
		break;
		case SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_Y:
		g_value_set_int (value, soy_controllers_graph__grid_int_node_get_y (self));
		break;
		case SOY_CONTROLLERS_GRAPH__GRID_INT_NODE_POSITION:
		g_value_set_object (value, soy_controllers_graph_inode_get_position ((soycontrollersgraphINode*) self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static soycontrollersgraph_gridOffsetPair** _vala_array_dup5 (soycontrollersgraph_gridOffsetPair** self, int length) {
	soycontrollersgraph_gridOffsetPair** result;
	int i;
	result = g_new0 (soycontrollersgraph_gridOffsetPair*, length + 1);
	for (i = 0; i < length; i++) {
		soycontrollersgraph_gridOffsetPair* _tmp0_;
		_tmp0_ = _g_object_ref0 (self[i]);
		result[i] = _tmp0_;
	}
	return result;
}


soycontrollersgraph_gridTerminalNode* soy_controllers_graph__grid_terminal_node_construct (GType object_type, soycontrollersgraphGrid* graph, soyatomsPosition* pos, soycontrollersgraph_gridOffsetPair** connected, int connected_length1) {
	soycontrollersgraph_gridTerminalNode * self = NULL;
	soycontrollersgraphGrid* _tmp0_;
	soyatomsPosition* _tmp1_;
	soyatomsPosition* _tmp2_;
	soycontrollersgraph_gridOffsetPair** _tmp3_;
	gint _tmp3__length1;
	soycontrollersgraph_gridOffsetPair** _tmp4_;
	gint _tmp4__length1;
	GeeHashSet* _tmp5_;
	g_return_val_if_fail (graph != NULL, NULL);
	g_return_val_if_fail (pos != NULL, NULL);
	self = (soycontrollersgraph_gridTerminalNode*) g_object_new (object_type, NULL);
	_tmp0_ = graph;
	self->priv->_graph = _tmp0_;
	_tmp1_ = pos;
	_tmp2_ = _g_object_ref0 (_tmp1_);
	_g_object_unref0 (self->priv->_position);
	self->priv->_position = _tmp2_;
	_tmp3_ = connected;
	_tmp3__length1 = connected_length1;
	_tmp4_ = (_tmp3_ != NULL) ? _vala_array_dup5 (_tmp3_, _tmp3__length1) : ((gpointer) _tmp3_);
	_tmp4__length1 = _tmp3__length1;
	self->priv->_grid_nodes = (_vala_array_free (self->priv->_grid_nodes, self->priv->_grid_nodes_length1, (GDestroyNotify) g_object_unref), NULL);
	self->priv->_grid_nodes = _tmp4_;
	self->priv->_grid_nodes_length1 = _tmp4__length1;
	self->priv->__grid_nodes_size_ = self->priv->_grid_nodes_length1;
	_tmp5_ = gee_hash_set_new (SOY_CONTROLLERS_GRAPH_TYPE_INODE, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->_connections);
	self->priv->_connections = _tmp5_;
	return self;
}


soycontrollersgraph_gridTerminalNode* soy_controllers_graph__grid_terminal_node_new (soycontrollersgraphGrid* graph, soyatomsPosition* pos, soycontrollersgraph_gridOffsetPair** connected, int connected_length1) {
	return soy_controllers_graph__grid_terminal_node_construct (SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE, graph, pos, connected, connected_length1);
}


static GeeList* soy_controllers_graph__grid_terminal_node_real_get_edges (soycontrollersgraph_gridTerminalNode* self) {
	GeeList* result = NULL;
	GeeLinkedList* _tmp0_;
	GeeLinkedList* lst;
	soycontrollersgraph_gridOffsetPair** _tmp1_;
	gint _tmp1__length1;
	GeeHashSet* _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	soyatomsPosition** _tmp5_ = NULL;
	soyatomsPosition** poss;
	gint poss_length1;
	gint _poss_size_;
	gint cnt;
	soycontrollersgraph_gridOffsetPair** _tmp6_;
	gint _tmp6__length1;
	soycontrollersgraphGrid* _tmp80_;
	soyatomsPosition* _tmp81_;
	soyatomsPosition** _tmp82_;
	gint _tmp82__length1;
	gint _tmp83_ = 0;
	gboolean* _tmp84_ = NULL;
	gboolean* blocked;
	gint blocked_length1;
	gint _blocked_size_;
	gint _tmp85_;
	_tmp0_ = gee_linked_list_new (SOY_CONTROLLERS_GRAPH_TYPE_EDGE, (GBoxedCopyFunc) soy_controllers_graph_edge_ref, soy_controllers_graph_edge_unref, NULL);
	lst = _tmp0_;
	_tmp1_ = self->priv->_grid_nodes;
	_tmp1__length1 = self->priv->_grid_nodes_length1;
	_tmp2_ = self->priv->_connections;
	_tmp3_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = g_new0 (soyatomsPosition*, (_tmp1__length1 + _tmp4_) + 1);
	poss = _tmp5_;
	poss_length1 = _tmp1__length1 + _tmp4_;
	_poss_size_ = poss_length1;
	cnt = 0;
	_tmp6_ = self->priv->_grid_nodes;
	_tmp6__length1 = self->priv->_grid_nodes_length1;
	{
		soycontrollersgraph_gridOffsetPair** offset_collection = NULL;
		gint offset_collection_length1 = 0;
		gint _offset_collection_size_ = 0;
		gint offset_it = 0;
		offset_collection = _tmp6_;
		offset_collection_length1 = _tmp6__length1;
		for (offset_it = 0; offset_it < _tmp6__length1; offset_it = offset_it + 1) {
			soycontrollersgraph_gridOffsetPair* _tmp7_;
			soycontrollersgraph_gridOffsetPair* offset = NULL;
			_tmp7_ = _g_object_ref0 (offset_collection[offset_it]);
			offset = _tmp7_;
			{
				soycontrollersgraphGrid* _tmp8_;
				soycontrollersgraph_gridOffsetPair* _tmp9_;
				gint _tmp10_;
				soycontrollersgraph_gridOffsetPair* _tmp11_;
				gint _tmp12_;
				soycontrollersgraph_gridIntNode* _tmp13_ = NULL;
				soycontrollersgraph_gridIntNode* node;
				soyatomsPosition** _tmp14_;
				gint _tmp14__length1;
				gint _tmp15_;
				soycontrollersgraph_gridIntNode* _tmp16_;
				soyatomsPosition* _tmp17_;
				soyatomsPosition* _tmp18_;
				soyatomsPosition* _tmp19_;
				soyatomsPosition* _tmp20_;
				soyatomsPosition* _tmp21_;
				gfloat _tmp22_;
				gfloat _tmp23_;
				soycontrollersgraph_gridIntNode* _tmp24_;
				soyatomsPosition* _tmp25_;
				soyatomsPosition* _tmp26_;
				gfloat _tmp27_;
				gfloat _tmp28_;
				soyatomsPosition* _tmp29_;
				gfloat _tmp30_;
				gfloat _tmp31_;
				soycontrollersgraph_gridIntNode* _tmp32_;
				soyatomsPosition* _tmp33_;
				soyatomsPosition* _tmp34_;
				gfloat _tmp35_;
				gfloat _tmp36_;
				gfloat _tmp37_ = 0.0F;
				gfloat dist;
				GeeLinkedList* _tmp38_;
				gfloat _tmp39_;
				soycontrollersgraph_gridIntNode* _tmp40_;
				soycontrollersgraphEdge* _tmp41_;
				soycontrollersgraphEdge* _tmp42_;
				gint _tmp43_;
				_tmp8_ = self->priv->_graph;
				_tmp9_ = offset;
				_tmp10_ = _tmp9_->x;
				_tmp11_ = offset;
				_tmp12_ = _tmp11_->y;
				_tmp13_ = soy_controllers_graph_grid_get_node_with_offset (_tmp8_, _tmp10_, _tmp12_);
				node = _tmp13_;
				_tmp14_ = poss;
				_tmp14__length1 = poss_length1;
				_tmp15_ = cnt;
				_tmp16_ = node;
				_tmp17_ = soy_controllers_graph_inode_get_position ((soycontrollersgraphINode*) _tmp16_);
				_tmp18_ = _tmp17_;
				_tmp19_ = _g_object_ref0 (_tmp18_);
				_g_object_unref0 (_tmp14_[_tmp15_]);
				_tmp14_[_tmp15_] = _tmp19_;
				_tmp20_ = _tmp14_[_tmp15_];
				_tmp21_ = self->priv->_position;
				_tmp22_ = soy_atoms_position_get_x (_tmp21_);
				_tmp23_ = _tmp22_;
				_tmp24_ = node;
				_tmp25_ = soy_controllers_graph_inode_get_position ((soycontrollersgraphINode*) _tmp24_);
				_tmp26_ = _tmp25_;
				_tmp27_ = soy_atoms_position_get_x (_tmp26_);
				_tmp28_ = _tmp27_;
				_tmp29_ = self->priv->_position;
				_tmp30_ = soy_atoms_position_get_y (_tmp29_);
				_tmp31_ = _tmp30_;
				_tmp32_ = node;
				_tmp33_ = soy_controllers_graph_inode_get_position ((soycontrollersgraphINode*) _tmp32_);
				_tmp34_ = _tmp33_;
				_tmp35_ = soy_atoms_position_get_y (_tmp34_);
				_tmp36_ = _tmp35_;
				_tmp37_ = hypotf (_tmp23_ - _tmp28_, _tmp31_ - _tmp36_);
				dist = _tmp37_;
				_tmp38_ = lst;
				_tmp39_ = dist;
				_tmp40_ = node;
				_tmp41_ = soy_controllers_graph_edge_new (_tmp39_, (soycontrollersgraphINode*) self, (soycontrollersgraphINode*) _tmp40_);
				_tmp42_ = _tmp41_;
				gee_abstract_collection_add ((GeeAbstractCollection*) _tmp38_, _tmp42_);
				_soy_controllers_graph_edge_unref0 (_tmp42_);
				_tmp43_ = cnt;
				cnt = _tmp43_ + 1;
				_g_object_unref0 (node);
				_g_object_unref0 (offset);
			}
		}
	}
	{
		GeeHashSet* _tmp44_;
		GeeIterator* _tmp45_ = NULL;
		GeeIterator* _node_it;
		_tmp44_ = self->priv->_connections;
		_tmp45_ = gee_abstract_collection_iterator ((GeeAbstractCollection*) _tmp44_);
		_node_it = _tmp45_;
		while (TRUE) {
			GeeIterator* _tmp46_;
			gboolean _tmp47_ = FALSE;
			GeeIterator* _tmp48_;
			gpointer _tmp49_ = NULL;
			soycontrollersgraphINode* node;
			soyatomsPosition** _tmp50_;
			gint _tmp50__length1;
			gint _tmp51_;
			soycontrollersgraphINode* _tmp52_;
			soyatomsPosition* _tmp53_;
			soyatomsPosition* _tmp54_;
			soyatomsPosition* _tmp55_;
			soyatomsPosition* _tmp56_;
			soyatomsPosition* _tmp57_;
			gfloat _tmp58_;
			gfloat _tmp59_;
			soycontrollersgraphINode* _tmp60_;
			soyatomsPosition* _tmp61_;
			soyatomsPosition* _tmp62_;
			gfloat _tmp63_;
			gfloat _tmp64_;
			soyatomsPosition* _tmp65_;
			gfloat _tmp66_;
			gfloat _tmp67_;
			soycontrollersgraphINode* _tmp68_;
			soyatomsPosition* _tmp69_;
			soyatomsPosition* _tmp70_;
			gfloat _tmp71_;
			gfloat _tmp72_;
			gfloat _tmp73_ = 0.0F;
			gfloat dist;
			GeeLinkedList* _tmp74_;
			gfloat _tmp75_;
			soycontrollersgraphINode* _tmp76_;
			soycontrollersgraphEdge* _tmp77_;
			soycontrollersgraphEdge* _tmp78_;
			gint _tmp79_;
			_tmp46_ = _node_it;
			_tmp47_ = gee_iterator_next (_tmp46_);
			if (!_tmp47_) {
				break;
			}
			_tmp48_ = _node_it;
			_tmp49_ = gee_iterator_get (_tmp48_);
			node = (soycontrollersgraphINode*) _tmp49_;
			_tmp50_ = poss;
			_tmp50__length1 = poss_length1;
			_tmp51_ = cnt;
			_tmp52_ = node;
			_tmp53_ = soy_controllers_graph_inode_get_position (_tmp52_);
			_tmp54_ = _tmp53_;
			_tmp55_ = _g_object_ref0 (_tmp54_);
			_g_object_unref0 (_tmp50_[_tmp51_]);
			_tmp50_[_tmp51_] = _tmp55_;
			_tmp56_ = _tmp50_[_tmp51_];
			_tmp57_ = self->priv->_position;
			_tmp58_ = soy_atoms_position_get_x (_tmp57_);
			_tmp59_ = _tmp58_;
			_tmp60_ = node;
			_tmp61_ = soy_controllers_graph_inode_get_position (_tmp60_);
			_tmp62_ = _tmp61_;
			_tmp63_ = soy_atoms_position_get_x (_tmp62_);
			_tmp64_ = _tmp63_;
			_tmp65_ = self->priv->_position;
			_tmp66_ = soy_atoms_position_get_y (_tmp65_);
			_tmp67_ = _tmp66_;
			_tmp68_ = node;
			_tmp69_ = soy_controllers_graph_inode_get_position (_tmp68_);
			_tmp70_ = _tmp69_;
			_tmp71_ = soy_atoms_position_get_y (_tmp70_);
			_tmp72_ = _tmp71_;
			_tmp73_ = hypotf (_tmp59_ - _tmp64_, _tmp67_ - _tmp72_);
			dist = _tmp73_;
			_tmp74_ = lst;
			_tmp75_ = dist;
			_tmp76_ = node;
			_tmp77_ = soy_controllers_graph_edge_new (_tmp75_, (soycontrollersgraphINode*) self, _tmp76_);
			_tmp78_ = _tmp77_;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp74_, _tmp78_);
			_soy_controllers_graph_edge_unref0 (_tmp78_);
			_tmp79_ = cnt;
			cnt = _tmp79_ + 1;
		}
		_g_object_unref0 (_node_it);
	}
	_tmp80_ = self->priv->_graph;
	_tmp81_ = self->priv->_position;
	_tmp82_ = poss;
	_tmp82__length1 = poss_length1;
	_tmp84_ = soy_controllers_graph_igraph_check_collisions ((soycontrollersgraphIGraph*) _tmp80_, _tmp81_, _tmp82_, _tmp82__length1, &_tmp83_);
	blocked = _tmp84_;
	blocked_length1 = _tmp83_;
	_blocked_size_ = blocked_length1;
	_tmp85_ = cnt;
	cnt = _tmp85_ - 1;
	while (TRUE) {
		gint _tmp86_;
		gboolean* _tmp87_;
		gint _tmp87__length1;
		gint _tmp88_;
		gboolean _tmp89_;
		gint _tmp94_;
		_tmp86_ = cnt;
		if (!(_tmp86_ >= 0)) {
			break;
		}
		_tmp87_ = blocked;
		_tmp87__length1 = blocked_length1;
		_tmp88_ = cnt;
		_tmp89_ = _tmp87_[_tmp88_];
		if (_tmp89_) {
			GeeLinkedList* _tmp90_;
			gint _tmp91_;
			gpointer _tmp92_ = NULL;
			soycontrollersgraphEdge* _tmp93_;
			_tmp90_ = lst;
			_tmp91_ = cnt;
			_tmp92_ = gee_abstract_list_remove_at ((GeeAbstractList*) _tmp90_, _tmp91_);
			_tmp93_ = (soycontrollersgraphEdge*) _tmp92_;
			_soy_controllers_graph_edge_unref0 (_tmp93_);
		}
		_tmp94_ = cnt;
		cnt = _tmp94_ - 1;
	}
	result = (GeeList*) lst;
	blocked = (g_free (blocked), NULL);
	poss = (_vala_array_free (poss, poss_length1, (GDestroyNotify) g_object_unref), NULL);
	return result;
}


GeeList* soy_controllers_graph__grid_terminal_node_get_edges (soycontrollersgraph_gridTerminalNode* self) {
	g_return_val_if_fail (self != NULL, NULL);
	return SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_GET_CLASS (self)->get_edges (self);
}


static void soy_controllers_graph__grid_terminal_node_real_add_connection (soycontrollersgraph_gridTerminalNode* self, soycontrollersgraphINode* other) {
	GeeHashSet* _tmp0_;
	soycontrollersgraphINode* _tmp1_;
	gboolean _tmp2_ = FALSE;
	g_return_if_fail (other != NULL);
	_tmp0_ = self->priv->_connections;
	_tmp1_ = other;
	_tmp2_ = gee_abstract_collection_contains ((GeeAbstractCollection*) _tmp0_, _tmp1_);
	if (!_tmp2_) {
		GeeHashSet* _tmp3_;
		soycontrollersgraphINode* _tmp4_;
		_tmp3_ = self->priv->_connections;
		_tmp4_ = other;
		gee_abstract_collection_add ((GeeAbstractCollection*) _tmp3_, _tmp4_);
	}
}


void soy_controllers_graph__grid_terminal_node_add_connection (soycontrollersgraph_gridTerminalNode* self, soycontrollersgraphINode* other) {
	g_return_if_fail (self != NULL);
	SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_GET_CLASS (self)->add_connection (self, other);
}


static soyatomsPosition* soy_controllers_graph__grid_terminal_node_real_get_position (soycontrollersgraphINode* base) {
	soyatomsPosition* result;
	soycontrollersgraph_gridTerminalNode* self;
	soyatomsPosition* _tmp0_;
	self = (soycontrollersgraph_gridTerminalNode*) base;
	_tmp0_ = self->priv->_position;
	result = _tmp0_;
	return result;
}


static void soy_controllers_graph__grid_terminal_node_class_init (soycontrollersgraph_gridTerminalNodeClass * klass) {
	soy_controllers_graph__grid_terminal_node_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (soycontrollersgraph_gridTerminalNodePrivate));
	SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_CLASS (klass)->get_edges = soy_controllers_graph__grid_terminal_node_real_get_edges;
	SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_CLASS (klass)->add_connection = soy_controllers_graph__grid_terminal_node_real_add_connection;
	G_OBJECT_CLASS (klass)->get_property = _vala_soy_controllers_graph__grid_terminal_node_get_property;
	G_OBJECT_CLASS (klass)->finalize = soy_controllers_graph__grid_terminal_node_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_POSITION, g_param_spec_object ("position", "position", "position", SOY_ATOMS_TYPE_POSITION, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
}


static void soy_controllers_graph__grid_terminal_node_soy_controllers_graph_inode_interface_init (soycontrollersgraphINodeIface * iface) {
	soy_controllers_graph__grid_terminal_node_soy_controllers_graph_inode_parent_iface = g_type_interface_peek_parent (iface);
	iface->get_edges = (GeeList* (*)(soycontrollersgraphINode*)) soy_controllers_graph__grid_terminal_node_get_edges;
	iface->get_position = soy_controllers_graph__grid_terminal_node_real_get_position;
}


static void soy_controllers_graph__grid_terminal_node_instance_init (soycontrollersgraph_gridTerminalNode * self) {
	self->priv = SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_GET_PRIVATE (self);
}


static void soy_controllers_graph__grid_terminal_node_finalize (GObject* obj) {
	soycontrollersgraph_gridTerminalNode * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE, soycontrollersgraph_gridTerminalNode);
	_g_object_unref0 (self->priv->_position);
	self->priv->_grid_nodes = (_vala_array_free (self->priv->_grid_nodes, self->priv->_grid_nodes_length1, (GDestroyNotify) g_object_unref), NULL);
	_g_object_unref0 (self->priv->_connections);
	G_OBJECT_CLASS (soy_controllers_graph__grid_terminal_node_parent_class)->finalize (obj);
}


GType soy_controllers_graph__grid_terminal_node_get_type (void) {
	static volatile gsize soy_controllers_graph__grid_terminal_node_type_id__volatile = 0;
	if (g_once_init_enter (&soy_controllers_graph__grid_terminal_node_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soycontrollersgraph_gridTerminalNodeClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_controllers_graph__grid_terminal_node_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soycontrollersgraph_gridTerminalNode), 0, (GInstanceInitFunc) soy_controllers_graph__grid_terminal_node_instance_init, NULL };
		static const GInterfaceInfo soy_controllers_graph_inode_info = { (GInterfaceInitFunc) soy_controllers_graph__grid_terminal_node_soy_controllers_graph_inode_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType soy_controllers_graph__grid_terminal_node_type_id;
		soy_controllers_graph__grid_terminal_node_type_id = g_type_register_static (G_TYPE_OBJECT, "soycontrollersgraph_gridTerminalNode", &g_define_type_info, 0);
		g_type_add_interface_static (soy_controllers_graph__grid_terminal_node_type_id, SOY_CONTROLLERS_GRAPH_TYPE_INODE, &soy_controllers_graph_inode_info);
		g_once_init_leave (&soy_controllers_graph__grid_terminal_node_type_id__volatile, soy_controllers_graph__grid_terminal_node_type_id);
	}
	return soy_controllers_graph__grid_terminal_node_type_id__volatile;
}


static void _vala_soy_controllers_graph__grid_terminal_node_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	soycontrollersgraph_gridTerminalNode * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_CONTROLLERS_GRAPH__GRID_TYPE_TERMINAL_NODE, soycontrollersgraph_gridTerminalNode);
	switch (property_id) {
		case SOY_CONTROLLERS_GRAPH__GRID_TERMINAL_NODE_POSITION:
		g_value_set_object (value, soy_controllers_graph_inode_get_position ((soycontrollersgraphINode*) self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



